{
  "version": 3,
  "sources": ["../src/brick/brick.js", "../src/controllers/extensionsRegistry.js", "../src/controllers/runtimeController.js", "../src/controllers/statusController.js", "../src/utils/options.js", "../src/controllers/optionsController.js", "../src/controllers/eventsController.js", "../src/controllers/extensionsController.js", "../src/startup/services.js", "../src/startup/bootstrap.js", "../src/extensions/html-css.js", "../src/extensions/html-events.js", "../src/extensions/html-render.js", "../src/extensions/html.js", "../src/extensions/store.js", "../src/extensions/wire-client.js", "../src/extensions/wire-service.js", "../src/components/form-items.js", "../src/components/form-record.js", "../src/components/form.js", "../src/components/status-bar.js", "../src/components/table-columns.js", "../src/components/table-rows-focused.js", "../src/components/table-rows.js", "../src/components/table.js", "../src/services/wire.js", "../src/_manifest.js", "../src/index.js"],
  "sourcesContent": ["/**\r\n * Brick constructor.\r\n * @constructor\r\n * @param {Object} options\r\n */\r\nexport default function Brick(options) {\r\n  const opts = options && typeof options === 'object' ? Object.assign({}, options) : {};\r\n  opts.id = opts.id || this._nextId();\r\n  opts.host = (opts.host || 'brick').toLowerCase();\r\n  opts.kind = (opts.kind || 'brick').toLowerCase();\r\n  Object.defineProperty(this, 'id', {\r\n    value: opts.id,\r\n    writable: false,\r\n    configurable: false,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(this, 'host', {\r\n    value: opts.host,\r\n    writable: false,\r\n    configurable: false,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(this, 'kind', {\r\n    value: opts.kind,\r\n    writable: false,\r\n    configurable: false,\r\n    enumerable: true\r\n  });\r\n\r\n  // Per-brick runtime state container (isolated from public surface)\r\n  Object.defineProperty(this, '_runtime', {\r\n    value: {},\r\n    writable: false,\r\n    configurable: false,\r\n    enumerable: false\r\n  });\r\n\r\n  // Reference to global controllers via _controllers object\r\n  // We keep it as an object for potential future per-brick overrides or state containment\r\n  Object.defineProperty(this, '_controllers', {\r\n    value: globalThis.VanillaBrick.runtime.controllers,\r\n    writable: false,\r\n    configurable: false,\r\n    enumerable: false\r\n  });\r\n\r\n  // Initialize controllers with this brick instance\r\n  const brick = this;\r\n  const ctrl = this._controllers;\r\n\r\n  // 1. Init Controllers\r\n  if (ctrl.status) ctrl.status.init(brick);\r\n  if (ctrl.options) ctrl.options.init(brick, opts);\r\n  if (ctrl.events) ctrl.events.init(brick);\r\n  if (ctrl.extensions) ctrl.extensions.init(brick);\r\n\r\n  // 2. Apply Extensions\r\n  // This triggers the whole extension loading pipeline\r\n  if (ctrl.extensions) {\r\n    ctrl.extensions.applyAll(brick);\r\n  }\r\n\r\n  // 3. Set Initial Status\r\n  if (ctrl.status) {\r\n    ctrl.status.set(brick, 'ready', { options: opts });\r\n  }\r\n}\r\n\r\nBrick.prototype.destroy = function () {\r\n  this._controllers.status.set(this, 'destroyed');\r\n  // Optional: clear runtime state to release references eagerly\r\n  if (this._runtime) {\r\n    this._runtime.status = {};\r\n    this._runtime.options = {};\r\n    this._runtime.events = {};\r\n    this._runtime.extensions = {};\r\n  }\r\n};\r\n\r\nObject.defineProperty(Brick, '_idCounter', {\r\n  value: 0,\r\n  writable: true,\r\n  configurable: false,\r\n  enumerable: false\r\n});\r\n\r\nObject.defineProperty(Brick.prototype, '_nextId', {\r\n  value: function () {\r\n    Brick._idCounter += 1;\r\n    return 'brick-' + Brick._idCounter;\r\n  },\r\n  writable: false,\r\n  configurable: false,\r\n  enumerable: false\r\n});\r\n", "// Retorna un array amb totes les definicions d'extensions d'un objecte font\r\nconst ExtensionsRegistry = {\r\n  /**\r\n   * Retorna un array amb totes les definicions d'extensions\r\n   * definides a la font (habitualment l'objecte d'extensions passat)\r\n   */\r\n  _cache: {},\r\n\r\n  /**\r\n   * Retorna un array amb totes les definicions d'extensions\r\n   * filtrades per host/kind i amb depend\u00E8ncies resoltes (topological sort).\r\n   *\r\n   * @param {Object} brick - Instancia del brick o objecte de metadates {host:'brick', kind:'table'}\r\n   */\r\n  all: function (brick) {\r\n    if (!brick || typeof brick !== 'object') {\r\n      console.warn('ExtensionsRegistry.all() called without brick context');\r\n      return [];\r\n    }\r\n\r\n    const host = (brick.host || 'brick').toLowerCase();\r\n    const kind = (brick.kind || '').toLowerCase();\r\n    if (!kind) return [];\r\n\r\n    const cacheKey = host + '::' + kind;\r\n    if (this._cache[cacheKey]) {\r\n      return this._cache[cacheKey];\r\n    }\r\n\r\n    const src = (globalThis.VanillaBrick && globalThis.VanillaBrick.extensions) || {};\r\n    const candidates = {};\r\n    const seenExtensions = new Set();\r\n\r\n    function normalizeRule(rule) {\r\n      if (!rule || typeof rule !== 'object') return null;\r\n      const rHost = (rule.host || 'brick').toLowerCase();\r\n      const rKind = typeof rule.kind === 'string' ? rule.kind.toLowerCase() : '';\r\n      if (!rKind) return null;\r\n      return { host: rHost, kind: rKind };\r\n    }\r\n\r\n    function matchesRule(rule, currentHost, currentKind) {\r\n      if (!rule) return false;\r\n      const hostMatch = rule.host === '*' || rule.host === currentHost;\r\n      const kindMatch = rule.kind === '*' || rule.kind === currentKind;\r\n      return hostMatch && kindMatch;\r\n    }\r\n\r\n    // 1. Initial Filter by host/kind (and prepare candidates map)\r\n    for (const key in src) {\r\n      if (!Object.prototype.hasOwnProperty.call(src, key)) continue;\r\n      const def = src[key];\r\n      if (!def || typeof def !== 'object') continue;\r\n\r\n      // Skip if we've already seen this exact extension definition object\r\n      if (seenExtensions.has(def)) continue;\r\n\r\n      // Normalitzar el nom intern\r\n      if (!def._name) def._name = def.ns || key;\r\n\r\n      const rules = def.for;\r\n      if (!Array.isArray(rules) || !rules.length) {\r\n        console.warn('VanillaBrick extension without valid `for` array, skipped', def._name || key);\r\n        continue;\r\n      }\r\n\r\n      let match = false;\r\n      for (let ri = 0; ri < rules.length; ri += 1) {\r\n        const rule = normalizeRule(rules[ri]);\r\n        if (!rule) continue;\r\n        if (matchesRule(rule, host, kind)) {\r\n          match = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (match) {\r\n        candidates[key] = { name: key, ext: def };\r\n        seenExtensions.add(def);\r\n      }\r\n    }\r\n\r\n    // 2. Recursive Validation & Topological Sort (DFS)\r\n    const sortedList = [];\r\n    // Status: undefined (unvisited), 'visiting', 'ok', 'missing'\r\n    const status = {};\r\n\r\n    function visit(name) {\r\n      if (status[name] === 'ok') return true;\r\n      if (status[name] === 'visiting') return false; // Cycle detection\r\n      if (status[name] === 'missing') return false;\r\n\r\n      let candidate = candidates[name];\r\n\r\n      // If not found by name, search for a candidate with matching .ns\r\n      if (!candidate) {\r\n        for (const k in candidates) {\r\n          if (candidates[k].ext.ns === name) {\r\n            candidate = candidates[k];\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!candidate) {\r\n        status[name] = 'missing';\r\n        return false;\r\n      }\r\n\r\n      status[name] = 'visiting';\r\n\r\n      const reqs = candidate.ext.requires || candidate.ext._requires;\r\n      if (Array.isArray(reqs)) {\r\n        for (let i = 0; i < reqs.length; i++) {\r\n          const depName = reqs[i];\r\n          if (!visit(depName)) {\r\n            status[name] = 'missing'; // Dependency failed\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n\r\n      status[name] = 'ok';\r\n      sortedList.push(candidate);\r\n      return true;\r\n    }\r\n\r\n    for (const name in candidates) {\r\n      visit(name);\r\n    }\r\n\r\n    this._cache[cacheKey] = sortedList;\r\n    return sortedList;\r\n  },\r\n\r\n  /**\r\n   * Genera els prototips i contextos per a un brick espec\u00EDfic o de forma gen\u00E8rica.\r\n   * Aquesta funci\u00F3 es crida una vegada per tipus d'extensi\u00F3 per generar els \"motlles\".\r\n   */\r\n  _bake: function (defs) {\r\n    const prototypes = {};\r\n\r\n    for (let i = 0; i < defs.length; i++) {\r\n      const def = defs[i];\r\n      const name = def.name || def.ext.ns;\r\n\r\n      // 1. Prototype for the extension context (ctxExt)\r\n      // Contains the extension definition and helper methods.\r\n      // 'brick' will be assigned at instantiation time.\r\n      const protoExt = {\r\n        _name: name,\r\n        _def: def.ext\r\n      };\r\n\r\n      // Bake internal extension methods into the prototype\r\n      // This ensures 'this._helper()' works inside init/destroy/handlers\r\n      if (def.ext.extension && typeof def.ext.extension === 'object') {\r\n        for (const k in def.ext.extension) {\r\n          if (typeof def.ext.extension[k] === 'function') {\r\n            protoExt[k] = def.ext.extension[k];\r\n          }\r\n        }\r\n      }\r\n\r\n      // 2. Prototype for the API context (ctxApi)\r\n      // Contains the 'brick' API methods exposed by this extension.\r\n      // These methods are bound to ctxApi, which has access to ctxExt.\r\n      const protoApi = {};\r\n\r\n      // Bake API methods\r\n      if (def.ext.brick) {\r\n        for (const k in def.ext.brick) {\r\n          if (typeof def.ext.brick[k] === 'function') {\r\n            // We use a closure here to trap 'name' and 'k' correctly\r\n            (function (methodName, methodFn, extName) {\r\n              protoApi[methodName] = function () {\r\n                // This function will be called on the namespace object (e.g. brick.table.refresh())\r\n                // We need to find the specific context for this extension instance\r\n\r\n                // 'this' is the namespace object (brick[ns])\r\n                // It contains _extData map: { extName: { ctx: ctxApi, fns:..., meta:... } }\r\n                const extData = this._extData && this._extData[extName];\r\n\r\n                if (!extData) {\r\n                  console.warn(`VanillaBrick: Extension data not found for ${extName} in namespace API call ${methodName}`);\r\n                  return;\r\n                }\r\n\r\n                const args = Array.prototype.slice.call(arguments);\r\n                const runtime = (globalThis.VanillaBrick) ? globalThis.VanillaBrick.runtime : null;\r\n\r\n                if (runtime && typeof runtime.execute === 'function') {\r\n                  // Metadata for debugging/tracing\r\n                  const meta = {\r\n                    type: 'brick-api',\r\n                    ext: extName,\r\n                    brick: extData.ctx.brick ? extData.ctx.brick.id : 'unknown',\r\n                    fnName: methodName\r\n                  };\r\n                  return runtime.execute(methodFn, extData.ctx, args, meta);\r\n                }\r\n\r\n                return methodFn.apply(extData.ctx, args);\r\n              };\r\n            })(k, def.ext.brick[k], name);\r\n          }\r\n        }\r\n      }\r\n\r\n      prototypes[name] = {\r\n        ext: protoExt,\r\n        api: protoApi\r\n      };\r\n    }\r\n\r\n    return prototypes;\r\n  }\r\n};\r\n\r\nexport default ExtensionsRegistry;\r\n\r\n", "/**\r\n * Runtime controller (Global Singleton)\r\n * Wraps all developer code execution from extensions.\r\n * Provides centralized error handling and metadata capture for debugging.\r\n * @constructor\r\n */\r\nexport default function RuntimeController() {\r\n    // No per-brick state\r\n}\r\n\r\n/**\r\n * Execute developer code with error handling and metadata capture.\r\n * \r\n * @param {Function} fn - The function to execute\r\n * @param {Object} context - The 'this' context for the function\r\n * @param {Array} args - Arguments to pass to the function\r\n * @param {Object} meta - Metadata for debugging\r\n *   - type: 'event' | 'init' | 'destroy' | 'brick-api' | 'extension-private'\r\n *   - ext: extension name\r\n *   - brick: brick.id (optional)\r\n */\r\nRuntimeController.prototype.execute = function (fn, context, args, meta) {\r\n    \"use strict\";\r\n    if (typeof fn !== 'function') {\r\n        const brickId = (meta && meta.brick) || (context && context.brick && context.brick.id) || 'unknown';\r\n        console.warn(`[RuntimeController] Attempted to execute non-function for brick ${brickId}`, meta);\r\n        return undefined;\r\n    }\r\n\r\n    try {\r\n        const result = fn.apply(context, args);\r\n\r\n        // Support async functions\r\n        if (result && typeof result.then === 'function') {\r\n            return result.catch(function (err) {\r\n                this._handleError(err, fn, context, meta);\r\n                return Promise.reject(err);\r\n            }.bind(this));\r\n        }\r\n\r\n        return result;\r\n    } catch (err) {\r\n        this._handleError(err, fn, context, meta);\r\n        throw err;\r\n    }\r\n};\r\n\r\n/**\r\n * Handle errors from developer code execution.\r\n * Logs detailed information including source code for debugging.\r\n */\r\nRuntimeController.prototype._handleError = function (err, fn, context, meta) {\r\n    var brickCtx = (context && context.brick) ? context.brick : context;\r\n    // If context is weird, try to get brick from meta or fallback\r\n    if (!brickCtx || !brickCtx.id) {\r\n        if (meta && meta.brick) {\r\n            brickCtx = { id: meta.brick };\r\n        }\r\n    }\r\n\r\n    const errorInfo = {\r\n        error: err,\r\n        message: err.message || String(err),\r\n        stack: err.stack,\r\n        meta: meta || {},\r\n        context: {\r\n            brick: brickCtx && brickCtx.id ? brickCtx.id : null,\r\n            kind: brickCtx && brickCtx.kind ? brickCtx.kind : null\r\n        }\r\n    };\r\n\r\n    // Try to capture function source for debugging\r\n    try {\r\n        errorInfo.fnSource = fn.toString();\r\n    } catch (e) {\r\n        errorInfo.fnSource = '[unable to capture source]';\r\n    }\r\n\r\n    console.error('[RuntimeController] Error executing developer code:', errorInfo);\r\n};\r\n", "/**\r\n * Status Controller (Global Singleton)\r\n * Manages the lifecycle state of a brick (init, ready, destroyed, etc.)\r\n * @constructor\r\n */\r\nexport default function StatusController() {\r\n    // No per-brick state here\r\n}\r\n\r\n/**\r\n * Initialize status for a brick\r\n * @param {Object} brick\r\n */\r\nStatusController.prototype.init = function (brick) {\r\n    if (!brick || !brick._runtime) return;\r\n    brick._runtime.status = {\r\n        value: 'initializing',\r\n        listening: true\r\n    };\r\n\r\n    const self = this;\r\n    brick.status = {\r\n        get: () => self.get(brick),\r\n        set: (status, payload) => self.set(brick, status, payload),\r\n        is: (status) => self.is(brick, status)\r\n    }\r\n  };\r\n\r\n/**\r\n * Get current status\r\n */\r\nStatusController.prototype.get = function (brick) {\r\n    return brick && brick._runtime && brick._runtime.status ? brick._runtime.status.value : undefined;\r\n};\r\n\r\n/**\r\n * Check if current status matches\r\n */\r\nStatusController.prototype.is = function (brick, status) {\r\n    if (!brick || !brick._runtime || !brick._runtime.status) return false;\r\n    return brick._runtime.status.value === status;\r\n};\r\n\r\n/**\r\n * Set status and fire event\r\n */\r\nStatusController.prototype.set = function (brick, newStatus, payload) {\r\n    if (!brick || !brick._runtime || !brick._runtime.status) return;\r\n    const state = brick._runtime.status;\r\n    if (!state.listening) return;\r\n    if (state.value === newStatus) return;\r\n\r\n    const oldStatus = state.value;\r\n    state.value = newStatus;\r\n\r\n    // Fire generic change event\r\n    if (brick.events) {\r\n        brick.events.fire('brick:status:change', {\r\n            from: oldStatus,\r\n            to: newStatus,\r\n            ...payload\r\n        });\r\n\r\n        // Fire specific event (e.g. brick:status:ready)\r\n        brick.events.fire('brick:status:' + newStatus, payload);\r\n    }\r\n\r\n    if (newStatus === 'destroyed') {\r\n        state.listening = false;\r\n        // Cleanup events maybe? managed by destroy hook usually\r\n    }\r\n};\r\n", "/**\r\n * Merges option objects with priority: last arguments override previous ones.\r\n * Handles nested objects (deep merge) but arrays are replaced.\r\n */\r\nexport function mergeOptions() {\r\n  const result = {};\r\n\r\n  for (let i = 0; i < arguments.length; i++) {\r\n    const source = arguments[i];\r\n    if (!source || typeof source !== 'object') continue;\r\n\r\n    for (const key in source) {\r\n      if (!Object.prototype.hasOwnProperty.call(source, key)) continue;\r\n\r\n      const sVal = source[key];\r\n      const rVal = result[key];\r\n\r\n      if (\r\n        sVal &&\r\n        typeof sVal === 'object' &&\r\n        !Array.isArray(sVal) &&\r\n        rVal &&\r\n        typeof rVal === 'object' &&\r\n        !Array.isArray(rVal)\r\n      ) {\r\n        // Deep merge objects\r\n        result[key] = mergeOptions(rVal, sVal);\r\n      } else {\r\n        // Replace primitives and arrays\r\n        result[key] = sVal; // Shallow copy enough for config usually, or clone if needed\r\n      }\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n/**\r\n * Gets a value from an object using dot notation path (e.g. \"table.columns.0.width\")\r\n */\r\nexport function getOption(obj, path) {\r\n  if (!obj || !path) return undefined;\r\n  if (!path.indexOf('.')) return obj[path];\r\n\r\n  const parts = path.split('.');\r\n  let current = obj;\r\n  for (let i = 0; i < parts.length; i++) {\r\n    if (current === undefined || current === null) return undefined;\r\n    current = current[parts[i]];\r\n  }\r\n  return current;\r\n}\r\n\r\n/**\r\n * Sets a value in an object using dot notation path, creating intermediate objects.\r\n */\r\nexport function setOption(obj, path, value) {\r\n  if (!obj || !path) return;\r\n\r\n  const parts = path.split('.');\r\n  let current = obj;\r\n\r\n  for (let i = 0; i < parts.length - 1; i++) {\r\n    const p = parts[i];\r\n    if (current[p] === undefined || current[p] === null) {\r\n      current[p] = {};\r\n    }\r\n    current = current[p];\r\n  }\r\n\r\n  current[parts[parts.length - 1]] = value;\r\n}\r\n", "import { mergeOptions, getOption, setOption } from '../utils/options.js';\r\n\r\n/**\r\n * Options Controller (Global Singleton)\r\n * Manages configuration, defaults, and reactive updates for options.\r\n * @constructor\r\n */\r\nexport default function OptionsController() {\r\n  // No per-brick state here.\r\n}\r\n\r\n/**\r\n * Initialize options for a brick\r\n * @param {Object} brick\r\n * @param {Object} initialOptions\r\n */\r\nOptionsController.prototype.init = function (brick, initialOptions) {\r\n  if (!brick || !brick._runtime) return;\r\n  brick._runtime.options = {\r\n    data: initialOptions || {},\r\n    cache: {}\r\n  };\r\n\r\n    // Create public API\r\n  const self = this;\r\n  brick.options = {\r\n    get: function (key, fallback) {\r\n      return  self.get(brick, key, fallback); \r\n    },\r\n    set: function(key, value) {\r\n      self.setSync(brick, key, value);\r\n      return brick;\r\n    },\r\n    setAsync: async function(key, value)  {\r\n      await self.setAsync(brick, key, value);\r\n      return brick;\r\n    },\r\n    has: function(key) { return self.has(brick, key)} ,\r\n    all: function()  {self.all(brick)},\r\n    setSilent:function (key, value)  {\r\n      self.setSilent(brick, key, value);\r\n      return brick;\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * Get the full options object (resolved).\r\n */\r\nOptionsController.prototype.all = function (brick) {\r\n  return (brick && brick._runtime && brick._runtime.options) ? brick._runtime.options.data : {};\r\n};\r\n\r\n/**\r\n * Check if an option exists.\r\n */\r\nOptionsController.prototype.has = function (brick, key) {\r\n  const data = (brick && brick._runtime && brick._runtime.options) ? brick._runtime.options.data : {};\r\n  const val = getOption(data, key);\r\n  return val !== undefined;\r\n};\r\n\r\n/**\r\n * Get an option value with fallback.\r\n */\r\nOptionsController.prototype.get = function (brick, key, fallback) {\r\n  const state = (brick && brick._runtime) ? brick._runtime.options : null;\r\n  if (!state) return fallback;\r\n\r\n  // Check cache first (for simple keys or previously resolved deep keys)\r\n  if (state.cache && Object.prototype.hasOwnProperty.call(state.cache, key)) {\r\n    return state.cache[key];\r\n  }\r\n\r\n  const val = getOption(state.data, key);\r\n  const result = (val === undefined) ? fallback : val;\r\n\r\n  // Cache the result\r\n  if (state.cache) {\r\n    state.cache[key] = result;\r\n  }\r\n  return result;\r\n};\r\n\r\n/**\r\n * Set an option value synchronously.\r\n * Triggers 'option:changed' and specific 'option:changed:key'.\r\n */\r\nOptionsController.prototype.setSync = function (brick, key, value) {\r\n  const state = (brick && brick._runtime) ? brick._runtime.options : null;\r\n  if (!state) return;\r\n\r\n  const old = this.get(brick, key);\r\n  if (old === value) return; // No change\r\n\r\n  setOption(state.data, key, value);\r\n\r\n  // Invalidate cache\r\n  state.cache = {};\r\n\r\n  // Fire change events\r\n  if (brick.events) {\r\n    brick.events.fire('brick:option:changed', { key: key, value: value, oldValue: old });\r\n    brick.events.fire('brick:option:changed:' + key, { value: value, oldValue: old });\r\n  }\r\n};\r\n\r\n/**\r\n * Set an option value silently (no events).\r\n */\r\nOptionsController.prototype.setSilent = function (brick, key, value) {\r\n  const state = (brick && brick._runtime) ? brick._runtime.options : null;\r\n  if (!state) return;\r\n\r\n  setOption(state.data, key, value);\r\n  // Invalidate cache\r\n  state.cache = {};\r\n};\r\n\r\n/**\r\n * Set an option value asynchronously (supports validation/middleware if expanded).\r\n */\r\nOptionsController.prototype.setAsync = async function (brick, key, value) {\r\n  this.setSync(brick, key, value);\r\n  return Promise.resolve();\r\n};\r\n", "/**\r\n * Event Bus Controller (Global Singleton)\r\n * Manages events shaped as \"namespace:event:target\" with phases before/on/after.\r\n * @constructor\r\n */\r\nexport default function EventBusController() {\r\n  // No per-brick state here yet (will use WeakMap later)\r\n  this.phases = ['before', 'on', 'after']; // Shared constant\r\n}\r\n\r\n/**\r\n * Initialize event bus for a brick\r\n */\r\nEventBusController.prototype.init = function (brick) {\r\n  if (!brick || !brick._runtime) return;\r\n\r\n  // Initialize per-brick state\r\n  brick._runtime.events = {\r\n    handlers: [],\r\n    dispatchCache: {}\r\n  };\r\n\r\n  // Create public API\r\n  const self = this;\r\n  brick.events = {\r\n    on: function (pattern, phase, priority, handler, meta) {\r\n      self.on(brick, pattern, phase, priority, handler, meta);\r\n      return brick;\r\n    },\r\n    off: function (pattern, phase, handler) {\r\n      self.off(brick, pattern, phase, handler);\r\n      return brick;\r\n    },\r\n    fire: function (eventName, payload) {\r\n      self.fire(brick, eventName, payload);\r\n      return brick;\r\n    },\r\n    fireAsync: function (eventName, payload) {\r\n      return self.fireAsync(brick, eventName, payload);\r\n    }\r\n  };\r\n};\r\n\r\n// ---------- Internal utils ----------\r\n\r\nEventBusController.prototype._normalizePriority = function (priority) {\r\n  let pr = typeof priority === 'number' ? priority : 5;\r\n  if (pr < 0) pr = 0;\r\n  if (pr > 10) pr = 10;\r\n  return pr;\r\n};\r\n\r\n/**\r\n * Compiles a subscription pattern.\r\n * Pattern format: \"namespace:type:target\"\r\n * Supports '*' as wildcard in any position.\r\n */\r\nEventBusController.prototype._compilePattern = function (pattern) {\r\n  const parts = (pattern || '').split(':');\r\n  const ns = parts[0];\r\n  const type = parts[1];\r\n  const target = parts[2];\r\n\r\n  return {\r\n    namespace: !ns || ns === '*' ? undefined : ns,\r\n    type: !type || type === '*' ? undefined : type,\r\n    target: !target || target === '*' ? undefined : target,\r\n  };\r\n};\r\n\r\n/**\r\n * Parses an event name into its components.\r\n * Format: \"namespace:type:target\"\r\n */\r\nEventBusController.prototype._parseEventKey = function (eventName) {\r\n  const parts = (eventName || '').split(':');\r\n  return {\r\n    namespace: parts[0] || '',\r\n    type: parts[1] || '',\r\n    target: parts[2] || '',\r\n  };\r\n};\r\n\r\nEventBusController.prototype._matches = function (compiled, key) {\r\n  return (\r\n    (compiled.namespace === undefined || compiled.namespace === key.namespace) &&\r\n    (compiled.type === undefined || compiled.type === key.type) &&\r\n    (compiled.target === undefined || compiled.target === key.target)\r\n  );\r\n};\r\n\r\nEventBusController.prototype._validateEventName = function (eventName) {\r\n  if (typeof eventName !== 'string') {\r\n    console.error('[EventBus] Event name must be a string.', eventName);\r\n    return false;\r\n  }\r\n  const parts = eventName.split(':');\r\n\r\n  // Strict 3-segment rule\r\n  if (parts.length !== 3) {\r\n    console.error('[EventBus] Invalid event name format. Expected exactly \"namespace:type:target\" (3 segments). Got:', eventName);\r\n    return false;\r\n  }\r\n\r\n  // Validation for Dispatch: No empty parts, no wildcards allowed\r\n  if (!parts[0] || parts[0] === '*' || !parts[1] || parts[1] === '*' || !parts[2] || parts[2] === '*') {\r\n    console.error('[EventBus] Invalid event name for dispatch. Wildcards (*) and empty segments are not allowed in namespace, type, or target.', eventName);\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\n/**\r\n * Returns matched handlers grouped by phase for a specific event name.\r\n * Uses caching. The cache key is the full eventName string.\r\n */\r\nEventBusController.prototype._getHandlersForEvent = function (brick, eventName, phase) {\r\n  if (!brick || !brick._runtime || !brick._runtime.events) return phase ? [] : { before: [], on: [], after: [] };\r\n  const state = brick._runtime.events;\r\n  let handlersByPhase;\r\n\r\n  if (state.dispatchCache[eventName]) {\r\n    handlersByPhase = state.dispatchCache[eventName];\r\n  } else {\r\n    const key = this._parseEventKey(eventName);\r\n    handlersByPhase = {\r\n      before: [],\r\n      on: [],\r\n      after: []\r\n    };\r\n\r\n    for (let i = 0; i < state.handlers.length; i += 1) {\r\n      const h = state.handlers[i];\r\n      if (this._matches(h.compiled, key)) {\r\n        if (handlersByPhase[h.phase]) {\r\n          handlersByPhase[h.phase].push(h);\r\n        }\r\n      }\r\n    }\r\n    state.dispatchCache[eventName] = handlersByPhase;\r\n  }\r\n\r\n  if (phase) {\r\n    return handlersByPhase[phase] || [];\r\n  }\r\n\r\n  return handlersByPhase;\r\n};\r\n\r\n// ---------- Subscription API ----------\r\n\r\n/**\r\n * Register a handler for a pattern and phase.\r\n * pattern: \"namespace:type:target\" (supports '*')\r\n * phase: \"before\" | \"on\" | \"after\" (default \"on\")\r\n * priority: 0..10 (default 5, 0 = highest priority)\r\n */\r\nEventBusController.prototype.on = function (brick, pattern, phase, priority, handler, meta) {\r\n  // Signature compatibility: on(pattern, phase, priority, handler, meta)\r\n  // Optional args shifting\r\n  if (typeof phase === 'function') {\r\n    meta = handler;\r\n    handler = phase;\r\n    phase = 'on';\r\n    priority = undefined;\r\n  } else if (typeof priority === 'function' && typeof handler !== 'function') {\r\n    meta = handler;\r\n    handler = priority;\r\n    priority = undefined;\r\n  }\r\n  if (!handler) return;\r\n  // handler can be a function OR an object { fn, ctx, meta }\r\n\r\n  let ph = phase || 'on';\r\n  if (this.phases.indexOf(ph) === -1) ph = 'on';\r\n\r\n  const pr = this._normalizePriority(priority);\r\n\r\n  const state = brick._runtime.events;\r\n\r\n  state.handlers.push({\r\n    pattern: pattern,\r\n    compiled: this._compilePattern(pattern),\r\n    phase: ph,\r\n    handler: handler,\r\n    priority: pr,\r\n    meta: meta || null\r\n  });\r\n\r\n  // Sort by priority asc (0 = first)\r\n  state.handlers.sort(function (a, b) {\r\n    const pa = typeof a.priority === 'number' ? a.priority : 5;\r\n    const pb = typeof b.priority === 'number' ? b.priority : 5;\r\n    return pa - pb;\r\n  });\r\n\r\n  // Invalidate cache on any subscription change\r\n  state.dispatchCache = {};\r\n};\r\n\r\n/**\r\n * Unregister handlers filtered by pattern, phase and/or handler.\r\n */\r\nEventBusController.prototype.off = function (brick, pattern, phase, handler) {\r\n  if (!brick || !brick._runtime || !brick._runtime.events) return;\r\n  const state = brick._runtime.events;\r\n\r\n  for (let i = state.handlers.length - 1; i >= 0; i -= 1) {\r\n    const h = state.handlers[i];\r\n    if (pattern && h.pattern !== pattern) continue;\r\n    if (phase && h.phase !== phase) continue;\r\n    if (handler && h.handler !== handler) continue;\r\n    state.handlers.splice(i, 1);\r\n  }\r\n  // Invalidate cache on any unsubscription\r\n  state.dispatchCache = {};\r\n};\r\n\r\n// ---------- Pipeline execution (async core) ----------\r\n\r\n/**\r\n * Internal phase execution.\r\n */\r\nEventBusController.prototype._firePhase = async function (brick, phase, eventName, ev) {\r\n  ev.event.phase = phase;\r\n  ev.stopPhase = false;\r\n\r\n  const phaseHandlers = this._getHandlersForEvent(brick, eventName, phase);\r\n  const runtime = (globalThis.VanillaBrick) ? globalThis.VanillaBrick.runtime : null;\r\n\r\n  for (let i = 0; i < phaseHandlers.length; i += 1) {\r\n    if (ev.stopPhase) break;\r\n\r\n    const h = phaseHandlers[i];\r\n    const hnd = h.handler;\r\n\r\n    try {\r\n      let r;\r\n      if (hnd && typeof hnd === 'object' && typeof hnd.fn === 'function') {\r\n        // Execute via descriptor (Extension Handler)\r\n        if (runtime) {\r\n          r = runtime.execute(hnd.fn, hnd.ctx, [ev], hnd.meta);\r\n        } else {\r\n          r = hnd.fn.apply(hnd.ctx, [ev]);\r\n        }\r\n      } else if (typeof hnd === 'function') {\r\n        // Legacy/Direct function case\r\n        if (runtime) {\r\n          r = runtime.execute(hnd, { brick: brick }, [ev], h.meta);\r\n        } else {\r\n          r = hnd(ev, { brick: brick });\r\n        }\r\n      }\r\n\r\n      if (r && typeof r.then === 'function') {\r\n        await r;\r\n      }\r\n    } catch (err) {\r\n      console.error('Error in event handler execution:', err, { h, eventName, phase });\r\n      ev.errors.push({ error: err, phase: phase, event: eventName });\r\n      ev.cancel = true;\r\n    }\r\n  }\r\n\r\n  return ev;\r\n};\r\n\r\nEventBusController.prototype._run = async function (brick, eventName, payload) {\r\n  if (!brick || !brick._runtime || !brick._runtime.events) {\r\n    return {\r\n      event: { name: eventName },\r\n      errors: [{ error: 'Event system not initialized for this brick' }],\r\n      cancel: true\r\n    };\r\n  }\r\n\r\n  // 1. Validation\r\n  if (!this._validateEventName(eventName)) {\r\n    return {\r\n      event: { name: eventName },\r\n      errors: [{ error: 'Invalid event name format or wildcards in dispatch' }],\r\n      cancel: true\r\n    };\r\n  }\r\n\r\n  // 2. Context Initialization\r\n  const key = this._parseEventKey(eventName);\r\n  const ev = {\r\n    brick: brick || null,\r\n    cancel: false,\r\n    data: payload,\r\n    errors: [],\r\n    event: {\r\n      phase: null,\r\n      name: eventName,\r\n      namespace: key.namespace,\r\n      type: key.type,\r\n      target: key.target,\r\n    },\r\n    stopPhase: false,\r\n  };\r\n\r\n  // 3. Sequential Phase Execution\r\n  const phases = this.phases;\r\n  for (let p = 0; p < phases.length; p += 1) {\r\n    const phase = phases[p];\r\n    if (phase === 'on' && ev.cancel) continue;\r\n    await this._firePhase(brick, phase, eventName, ev);\r\n  }\r\n\r\n  return ev;\r\n};\r\n\r\n// ---------- Public API ----------\r\n\r\n/**\r\n * Fire-and-forget event.\r\n * eventName: \"namespace:type:target\"\r\n */\r\nEventBusController.prototype.fire = async function (brick, eventName, payload) {\r\n  // Fire-and-forget; use fireAsync() if you need the final event object.\r\n  await this._run(brick, eventName, payload);\r\n};\r\n\r\n/**\r\n * Fire an event and get a Promise with the final event object\r\n * (to inspect cancel/errors/meta).\r\n */\r\nEventBusController.prototype.fireAsync = function (brick, eventName, payload) {\r\n  return this._run(brick, eventName, payload);\r\n};\r\n", "import ExtensionsRegistry from './extensionsRegistry.js';\r\nimport { mergeOptions } from '../utils/options.js';\r\n\r\nfunction parseForPattern(pattern) {\r\n  if (!pattern) return { ns: '', action: '', target: '*' };\r\n  const bits = String(pattern).split(':');\r\n  const ns = bits[0] || '';\r\n  const action = bits[1] || '';\r\n  let target = bits.length > 2 ? bits.slice(2).join(':') : '*';\r\n  if (!target) target = '*';\r\n  return { ns: ns, action: action, target: target };\r\n}\r\n\r\n/**\r\n * Extensions Controller (Global Singleton)\r\n */\r\nexport default function ExtensionsController() {\r\n  // No state here\r\n}\r\n\r\nfunction getRuntime() {\r\n  return (globalThis.VanillaBrick && globalThis.VanillaBrick.runtime) ? globalThis.VanillaBrick.runtime : null;\r\n}\r\n\r\n/**\r\n * Initialize extensions for a brick\r\n */\r\nExtensionsController.prototype.init = function (brick) {\r\n  if (!brick || !brick._runtime) return;\r\n  brick._runtime.extensions = {\r\n    map: {}, // Map of installed extensions { name: ctxExt }\r\n    destroyHook: false\r\n  };\r\n};\r\n\r\nExtensionsController.prototype.applyAll = function (brick) {\r\n  const registry = ExtensionsRegistry;\r\n  if (!registry || typeof registry.all !== 'function') return;\r\n\r\n  // Now registry returns a filtered, sorted, valid list\r\n  const defs = registry.all(brick) || [];\r\n\r\n  if (defs.length == 0) {\r\n    return;\r\n  }\r\n\r\n  const runtime = getRuntime();\r\n\r\n  // Ensure prototypes are baked (cached globally)\r\n  if (runtime) {\r\n    if (!runtime.prototypes) {\r\n      runtime.prototypes = {};\r\n    }\r\n    // Check if we need to bake prototypes for these defs\r\n    // We bake ALL returned defs just in case they are new\r\n    const baked = registry._bake(defs);\r\n    Object.assign(runtime.prototypes, baked);\r\n  }\r\n\r\n  // Phase 1: merge options before any init()\r\n  const optionsCtrl = brick._controllers && brick._controllers.options;\r\n\r\n  if (!mergeOptions || typeof mergeOptions !== 'function') {\r\n    console.error('mergeOptions is missing; cannot merge extension defaults safely');\r\n  } else if (optionsCtrl && typeof optionsCtrl.get === 'function') { // Check for .get instead of .all to be safe, or just existence\r\n    // Get current user options\r\n    const userOptions = (brick._runtime && brick._runtime.options) ? brick._runtime.options.data : {};\r\n    const kind = (brick.kind || '').toLowerCase();\r\n    const coreDefaults = [];\r\n    const extDefaults = [];\r\n\r\n    for (let i = 0; i < defs.length; i += 1) {\r\n      const def = defs[i];\r\n      const defOpts = def.ext.options || def.ext._options;\r\n      if (!defOpts) continue;\r\n      const defName = (def.ext.ns || def.name || '').toLowerCase();\r\n      if (defName && kind && defName === kind + '-core') {\r\n        coreDefaults.push(defOpts);\r\n      } else {\r\n        extDefaults.push(defOpts);\r\n      }\r\n    }\r\n\r\n    const mergedOptions = mergeOptions.apply(null, coreDefaults.concat(extDefaults, [userOptions]));\r\n\r\n    // Update brick options directly\r\n    if (brick._runtime && brick._runtime.options) {\r\n      brick._runtime.options.data = mergedOptions;\r\n      brick._runtime.options.cache = {};\r\n    }\r\n  }\r\n\r\n  // Phase 2: install + init extensions\r\n  for (let i = 0; i < defs.length; i += 1) {\r\n    this._install(brick, defs[i]);\r\n  }\r\n\r\n  this._ensureDestroyHook(brick);\r\n};\r\n\r\nExtensionsController.prototype._install = function (brick, def) {\r\n  const name = def.name || def.ext.ns || null;\r\n  const ns = def.ext.ns || name;\r\n\r\n  if (!name) {\r\n    console.warn('VanillaBrick extension without name/ns, skipped', def);\r\n    return;\r\n  }\r\n\r\n  const extState = (brick && brick._runtime) ? brick._runtime.extensions : null;\r\n  if (!extState) return;\r\n  if (extState.map[name]) return;\r\n\r\n  // Get baked prototypes if available\r\n  const runtime = getRuntime();\r\n  const protos = (runtime && runtime.prototypes) ? runtime.prototypes[name] : null;\r\n\r\n  let ctxExt;\r\n  if (protos && protos.ext) {\r\n    // Create extension context from prototype\r\n    ctxExt = Object.create(protos.ext);\r\n    // Assign specific instance properties\r\n    ctxExt.brick = brick;\r\n    ctxExt.ext = ctxExt; // self-ref for some legacy code patterns\r\n    ctxExt._ctx = ctxExt;\r\n  } else {\r\n    // Fallback creation\r\n    const ext = {\r\n      name: name,\r\n      def: def.ext,\r\n      brick: brick\r\n    };\r\n    ctxExt = Object.create(ext);\r\n    ctxExt.brick = brick;\r\n    ctxExt.ext = ext;\r\n    ctxExt._ctx = ctxExt;\r\n  }\r\n\r\n  // Inject Core APIs for context compatibility\r\n  // Many legacy extensions expect 'this.options' to refer to the brick's options API\r\n  Object.defineProperty(ctxExt, 'options', { value: brick.options, writable: false, enumerable: false, configurable: true });\r\n  Object.defineProperty(ctxExt, 'events', { value: brick.events, writable: false, enumerable: false, configurable: true });\r\n  Object.defineProperty(ctxExt, 'status', { value: brick.status, writable: false, enumerable: false, configurable: true });\r\n\r\n  // API Context (what 'this' refers to in API methods)\r\n  // Usually it mirrors ctxExt but for API mapping we might separate it conceptually\r\n  const ctxApi = ctxExt;\r\n\r\n  // Attach internal extension methods to ctxExt (if not using prototypes or just to be sure)\r\n  // If prototypes are used, these methods might already be on the prototype chain, \r\n  // but if they are closures defined in the extension object, we might need to bind/wrap them.\r\n  // Ideally, baked prototypes handle this. If NOT using baked prototypes, we do manual wrapping here.\r\n\r\n  if (!protos) {\r\n    // Manual internal method wrapping (Fallback)\r\n    if (def.ext.extension && typeof def.ext.extension === 'object') {\r\n      for (const k in def.ext.extension) {\r\n        if (!Object.prototype.hasOwnProperty.call(def.ext.extension, k)) continue;\r\n        const fn = def.ext.extension[k];\r\n        if (typeof fn === 'function') {\r\n          const meta = { type: 'extension-private', ext: name, brick: brick.id, fnName: k };\r\n          ctxExt[k] = function () {\r\n            const args = Array.prototype.slice.call(arguments);\r\n            if (runtime && typeof runtime.execute === 'function') {\r\n              return runtime.execute(fn, ctxExt, args, meta);\r\n            }\r\n            return fn.apply(ctxExt, args);\r\n          };\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Init hook\r\n  if (typeof def.ext.init === 'function') {\r\n    try {\r\n      let res;\r\n      if (runtime && typeof runtime.execute === 'function') {\r\n        res = runtime.execute(def.ext.init, ctxExt, [], {\r\n          type: 'init',\r\n          ext: name,\r\n          brick: brick.id,\r\n          fnName: 'init'\r\n        });\r\n      } else {\r\n        res = def.ext.init.call(ctxExt);\r\n      }\r\n      if (res === false) return;\r\n    } catch (err) {\r\n      console.error('VanillaBrick extension \"' + name + '\" init() failed', err);\r\n      return;\r\n    }\r\n  }\r\n\r\n  // Expose API on brick namespace\r\n  // This is the CRITICAL part for additive namespaces\r\n  if (def.ext.brick && typeof def.ext.brick === 'object') {\r\n    // Ensure namespace object exists\r\n    if (!brick[ns]) {\r\n      brick[ns] = { _extData: {} };\r\n    }\r\n\r\n    const nsObj = brick[ns];\r\n    if (!nsObj._extData) nsObj._extData = {}; // Safety check if brick[ns] was created by someone else\r\n\r\n    if (protos && protos.api) {\r\n      // Additive merge of baked prototypes\r\n      // The baked methods are generic wrappers that look up _extData[name]\r\n      Object.assign(nsObj, protos.api);\r\n\r\n      // Store the specific data for this extension instance so the generic wrapper can find it\r\n      nsObj._extData[name] = { ctx: ctxApi, fns: def.ext.brick, meta: {} };\r\n    } else {\r\n      // Manual Wrapping (Fallback)\r\n      for (const apiName in def.ext.brick) {\r\n        if (!Object.prototype.hasOwnProperty.call(def.ext.brick, apiName)) continue;\r\n        const apiFn = def.ext.brick[apiName];\r\n        if (typeof apiFn !== 'function') continue;\r\n\r\n        // Warn if overwriting? Ideally properly managed namespaces don't collide on method names\r\n        // if (nsObj[apiName]) console.warn(...)\r\n\r\n        const meta = { type: 'brick-api', ext: name, brick: brick.id, fnName: ns + '.' + apiName };\r\n        nsObj[apiName] = function () {\r\n          const args = Array.prototype.slice.call(arguments);\r\n          if (runtime && typeof runtime.execute === 'function') {\r\n            return runtime.execute(apiFn, ctxApi, args, meta);\r\n          }\r\n          return apiFn.apply(ctxApi, args);\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  // Register event listeners\r\n  if (Array.isArray(def.ext.events) && def.ext.events.length) {\r\n    // Check if events controller API is available on brick (it should be)\r\n    if (brick.events && typeof brick.events.on === 'function') {\r\n      for (let li = 0; li < def.ext.events.length; li += 1) {\r\n        const evt = def.ext.events[li];\r\n        if (!evt) continue;\r\n        const parsed = parseForPattern(evt.for);\r\n        const pattern = parsed.ns + ':' + parsed.action + ':' + parsed.target;\r\n\r\n        ['before', 'on', 'after'].forEach(function (phase) {\r\n          const desc = evt[phase];\r\n          if (!desc || typeof desc.fn !== 'function') return;\r\n\r\n          const pr = (typeof desc.priority === 'number') ? desc.priority : undefined;\r\n          const meta = {\r\n            type: 'event',\r\n            ext: name,\r\n            brick: brick.id,\r\n            event: pattern,\r\n            phase: phase,\r\n            fnName: desc.fn.name || 'anon'\r\n          };\r\n\r\n          // Handler must be bound to extension context\r\n          const handler = function (ev) {\r\n            const args = [ev];\r\n            if (runtime && typeof runtime.execute === 'function') {\r\n              return runtime.execute(desc.fn, ctxExt, args, meta);\r\n            }\r\n            return desc.fn.apply(ctxExt, args);\r\n          };\r\n\r\n          // Use the public or direct API? Direct if we have access, but public is fine too.\r\n          // Using direct call to controller is better inside controller logic\r\n          brick.events.on(pattern, phase, pr, handler, { ext: name, fn: desc.fn.name });\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  extState.map[name] = ctxExt;\r\n};\r\n\r\nExtensionsController.prototype._ensureDestroyHook = function (brick) {\r\n  const extState = (brick && brick._runtime) ? brick._runtime.extensions : null;\r\n  if (!extState) return;\r\n  if (extState.destroyHook) return;\r\n\r\n  if (!brick || !brick.events || typeof brick.events.on !== 'function') {\r\n    return;\r\n  }\r\n\r\n  extState.destroyHook = true;\r\n\r\n  brick.events.on(\r\n    'brick:status:destroyed',\r\n    'on',\r\n    0, // High priority\r\n    function () {\r\n      const runtime = getRuntime();\r\n\r\n      for (const name in extState.map) {\r\n        if (!Object.prototype.hasOwnProperty.call(extState.map, name)) continue;\r\n        const ctxExt = extState.map[name];\r\n        // The def is now inside _def if using prototypes, or def.ext if manual\r\n        // Our context creation put definition in `_def` for baked ones.\r\n        // Let's safe access it.\r\n        const def = (ctxExt._def) ? { destroy: ctxExt._def.destroy, ns: ctxExt._name } : (ctxExt.def || {}); // Fallback\r\n\r\n        if (typeof def.destroy === 'function') {\r\n          try {\r\n            if (runtime && typeof runtime.execute === 'function') {\r\n              runtime.execute(def.destroy, ctxExt, [], {\r\n                type: 'destroy',\r\n                ext: name,\r\n                brick: brick.id,\r\n                fnName: 'destroy'\r\n              });\r\n            } else {\r\n              def.destroy.call(ctxExt);\r\n            }\r\n          } catch (err) {\r\n            console.error('VanillaBrick extension \"' + name + '\" destroy() failed', err);\r\n          }\r\n        }\r\n      }\r\n      extState.map = {};\r\n    }\r\n  );\r\n};\r\n", "export function setupServices(VanillaBrick) {\r\n    // Ensure runtime services registry\r\n    VanillaBrick.runtime.services = VanillaBrick.runtime.services || {};\r\n\r\n    // Public accessor\r\n    VanillaBrick.service = function (name) {\r\n        // Check if running\r\n        if (VanillaBrick.runtime.services[name]) {\r\n            return VanillaBrick.runtime.services[name];\r\n        }\r\n        // Try to start\r\n        return VanillaBrick.base.serviceStart(name);\r\n    };\r\n\r\n    // Internal helpers in base\r\n    VanillaBrick.base.serviceStart = function (name) {\r\n        if (VanillaBrick.runtime.services[name]) {\r\n            return VanillaBrick.runtime.services[name];\r\n        }\r\n\r\n        const def = VanillaBrick.services[name];\r\n        if (!def) {\r\n            console.warn(\"Service definition not found:\", name);\r\n            return null;\r\n        }\r\n\r\n        const opts = Object.assign({}, def);\r\n        opts.id = name; // Service name as ID\r\n        opts.host = 'service';\r\n        opts.kind = opts.kind || 'service';\r\n\r\n        // Create brick instance\r\n        const brick = new VanillaBrick.brick(opts);\r\n\r\n        // Register instance\r\n        VanillaBrick.runtime.services[name] = brick;\r\n\r\n        if (VanillaBrick.runtime.bricks && Array.isArray(VanillaBrick.runtime.bricks)) {\r\n            VanillaBrick.runtime.bricks.push(brick);\r\n        }\r\n\r\n        return brick;\r\n    };\r\n\r\n    VanillaBrick.base.serviceStop = function (name) {\r\n        const service = VanillaBrick.runtime.services[name];\r\n        if (!service) return;\r\n\r\n        if (service.destroy) service.destroy();\r\n\r\n        delete VanillaBrick.runtime.services[name];\r\n    };\r\n}\r\n", "export function setupBootstrap(VanillaBrick) {\r\n  VanillaBrick.base = VanillaBrick.base || {};\r\n  VanillaBrick.configs = VanillaBrick.configs || {};\r\n\r\n  const registry = {\r\n    list: [],\r\n    byId: {},\r\n  };\r\n\r\n  function loadConfigs(scope) {\r\n    if (typeof document === 'undefined') return;\r\n    const root = scope || document;\r\n    if (!root.querySelectorAll) return;\r\n    const scripts = root.querySelectorAll('script[type=\"application/json\"][data-brick]');\r\n    for (let i = 0; i < scripts.length; i += 1) {\r\n      const node = scripts[i];\r\n      const raw = node.textContent || '';\r\n      if (!raw.trim()) continue;\r\n      try {\r\n        const parsed = JSON.parse(raw);\r\n        if (!parsed || typeof parsed !== 'object') continue;\r\n        for (const key in parsed) {\r\n          if (!Object.prototype.hasOwnProperty.call(parsed, key)) continue;\r\n          const base = (VanillaBrick.configs[key] && typeof VanillaBrick.configs[key] === 'object')\r\n            ? VanillaBrick.configs[key]\r\n            : {};\r\n          const next = parsed[key];\r\n          if (!next || typeof next !== 'object') continue;\r\n          VanillaBrick.configs[key] = Object.assign({}, base, next);\r\n        }\r\n      } catch (err) {\r\n        console.warn('VanillaBrick: invalid JSON in data-brick config', err);\r\n      }\r\n    }\r\n  }\r\n\r\n  function readKind(el) {\r\n    if (!el) return undefined;\r\n    // data-kind o data-brick-kind\r\n    const k =\r\n      el.getAttribute('brick-kind') ||\r\n      el.getAttribute('data-kind') ||\r\n      el.getAttribute('data-brick-kind') ||\r\n      (el.dataset && (el.dataset.kind || el.dataset.brickKind));\r\n    return k ? String(k).toLowerCase() : undefined;\r\n  }\r\n\r\n  function createBrickFromElement(el) {\r\n    if (!el) return null;\r\n\r\n    // Ja inicialitzat?\r\n    if (el.__brickInstance) return el.__brickInstance;\r\n\r\n    const opts = {};\r\n\r\n    const config = el.id && VanillaBrick.configs ? VanillaBrick.configs[el.id] : null;\r\n    if (config && typeof config === 'object') {\r\n      Object.assign(opts, config);\r\n    }\r\n\r\n    if (el.id) {\r\n      opts.id = el.id;\r\n    }\r\n\r\n    const kind = readKind(el);\r\n    if (kind) {\r\n      opts.kind = kind;\r\n    }\r\n\r\n    // NESTED: tot el que \u00E9s de DOM sota html.{}\r\n    opts.html = {\r\n      id: el.id || null,\r\n      element: el\r\n    };\r\n\r\n    const brick = new VanillaBrick.brick(opts);\r\n\r\n    el.__brickInstance = brick;\r\n    registry.list.push(brick);\r\n    registry.byId[brick.id] = brick;\r\n    console.log(\"Brick\", el.id, brick);\r\n    return brick;\r\n  }\r\n\r\n  function bootstrap(root) {\r\n    if (typeof document === 'undefined') return [];\r\n    const scope = root || document;\r\n    if (!scope.querySelectorAll) return [];\r\n\r\n    // Carrega tots els blocs de configuraci\u00F3 abans de crear bricks\r\n    loadConfigs(scope);\r\n\r\n    const nodes = scope.querySelectorAll('.vb');\r\n    const created = [];\r\n\r\n    for (let i = 0; i < nodes.length; i++) {\r\n      const brick = createBrickFromElement(nodes[i]);\r\n      if (brick) created.push(brick);\r\n    }\r\n\r\n    return created;\r\n  }\r\n\r\n  VanillaBrick.base.bootstrap = bootstrap;\r\n  VanillaBrick.runtime = VanillaBrick.runtime || {};\r\n  VanillaBrick.runtime.bricks = registry.list || [];\r\n  VanillaBrick.base.getBrick = function (id) {\r\n    return registry.byId[id] || null;\r\n  };\r\n\r\n  if (typeof document !== 'undefined') {\r\n    var bootstrapped = false;\r\n    function runOnce() {\r\n      if (bootstrapped) return;\r\n      bootstrapped = true;\r\n      bootstrap();\r\n    }\r\n\r\n    if (document.readyState === 'loading') {\r\n      document.addEventListener('DOMContentLoaded', function () {\r\n        runOnce();\r\n      });\r\n    } else {\r\n      // DOM ja llest: posposem al next tick per deixar executar scripts defer restants\r\n      setTimeout(runOnce, 0);\r\n    }\r\n  }\r\n}\r\n\r\n", "export const htmlCss = {\r\n  for: [{ host: 'brick', kind: '*' }],\r\n  requires: ['html'],\r\n  ns: 'css',\r\n  options: {},\r\n\r\n  brick: {\r\n    addClass: function (el, className) {\r\n      if (!el || !className) return;\r\n      if (el.classList && el.classList.add) {\r\n        el.classList.add(className);\r\n      } else {\r\n        const cur = el.className || '';\r\n        if ((' ' + cur + ' ').indexOf(' ' + className + ' ') === -1) {\r\n          el.className = (cur ? cur + ' ' : '') + className;\r\n        }\r\n      }\r\n    },\r\n    removeClass: function (el,className) {\r\n      if (!el || !className) return;\r\n      if (el.classList && el.classList.remove) {\r\n        el.classList.remove(className);\r\n      } else {\r\n        const cur = el.className || '';\r\n        el.className = (' ' + cur + ' ').replace(' ' + className + ' ', ' ').trim();\r\n      }\r\n    },\r\n    hasClass: function (el,className) {\r\n      if (!el || !className) return false;\r\n      if (el.classList && el.classList.contains) return el.classList.contains(className);\r\n      const cur = el.className || '';\r\n      return (' ' + cur + ' ').indexOf(' ' + className + ' ') !== -1;\r\n    },\r\n    toggleClass: function (el, className, force) {\r\n      if (!el || !className) return;\r\n      if (el.classList && typeof el.classList.toggle === 'function') {\r\n        if (typeof force === 'boolean') el.classList.toggle(className, force);\r\n        else el.classList.toggle(className);\r\n      } else {\r\n        const has = this.css.hasClass(className);\r\n        if (typeof force === 'boolean') {\r\n          if (force && !has) this.css.addClass(className);\r\n          if (!force && has) this.css.removeClass(className);\r\n        } else {\r\n          if (has) this.css.removeClass(className);\r\n          else this.css.addClass(className);\r\n        }\r\n      }\r\n    },\r\n    show: function (el) {\r\n      if (!el) return;\r\n      el.style.display = '';\r\n    },\r\n    hide: function (el) {\r\n      if (!el) return;\r\n      el.style.display = 'none';\r\n    },\r\n    setStyle: function (el,prop, value) {\r\n      if (!el || !prop) return;\r\n      el.style[prop] = value;\r\n    },\r\n    getStyle: function (el,prop) {\r\n      if (!el || !prop || typeof window === 'undefined' || !window.getComputedStyle) return null;\r\n      const cs = window.getComputedStyle(el);\r\n      return cs ? (cs.getPropertyValue(prop) || cs[prop]) : null;\r\n    },\r\n    setVar: function (el, name, value) {\r\n      if (!el || !name) return;\r\n      if (name.indexOf('--') !== 0) name = '--' + name;\r\n      el.style.setProperty(name, value);\r\n    },\r\n    getVar: function (el, name) {\r\n      if (!el || !name || typeof window === 'undefined' || !window.getComputedStyle) return null;\r\n      if (name.indexOf('--') !== 0) name = '--' + name;\r\n      const cs = window.getComputedStyle(el);\r\n      return cs ? cs.getPropertyValue(name) : null;\r\n    }\r\n  },\r\n\r\n  extension: {},\r\n  events: [],\r\n\r\n  init: function () {\r\n    if (!this.brick || !this.brick.html || typeof this.brick.html.element !== 'function') {\r\n      console.warn('VanillaBrick htmlCss requires html extension active', this.brick && this.brick.id);\r\n      return false;\r\n    }\r\n    const el = this.brick.html.element();\r\n    if (!el) {\r\n      console.warn('VanillaBrick htmlCss: no DOM element resolved', this.brick && this.brick.id);\r\n      return false;\r\n    }\r\n    return true;\r\n  },\r\n\r\n  destroy: function () { }\r\n};\r\n\r\n\r\nexport default htmlCss;\r\n\r\n", "export const htmlEvents = {\r\n  for: [{ host: 'brick', kind: '*' }],\r\n  requires: ['html'],\r\n  ns: 'html',\r\n  options: {},\r\n\r\n  brick: {\r\n    on: function (el, type, handler, options) {\r\n      if (!el || typeof el.addEventListener !== 'function' || typeof handler !== 'function') return;\r\n      el.addEventListener(type, handler, options);\r\n      let listeners = this.brick.options.get('html.listeners', []);\r\n      if (!Array.isArray(listeners)) listeners = [];\r\n      listeners.push({ el: el, type: type, handler: handler, options: options, source: 'api' });\r\n      this.brick.options.setSilent('html.listeners', listeners);\r\n    },\r\n    off: function (el, type, handler) {\r\n      if (!el || typeof el.removeEventListener !== \"function\") return;\r\n\r\n      const listeners = this.brick.options.get(\"html.listeners\", []);\r\n      if (!Array.isArray(listeners) || listeners.length === 0) return;\r\n\r\n      const hasType = typeof type === \"string\" && type.length > 0;\r\n      const hasHandler = typeof handler === \"function\";\r\n\r\n      for (let i = listeners.length - 1; i >= 0; i--) {\r\n        const ln = listeners[i];\r\n        if (!ln || ln.el !== el) continue;\r\n        if (hasType && ln.type !== type) continue;\r\n        if (hasHandler && ln.handler !== handler) continue;\r\n\r\n        // IMPORTANT: treu amb els options originals, no els que et passin ara\r\n        el.removeEventListener(ln.type, ln.handler, ln.options);\r\n        listeners.splice(i, 1);\r\n      }\r\n\r\n      this.brick.options.setSilent(\"html.listeners\", listeners);\r\n    }\r\n  },\r\n\r\n  extension: {},\r\n\r\n  events: [\r\n    {\r\n      for: 'brick:status:ready',\r\n      on: {\r\n        fn: function () {\r\n          const el = this.brick.html.element();\r\n          if (!el || typeof el.addEventListener !== 'function') return;\r\n          let listeners = this.brick.options.get(\"html.events.listeners\", []);\r\n          if (!Array.isArray(listeners)) listeners = [];\r\n          const self = this;\r\n          const defaultMap = [\r\n            { type: 'click', eventName: 'html:event:click' },\r\n            { type: 'mouseenter', eventName: 'html:event:mouseenter' },\r\n            { type: 'mouseleave', eventName: 'html:event:mouseleave' },\r\n            { type: 'mousedown', eventName: 'html:event:mousedown' },\r\n            { type: 'mouseup', eventName: 'html:event:mouseup' },\r\n          ];\r\n\r\n          for (let i = 0; i < defaultMap.length; i += 1) {\r\n            const entry = defaultMap[i];\r\n            const handler = function handler(domEvent) {\r\n              self.brick.events.fire(entry.eventName, {\r\n                domEvent: domEvent,\r\n                element: el,\r\n              });\r\n            };\r\n            this.brick.html.on(el,entry.type,handler);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'brick:status:destroyed',\r\n      before: {\r\n        fn: function () {\r\n          const el = this.brick && this.brick.html.element && this.brick.html.element();\r\n          if (!el || typeof el.removeEventListener !== 'function') return;\r\n          const listeners = this.brick.options.get(\"html.events.listeners\", []);\r\n          if (!Array.isArray(listeners)) return;\r\n          for (let i = 0; i < listeners.length; i += 1) {\r\n            const ln = listeners[i];\r\n            this.brick.html.off(el,ln.type,ln.handler,ln.options);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  ],\r\n\r\n  init: function () { },\r\n  destroy: function () { }\r\n};\r\n\r\n\r\nexport default htmlEvents;\r\n\r\n", "export const htmlRender = {\r\n  for: [{ host: 'brick', kind: '*' }],\r\n  requires: ['html'],\r\n  ns: 'html',\r\n  options: {},\r\n\r\n  brick: {\r\n    attr: function (el, key, value) {\r\n      if (!el) return el;\r\n\r\n      // Permet passar objecte: attr(el, { id:\"x\", title:\"y\" })\r\n      if (key && typeof key === \"object\") {\r\n        for (const k in key) attr(el, k, key[k]);\r\n        return el;\r\n      }\r\n\r\n      if (value === undefined || value === null || value === false) {\r\n        el.removeAttribute(key);\r\n        return el;\r\n      }\r\n\r\n      // boolean attribute (checked, disabled, readonly, etc.)\r\n      if (value === true) {\r\n        el.setAttribute(key, \"\");\r\n        return el;\r\n      }\r\n\r\n      el.setAttribute(key, String(value));\r\n      return el;\r\n    },\r\n    // Safe getters/creators\r\n    get: function (selectorOrTag, root) {\r\n      if (!selectorOrTag) return null;\r\n      if (root == null){\r\n        root = this.html && typeof this.html.element === 'function' ? this.html.element() : null;\r\n      }\r\n      if (!root || !root.querySelector) return null;\r\n      // If it's a tag name and root matches, return root\r\n      if (selectorOrTag.toLowerCase && root.tagName && selectorOrTag.toLowerCase() === root.tagName.toLowerCase()) {\r\n        return root;\r\n      }\r\n      return root.querySelector(selectorOrTag) || null;\r\n    },\r\n    create: function (tag, props) {\r\n      if (!tag || typeof document === 'undefined') return null;\r\n      const el = document.createElement(tag);\r\n      const cfg = props || {};\r\n      if (cfg.text !== undefined && cfg.text !== null) {\r\n        el.textContent = cfg.text;\r\n      }\r\n      if (cfg.html !== undefined && cfg.html !== null && this.html && typeof this.html.sanitize === 'function') {\r\n        el.innerHTML = this.html.sanitize(String(cfg.html));\r\n      }\r\n      if (cfg.attrs && typeof cfg.attrs === 'object') {\r\n        for (const k in cfg.attrs) {\r\n          if (Object.prototype.hasOwnProperty.call(cfg.attrs, k) && cfg.attrs[k] !== undefined) {\r\n            el.setAttribute(k, cfg.attrs[k]);\r\n          }\r\n        }\r\n      }\r\n      if (cfg.classList && Array.isArray(cfg.classList)) {\r\n        el.classList.add.apply(el.classList, cfg.classList);\r\n      }\r\n      if (cfg.dataset && typeof cfg.dataset === 'object') {\r\n        for (const k in cfg.dataset) {\r\n          if (Object.prototype.hasOwnProperty.call(cfg.dataset, k) && cfg.dataset[k] !== undefined) {\r\n            el.dataset[k] = cfg.dataset[k];\r\n          }\r\n        }\r\n      }\r\n      return el;\r\n    },\r\n    frag: function () {\r\n      return (typeof document !== 'undefined' && document.createDocumentFragment) ? document.createDocumentFragment() : null;\r\n    },\r\n    append: function (target, nodeOrFrag) {\r\n      if (!target || !nodeOrFrag || !target.appendChild) return;\r\n      target.appendChild(nodeOrFrag);\r\n    },\r\n    prepend: function (target, nodeOrFrag) {\r\n      if (!target || !nodeOrFrag || !target.insertBefore) return;\r\n      if (!target.firstChild) {\r\n        target.appendChild(nodeOrFrag);\r\n      } else {\r\n        target.insertBefore(nodeOrFrag, target.firstChild);\r\n      }\r\n    },\r\n    replace: function (target, nodeOrFrag) {\r\n      if (!target || !target.replaceChildren) return;\r\n      target.replaceChildren(nodeOrFrag);\r\n    },\r\n    clear: function (target) {\r\n      if (!target || !target.replaceChildren) return;\r\n      target.replaceChildren();\r\n    },\r\n    detach: function (el) {\r\n      if (!el) return el || null;\r\n      if (el.parentNode) {\r\n        el.parentNode.removeChild(el);\r\n      }\r\n      return el;\r\n    },\r\n    setSafe: function (el, htmlString) {\r\n      if (!el) return;\r\n      if (!htmlString) {\r\n        el.innerHTML = '';\r\n        return;\r\n      }\r\n      if (this.html && typeof this.html.sanitize === 'function') {\r\n        el.innerHTML = this.html.sanitize(String(htmlString));\r\n      } else {\r\n        el.textContent = String(htmlString);\r\n      }\r\n    },\r\n    sanitize: function (htmlString) {\r\n      if (!htmlString) return '';\r\n      // Simple sanitizer: strip scripts/inline handlers/javascript: URLs\r\n      if (typeof DOMParser === 'undefined') {\r\n        return String(htmlString).replace(/<script[\\s\\S]*?>[\\s\\S]*?<\\/script>/gi, '');\r\n      }\r\n      const parser = new DOMParser();\r\n      const doc = parser.parseFromString(String(htmlString), 'text/html');\r\n      const scripts = doc.querySelectorAll('script, style, iframe, object, embed');\r\n      scripts.forEach(function (node) { if (node && node.parentNode) node.parentNode.removeChild(node); });\r\n      const walker = doc.createTreeWalker(doc.body, NodeFilter.SHOW_ELEMENT, null);\r\n      while (walker.nextNode()) {\r\n        const node = walker.currentNode;\r\n        // Remove inline event handlers\r\n        const attrs = Array.prototype.slice.call(node.attributes || []);\r\n        for (let i = 0; i < attrs.length; i++) {\r\n          const a = attrs[i];\r\n          const name = a.name.toLowerCase();\r\n          const val = a.value || '';\r\n          if (name.startsWith('on')) {\r\n            node.removeAttribute(a.name);\r\n            continue;\r\n          }\r\n          if ((name === 'href' || name === 'src') && /^javascript:/i.test(val)) {\r\n            node.removeAttribute(a.name);\r\n          }\r\n        }\r\n      }\r\n      return doc.body.innerHTML || '';\r\n    },\r\n    // Render helpers\r\n    queueRender: function (fn) {\r\n      if (typeof fn !== 'function') return;\r\n      if (typeof requestAnimationFrame === 'function') {\r\n        requestAnimationFrame(fn);\r\n      } else {\r\n        setTimeout(fn, 0);\r\n      }\r\n    },\r\n    batch: function (items, chunkSize, renderChunk) {\r\n      const arr = Array.isArray(items) ? items : [];\r\n      const size = typeof chunkSize === 'number' && chunkSize > 0 ? chunkSize : 100;\r\n      const render = typeof renderChunk === 'function' ? renderChunk : null;\r\n      if (!render) return Promise.resolve();\r\n      let index = 0;\r\n      return new Promise((resolve) => {\r\n        const step = () => {\r\n          const slice = arr.slice(index, index + size);\r\n          if (slice.length) {\r\n            render(slice, index);\r\n            index += size;\r\n            this.queueRender(step.bind(this));\r\n          } else {\r\n            resolve();\r\n          }\r\n        };\r\n        step();\r\n      });\r\n    }\r\n  },\r\n\r\n  extension: {},\r\n  events: [],\r\n  init: function () { return true; },\r\n  destroy: function () { }\r\n};\r\n\r\nexport default htmlRender;\r\n", "export const html = {\r\n  for: [{ host: 'brick', kind: '*' }],\r\n  requires: [],\r\n  ns: 'html',\r\n  options: {},\r\n\r\n  brick: {\r\n    element: function () {\r\n      return this.options.get('html.element', null);\r\n    },\r\n    on: function (type, handler, options) {\r\n      const el = this.options.get('html.element', null);\r\n      if (!el || typeof el.addEventListener !== 'function' || typeof handler !== 'function') return;\r\n      el.addEventListener(type, handler, options);\r\n      let listeners = this.options.get('html.listeners', []);\r\n      if (!Array.isArray(listeners)) listeners = [];\r\n      listeners.push({ type: type, handler: handler, options: options, source: 'api' });\r\n      this.options.setSilent('html.listeners', listeners);\r\n    },\r\n    off: function (type, handler, options) {\r\n      const el = this.options.get('html.element', null);\r\n      if (!el || typeof el.removeEventListener !== 'function' || typeof handler !== 'function') return;\r\n      el.removeEventListener(type, handler, options);\r\n      const listeners = this.options.get('html.listeners', []);\r\n      if (!Array.isArray(listeners)) return;\r\n      for (let i = listeners.length - 1; i >= 0; i -= 1) {\r\n        const ln = listeners[i];\r\n        if (ln.type === type && ln.handler === handler) {\r\n          listeners.splice(i, 1);\r\n        }\r\n      }\r\n      this.options.setSilent('html.listeners', listeners);\r\n    }\r\n  },\r\n\r\n  extension: {\r\n    _resolveElement: function (value) {\r\n      if (!value) return null;\r\n      if (typeof Element !== 'undefined' && value instanceof Element) return value;\r\n      if (value && value.nodeType === 1) return value;\r\n      if (typeof value === 'function') {\r\n        try {\r\n          return value();\r\n        } catch (err) {\r\n          return null;\r\n        }\r\n      }\r\n      return null;\r\n    },\r\n    _resolveById: function (id) {\r\n      if (!id || typeof id !== 'string') return null;\r\n      if (typeof document === 'undefined') return null;\r\n      return document.getElementById(id) || null;\r\n    }\r\n  },\r\n\r\n  events: [],\r\n\r\n  init: function () {\r\n    if (!this.brick) return false;\r\n    const elemOpt = this.brick.options.get('html.element', null);\r\n    const idOpt = this.brick.options.get('html.id', null);\r\n\r\n    let el = this._resolveElement(elemOpt);\r\n    if (!el && idOpt) {\r\n      el = this._resolveById(idOpt);\r\n    }\r\n\r\n    if (!el) {\r\n      console.warn('VanillaBrick html extension requires a DOM element (options.html.element) or a valid options.html.id', this.brick.id);\r\n      return false;\r\n    }\r\n\r\n    if (elemOpt && !this._resolveElement(elemOpt)) {\r\n      console.warn('VanillaBrick html element must be a DOM node or factory, not an id. Use options.html.id to resolve by id.', this.brick.id);\r\n    }\r\n\r\n    this.brick.options.set('html.element', el);\r\n    return true;\r\n  },\r\n\r\n  destroy: function () {\r\n    const el = this.brick.options.get('html.element', null);\r\n    const listeners = this.brick.options.get('html.listeners', null);;\r\n    if (el && Array.isArray(listeners)) {\r\n      for (let i = 0; i < listeners.length; i += 1) {\r\n        const ln = listeners[i];\r\n        if (ln && ln.type && ln.handler) {\r\n          el.removeEventListener(ln.type, ln.handler, ln.options);\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\n\r\nexport default html;\r\n\r\n", "const DATA_SAMPLE_ROWS = [\n  { code: '1', name: 'one', key: 1 },\n  { code: '2', name: 'two', key: 2 },\n  { code: '3', name: 'three', key: 3 },\n  { code: '4', name: 'four', key: 4 },\n  { code: '5', name: 'five', key: 5 },\n  { code: '6', name: 'six', key: 6 },\n  { code: '7', name: 'seven', key: 7 },\n  { code: '8', name: 'eight', key: 8 },\n  { code: '9', name: 'nine', key: 9 },\n  { code: '10', name: 'ten', key: 10 },\n  { code: '11', name: 'eleven', key: 11 },\n  { code: '12', name: 'twelve', key: 12 },\n  { code: '13', name: 'thirteen', key: 13 },\n  { code: '14', name: 'fourteen', key: 14 },\n  { code: '15', name: 'fifteen', key: 15 },\n  { code: '16', name: 'sixteen', key: 16 },\n  { code: '17', name: 'seventeen', key: 17 },\n  { code: '18', name: 'eighteen', key: 18 },\n  { code: '19', name: 'nineteen', key: 19 },\n  { code: '20', name: 'twenty', key: 20 },\n  { code: '21', name: 'twenty-one', key: 21 },\n  { code: '22', name: 'twenty-two', key: 22 },\n  { code: '23', name: 'twenty-three', key: 23 },\n  { code: '24', name: 'twenty-four', key: 24 },\n  { code: '25', name: 'twenty-five', key: 25 },\n  { code: '26', name: 'twenty-six', key: 26 },\n  { code: '27', name: 'twenty-seven', key: 27 },\n  { code: '28', name: 'twenty-eight', key: 28 },\n  { code: '29', name: 'twenty-nine', key: 29 },\n  { code: '30', name: 'thirty', key: 30 },\n  { code: '31', name: 'thirty-one', key: 31 },\n  { code: '32', name: 'thirty-two', key: 32 },\n  { code: '33', name: 'thirty-three', key: 33 },\n  { code: '34', name: 'thirty-four', key: 34 },\n  { code: '35', name: 'thirty-five', key: 35 },\n  { code: '36', name: 'thirty-six', key: 36 },\n  { code: '37', name: 'thirty-seven', key: 37 },\n  { code: '38', name: 'thirty-eight', key: 38 },\n  { code: '39', name: 'thirty-nine', key: 39 },\n  { code: '40', name: 'forty', key: 40 },\n  { code: '41', name: 'forty-one', key: 41 },\n  { code: '42', name: 'forty-two', key: 42 },\n  { code: '43', name: 'forty-three', key: 43 },\n  { code: '44', name: 'forty-four', key: 44 },\n  { code: '45', name: 'forty-five', key: 45 },\n  { code: '46', name: 'forty-six', key: 46 },\n  { code: '47', name: 'forty-seven', key: 47 },\n  { code: '48', name: 'forty-eight', key: 48 },\n  { code: '49', name: 'forty-nine', key: 49 },\n  { code: '50', name: 'fifty', key: 50 },\n  { code: '51', name: 'fifty-one', key: 51 },\n  { code: '52', name: 'fifty-two', key: 52 },\n  { code: '53', name: 'fifty-three', key: 53 },\n  { code: '54', name: 'fifty-four', key: 54 },\n  { code: '55', name: 'fifty-five', key: 55 },\n  { code: '56', name: 'fifty-six', key: 56 },\n  { code: '57', name: 'fifty-seven', key: 57 },\n  { code: '58', name: 'fifty-eight', key: 58 },\n  { code: '59', name: 'fifty-nine', key: 59 },\n  { code: '60', name: 'sixty', key: 60 },\n  { code: '61', name: 'sixty-one', key: 61 },\n  { code: '62', name: 'sixty-two', key: 62 },\n  { code: '63', name: 'sixty-three', key: 63 },\n  { code: '64', name: 'sixty-four', key: 64 },\n  { code: '65', name: 'sixty-five', key: 65 },\n  { code: '66', name: 'sixty-six', key: 66 },\n  { code: '67', name: 'sixty-seven', key: 67 },\n  { code: '68', name: 'sixty-eight', key: 68 },\n  { code: '69', name: 'sixty-nine', key: 69 },\n  { code: '70', name: 'seventy', key: 70 },\n  { code: '71', name: 'seventy-one', key: 71 },\n  { code: '72', name: 'seventy-two', key: 72 },\n  { code: '73', name: 'seventy-three', key: 73 },\n  { code: '74', name: 'seventy-four', key: 74 },\n  { code: '75', name: 'seventy-five', key: 75 },\n  { code: '76', name: 'seventy-six', key: 76 },\n  { code: '77', name: 'seventy-seven', key: 77 },\n  { code: '78', name: 'seventy-eight', key: 78 },\n  { code: '79', name: 'seventy-nine', key: 79 },\n  { code: '80', name: 'eighty', key: 80 },\n  { code: '81', name: 'eighty-one', key: 81 },\n  { code: '82', name: 'eighty-two', key: 82 },\n  { code: '83', name: 'eighty-three', key: 83 },\n  { code: '84', name: 'eighty-four', key: 84 },\n  { code: '85', name: 'eighty-five', key: 85 },\n  { code: '86', name: 'eighty-six', key: 86 },\n  { code: '87', name: 'eighty-seven', key: 87 },\n  { code: '88', name: 'eighty-eight', key: 88 },\n  { code: '89', name: 'eighty-nine', key: 89 },\n  { code: '90', name: 'ninety', key: 90 },\n  { code: '91', name: 'ninety-one', key: 91 },\n  { code: '92', name: 'ninety-two', key: 92 },\n  { code: '93', name: 'ninety-three', key: 93 },\n  { code: '94', name: 'ninety-four', key: 94 },\n  { code: '95', name: 'ninety-five', key: 95 },\n  { code: '96', name: 'ninety-six', key: 96 },\n  { code: '97', name: 'ninety-seven', key: 97 },\n  { code: '98', name: 'ninety-eight', key: 98 },\n  { code: '99', name: 'ninety-nine', key: 99 },\n  { code: '100', name: 'one hundred', key: 100 },\n];\n\r\nexport const store = {\r\n  for: [\r\n    { host: 'brick', kind: 'form' },\r\n    { host: 'brick', kind: 'table' }\r\n  ],\r\n  requires: [],\r\n  ns: 'store',\r\n  options: {},\r\n\r\n  // API p\u00FAblica sobre el brick (this === brick)\r\n  brick: {\r\n    load: function () {\r\n      return this.brick.options.get('store.data', []);\r\n    },\r\n    set: function (data) {\r\n      if (data === null) return;\r\n      const previous = this.brick.options.get('store.data', []);\r\n      data = Array.isArray(data) ? data.slice() : [data];\r\n\r\n      this.brick.events.fire('store:data:set', {\r\n        previous: previous,\r\n        data: data\r\n      });\r\n\r\n      return data;\r\n    },\r\n    setAsync: async function (data) {\r\n      const previous = this.brick.options.get('store.data', []);\r\n      data = Array.isArray(data) ? data.slice() : [];\r\n\r\n      await this.brick.events.fireAsync('store:data:set', {\r\n        previous: previous,\r\n        data: data\r\n      });\r\n\r\n      return data;\r\n    },\r\n    all: function () {\r\n      return this.brick.store.load();\r\n    },\r\n    get: function (index) {\r\n      const arr = this.brick.store.load();\r\n      if (typeof index !== 'number') return null;\r\n      if (index < 0 || index >= arr.length) return null;\r\n      return arr[index];\r\n    }\r\n  },\r\n\r\n  // Helpers interns (this === ext)\r\n  extension: {\r\n    _normalizeArray: function (value, fallback) {\r\n      if (Array.isArray(value)) return value.slice();\r\n      return Array.isArray(fallback) ? fallback.slice() : [];\r\n    },\r\n    _sortRows: function (rows, field, dir, compareFn) {\r\n      const arr = Array.isArray(rows) ? rows.slice() : [];\r\n      const cmp = typeof compareFn === 'function'\r\n        ? function (a, b) { return compareFn(a, b, dir); }\r\n        : function (a, b) {\r\n          const va = a && Object.prototype.hasOwnProperty.call(a, field) ? a[field] : undefined;\r\n          const vb = b && Object.prototype.hasOwnProperty.call(b, field) ? b[field] : undefined;\r\n          let res = 0;\r\n          if (va === vb) res = 0;\r\n          else if (va === undefined || va === null) res = -1;\r\n          else if (vb === undefined || vb === null) res = 1;\r\n          else if (typeof va === 'number' && typeof vb === 'number') res = va - vb;\r\n          else res = String(va).localeCompare(String(vb));\r\n          return dir === 'desc' ? -res : res;\r\n        };\r\n      arr.sort(cmp);\r\n      return arr;\r\n    }\r\n  },\r\n\r\n  events: [\r\n    {\r\n      for: 'brick:status:ready',\r\n      on: {\r\n        fn: function (ev) {\r\n          //const storeData = this.brick.options.get('store:data', null);\r\n          const storeData = this._normalizeArray(DATA_SAMPLE_ROWS, []);\r\n          this.brick.options.setSilent('store.data', storeData);\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'store:data:set',\r\n      on: {\r\n        fn: function (ev) {\r\n          const payload = (ev && ev.data) || null;\r\n          const data = payload && payload.data ? payload.data : [];\r\n          this.brick.options.setSilent('store.data', data);\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'store:data:sort',\r\n      on: {\r\n        fn: function (ev) {\r\n          const payload = (ev && ev.data) || {};\r\n\r\n          const field = payload.field || null;\r\n          const dir = payload.dir || 'asc';\r\n\r\n          if (!field || !this.brick) return;\r\n          const sorted = this._sortRows(this.brick.store.load(), field, dir, payload.compare);\r\n          this.brick.options.setSilent(\"store.data\", sorted);\r\n          ev.field = field;\r\n          ev.dir = dir;\r\n          ev.data = sorted;\r\n        }\r\n      }\r\n    }\r\n  ],\r\n\r\n  init: function () { },\r\n\r\n  destroy: function () { }\r\n};\r\n\r\n\r\nexport default store;\r\n\r\n", "export const wire = {\r\n    for: [{ host: 'brick', kind: '*' }], // Available to all bricks\r\n    requires: [], // No strict requirements\r\n    ns: 'wire',\r\n    options: {},\r\n\r\n    brick: {\r\n        notify: function (eventName, data) {\r\n            //console.warn(\"WireClient > sending notify\", eventName, data);\r\n            //console.log(\"\\tfor event\", eventName);\r\n            //console.log(\"\\twith payload\", data);\r\n            if (!this.ext._service) this.ext._connect();\r\n            if (!this.ext._service) return; // Still no service?\r\n            this.ext._service.events.fire('wire:notify:out', {\r\n                from: this.brick.id,\r\n                event: eventName,\r\n                data: data\r\n            });\r\n        },\r\n        request: function (eventName, data) {\r\n            //console.warn(\"request\", eventName, data);\r\n            //console.log(\"this\", this);\r\n            if (!this.ext._service) this.ext._connect();\r\n            if (!this.ext._service) return; // Still no service?\r\n            //console.log(\"this.service\", this.ext._service);\r\n            this.ext._service.events.fire('wire:request:out', {\r\n                from: this.brick.id,\r\n                event: eventName,\r\n                data: data\r\n            });\r\n        },\r\n    },\r\n\r\n    extension: {\r\n        _service: null,\r\n\r\n        _connect: function () {\r\n\r\n            if (this.ext._service) return;\r\n\r\n            let wireKind = this.brick.options.get(\"wire\", null);\r\n            if (wireKind == null) return;\r\n\r\n            // Connect to WireService\r\n            if (globalThis.VanillaBrick && globalThis.VanillaBrick.service) {\r\n                this.ext._service = globalThis.VanillaBrick.service('WireService');\r\n            }\r\n\r\n            if (this.ext._service) {\r\n                this.ext._service.events.fire('wire:register:in', {\r\n                    brick: this.brick,\r\n                    options: this.brick.options.get(\"wire\", {})\r\n                });\r\n            } else {\r\n                console.warn('[Wire Client] No Wire Service found.', this.ext._service);\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    events: [\r\n        {\r\n            for: 'brick:status:ready',\r\n            on: {\r\n                fn: function () {\r\n                    this._connect();\r\n                }\r\n            }\r\n        },\r\n    ],\r\n\r\n    init: function () { },\r\n\r\n    destroy: function () { }\r\n};\r\n\r\n\r\nexport default wire;\r\n\r\n", "export const wireservice = {\r\n    for: [{ host: 'service', kind: 'wire' }], // Available to all bricks\r\n    requires: [], // No strict requirements\r\n    ns: 'wire',\r\n    options: {},\r\n\r\n    brick: {},\r\n    events: [\r\n        {\r\n            for: 'wire:notify:out',\r\n            on: {\r\n                fn: function (ev) {\r\n                    //console.warn(\"WireService > on wire:notify:out\", ev);\r\n\r\n                    const master = ev.data.from;\r\n                    //console.log(\"\\tfrom\", master);\r\n                    const evName = ev.data.event;\r\n                    //console.log(\"\\tevName\", evName);\r\n                    const evData = ev.data.data;\r\n                    //console.log(\"\\tevData\", evData);\r\n                    const slaves = this.ext._slaves[master];\r\n                    //console.log(\"\\tfor slaves\", slaves);\r\n                    if (slaves && slaves.length > 0) {\r\n                        for (let i = 0; i < slaves.length; i++) {\r\n                            //console.log(\"\\t- firing\", evName, \"in\", slaves[i].brick.id);\r\n                            slaves[i].brick.events.fire(evName, evData);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            for: 'wire:register:in',\r\n            on: {\r\n                fn: function (ev) {\r\n                    this.ext._register(ev.data);\r\n                }\r\n            }\r\n        },\r\n    ],\r\n    extension: {\r\n        _register: function (data) {\r\n            //console.warn(\"register\", data.brick, data.options, this);\r\n            if (data.options.master) {\r\n                if (this.ext._bricks == null) this.ext._bricks = {};\r\n                this.ext._bricks[data.brick.id] = data.brick;\r\n            }\r\n            if (data.options.slaveOf && data.options.slaveOf.length > 0) {\r\n                if (this.ext._masters == null) this.ext._masters = {};\r\n                if (this.ext._slaves == null) this.ext._slaves = {};\r\n                for (let i = 0; i < data.options.slaveOf.length; i++) {\r\n                    let master = this.ext._masters[data.brick.id];\r\n                    if (!master) {\r\n                        this.ext._masters[data.brick.id] = [];\r\n                    }\r\n                    this.ext._masters[data.brick.id].push({ id: data.options.slaveOf[i].id, kind: data.options.slaveOf[i].kind });\r\n\r\n                    let slave = this.ext._slaves[data.options.slaveOf[i].id];\r\n                    if (!slave) {\r\n                        this.ext._slaves[data.options.slaveOf[i].id] = [];\r\n                    }\r\n                    this.ext._slaves[data.options.slaveOf[i].id].push({ id: data.brick.id, kind: data.brick.kind, brick: data.brick });\r\n                }\r\n\r\n            }\r\n            //console.log(\"_bricks\", this.ext._bricks);\r\n            //console.log(\"_masters\", this.ext._masters);\r\n            //console.log(\"_slaves\", this.ext._slaves);\r\n        },\r\n    }\r\n}\r\n\r\n\r\nexport default wireservice;\r\n\r\n", "export const formItems = {\r\n    for: [{ host: 'brick', kind: 'form' }],\r\n    requires: ['html'],\r\n    ns: 'items',\r\n    options: {},\r\n\r\n    brick: {\r\n        get: function () {\r\n            return this.options.get('form.items', []);\r\n        }\r\n    },\r\n\r\n    extension: {\r\n        _parseFromDom: function () {\r\n            const root = this.brick.html.element();\r\n            if (!root) return [];\r\n\r\n            const items = [];\r\n            const groups = root.querySelectorAll('.vb-form-group');\r\n\r\n            for (let i = 0; i < groups.length; i++) {\r\n                const groupEl = groups[i];\r\n                const group = {\r\n                    type: 'group',\r\n                    items: []\r\n                };\r\n\r\n                // Check structure inside group\r\n                const fields = groupEl.querySelectorAll('.vb-form-field');\r\n                for (let j = 0; j < fields.length; j++) {\r\n                    const fieldEl = fields[j];\r\n                    const input = fieldEl.querySelector('input, select, textarea');\r\n                    const label = fieldEl.querySelector('label');\r\n\r\n                    if (input) {\r\n                        const fieldItem = {\r\n                            type: 'field',\r\n                            name: input.name || input.id,\r\n                            label: label ? label.textContent : '',\r\n                            controlType: input.tagName.toLowerCase(),\r\n                            inputType: input.type,\r\n                            required: input.required,\r\n                            placeholder: input.placeholder,\r\n                            // Detect span from parent column if exists\r\n                            span: this._detectSpan(fieldEl)\r\n                        };\r\n                        group.items.push(fieldItem);\r\n                    }\r\n                }\r\n                items.push(group);\r\n            }\r\n            return items;\r\n        },\r\n\r\n        _detectSpan: function (el) {\r\n            let current = el;\r\n            while (current && !current.classList.contains('vb-row')) {\r\n                if (current.className && typeof current.className === 'string') {\r\n                    const match = current.className.match(/vb-span-(\\d+)/);\r\n                    if (match) return parseInt(match[1], 10);\r\n                }\r\n                current = current.parentElement;\r\n                if (!current || current.tagName === 'FORM') break;\r\n            }\r\n            return 12; // Default full width\r\n        },\r\n\r\n        _render: function (items) {\r\n            const html = this.brick.html;\r\n            const root = html.element();\r\n            if (!root) return;\r\n\r\n            // Always clear existing content when rendering from items list\r\n            html.clear(root);\r\n\r\n            const frag = html.frag() || root.ownerDocument.createDocumentFragment();\r\n\r\n            for (let i = 0; i < items.length; i++) {\r\n                const item = items[i];\r\n                if (item.type !== 'group') continue;\r\n\r\n                const groupEl = html.create('div', { classList: ['vb-form-group'] });\r\n\r\n                const rowEl = html.create('div', { classList: ['vb-row'] });\r\n\r\n                if (item.items && item.items.length) {\r\n                    for (let j = 0; j < item.items.length; j++) {\r\n                        const field = item.items[j];\r\n                        const span = field.span || 12;\r\n                        const colEl = html.create('div', { classList: ['vb-span-' + span] });\r\n\r\n                        const fieldContainer = html.create('div', { classList: ['vb-form-field'] });\r\n\r\n                        if (field.label) {\r\n                            const label = html.create('label', { text: field.label });\r\n                            if (field.name) label.htmlFor = field.name;\r\n                            html.append(fieldContainer, label);\r\n                        }\r\n\r\n                        let input;\r\n                        if (field.controlType === 'textarea') {\r\n                            input = html.create('textarea');\r\n                        } else if (field.controlType === 'select') {\r\n                            input = html.create('select');\r\n                            // TODO: options\r\n                        } else {\r\n                            input = html.create('input');\r\n                            input.type = field.inputType || 'text';\r\n                        }\r\n\r\n                        if (field.name) {\r\n                            input.name = field.name;\r\n                            input.id = field.name;\r\n                        }\r\n                        if (field.placeholder) input.placeholder = field.placeholder;\r\n                        // handle required gracefully\r\n                        if (field.required === true || field.required === 'true' || field.required === 'required') {\r\n                            input.required = true;\r\n                        }\r\n\r\n                        html.append(fieldContainer, input);\r\n                        html.append(colEl, fieldContainer);\r\n                        html.append(rowEl, colEl);\r\n                    }\r\n                }\r\n\r\n                html.append(groupEl, rowEl);\r\n                html.append(frag, groupEl);\r\n            }\r\n\r\n            html.append(root, frag);\r\n\r\n            // Add Actions container if needed (can be separate config)\r\n        }\r\n    },\r\n\r\n    events: [\r\n        {\r\n            for: 'brick:status:ready',\r\n            before: {\r\n                fn: function (ev) {\r\n                    // Start fresh\r\n                    let items = [];\r\n                    // Check options first (programmatic)\r\n                    if (this.brick.options.has('form.items')) {\r\n                        items = this.brick.options.get('form.items');\r\n                    }\r\n\r\n                    if (!items || items.length === 0) {\r\n                        // Try to parse from global variable defined in attribute\r\n                        const root = this.brick.html.element();\r\n                        if (root) {\r\n                            const configVar = root.getAttribute('brick-form-items') || root.getAttribute('data-form-items');\r\n                            if (configVar && window[configVar]) {\r\n                                console.log('[Form Items] Config var found', configVar);\r\n                                items = window[configVar];\r\n                                this.brick.options.set('form.items', items);\r\n                            }\r\n                        }\r\n\r\n                        // if still no items, check if current DOM has any specific structure to parse\r\n                        // (only if we didn't just load them from var)\r\n                        if (!items || items.length === 0) {\r\n                            // Try to parse from DOM\r\n                            console.log('[Form Items] Parsing from DOM', this.brick.id);\r\n                            items = this._parseFromDom();\r\n                            this.brick.options.set('form.items', items);\r\n                        }\r\n                    } else {\r\n                        console.log('[Form Items] Config found in options', items);\r\n                    }\r\n\r\n                    // Helper to access data in on phase\r\n                    ev.data = ev.data || {};\r\n                    ev.data.formItems = items;\r\n                }\r\n            },\r\n            on: {\r\n                fn: function (ev) {\r\n                    const items = ev.data.formItems || this.brick.options.get('form.items');\r\n\r\n                    if (items && items.length > 0) {\r\n                        // We render if there are items. \r\n                        // Note: If we just parsed them from DOM, this will clear and re-render the same structure.\r\n                        // Ideally we check if we need to render.\r\n                        // But per requirements: \"Si li pasem un arbre d'items... tant \u00E9s el que hi hagi en el html/DOM. Ha d'haver-hi aquells. Si cal netejar el DOM i afegir els nous... es fa.\"\r\n\r\n                        // Optimization: if we just parsed it, re-rendering is redundant but safe. \r\n                        // To avoid infinite loop or weirdness, we could check a flag, but strict rendering ensures state == DOM.\r\n                        this._render(items);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    ],\r\n\r\n    init: function () {\r\n        return true;\r\n    },\r\n\r\n    destroy: function () {\r\n    }\r\n};\r\n\r\n\r\nexport default formItems;\r\n\r\n", "export const formRecord = {\r\n    for: [{ host: 'brick', kind: 'form' }],\r\n    requires: ['html', 'store'],\r\n    ns: 'record',\r\n    options: {},\r\n\r\n    brick: {\r\n        // We could expose methods to get/set the current record directly if needed\r\n        getRecord: function () {\r\n            const data = this.store.load();\r\n            return (data && data.length) ? data[0] : null;\r\n        }\r\n    },\r\n\r\n    extension: {\r\n        _bind: function (record) {\r\n            const root = this.brick.html.element();\r\n            if (!root) return;\r\n\r\n            // Iterate over all form fields\r\n            const inputs = root.querySelectorAll('input, select, textarea');\r\n            for (let i = 0; i < inputs.length; i++) {\r\n                const input = inputs[i];\r\n                const name = input.name || input.id;\r\n                if (!name) continue;\r\n\r\n                // If record has this field, set value\r\n                if (record && Object.prototype.hasOwnProperty.call(record, name)) {\r\n                    input.value = record[name];\r\n                } else {\r\n                    // Optional: clear if not in record? Or leave defaults?\r\n                    // Typically binding means reflecting state. If state is null, clear.\r\n                    // But if record doesn't have the key, maybe leave it?\r\n                    // Let's assume strict binding for now: if record is null, clear.\r\n                    if (!record) input.value = '';\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    events: [\r\n        {\r\n            for: 'brick:status:ready',\r\n            on: {\r\n                fn: function (ev) {\r\n                    const data = this.brick.store.load();\r\n                    if (data && data.length) {\r\n                        this._bind(data[0]);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            for: 'store:data:*',\r\n            after: {\r\n                fn: function (ev) {\r\n                    const data = this.brick.store.load();\r\n                    // We bind the first record\r\n                    const record = (data && data.length) ? data[0] : null;\r\n                    this._bind(record);\r\n                }\r\n            }\r\n        },\r\n        {\r\n            for: 'dom:row:focus',\r\n            after: {\r\n                fn: function (ev) {\r\n                    //console.warn(\"Form > master focused a row\", ev);\r\n                    const record = ev.data.row;\r\n                    //console.log(\"\\trecord\", record);\r\n                    // We bind the first record\r\n                    this._bind(record);\r\n                }\r\n            }\r\n        }\r\n    ],\r\n\r\n    init: function () {\r\n        return true;\r\n    },\r\n\r\n    destroy: function () {\r\n    }\r\n};\r\n\r\n\r\nexport default formRecord;\r\n\r\n", "export const form = {\r\n    for: [{ host: 'brick', kind: 'form' }],\r\n    requires: ['html'],\r\n    ns: 'form',\r\n    options: {\r\n        items:[],\r\n    },\r\n\r\n    brick: {\r\n        // Basic form component methods can be added here\r\n        submit: function () {\r\n            // Placeholder for submit logic\r\n            const el = this.dom.element();\r\n            if (el && typeof el.submit === 'function') el.submit();\r\n        },\r\n        reset: function () {\r\n            const el = this.dom.element();\r\n            if (el && typeof el.reset === 'function') el.reset();\r\n        }\r\n    },\r\n\r\n    extension: {\r\n        // Internal extension logic\r\n    },\r\n\r\n    events: [\r\n        // Basic lifecycle events\r\n        {\r\n            for: 'brick:status:ready',\r\n            on: {\r\n                fn: function () {\r\n                    // Initialization logic\r\n                }\r\n            }\r\n        }\r\n    ],\r\n\r\n    init: function () {\r\n        return true;\r\n    },\r\n\r\n    destroy: function () {\r\n    }\r\n};\r\n\r\n\r\nexport default form;\r\n\r\n", "export const statusBar = {\r\n    for: [{ host: 'brick', kind: 'status-bar' }],\r\n    requires: ['html'],\r\n    ns: 'statusBar',\r\n    events: [\r\n        {\r\n            for: 'dom:row:focus',\r\n            after: {\r\n                fn: function (ev) {\r\n                    const record = ev.data.row;\r\n                    const el = this.brick.html.element();\r\n                    if (el) {\r\n                        el.textContent = `Wire OK -> Selected: ${record.name}`;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    ],\r\n    init: function () {\r\n        const el = this.brick.html.element();\r\n        if (el) el.textContent = 'Wire status: Waiting for table...';\r\n    }\r\n};\r\n\r\nexport default statusBar;\r\n", "export const tableColumns = {\r\n  for: [{ host: 'brick', kind: 'table' }],\r\n  requires: ['html', 'store'],\r\n  ns: 'columns',\r\n\r\n  brick: {\r\n    get: function () {\r\n      return this.options.get(\"table.columns\", []);\r\n    },\r\n    sort: function (field, dir) {\r\n      const cols = this.brick.columns.get();\r\n      const colDef = cols.find(function (c) { return c && c.datafield === field; }) || {};\r\n      const state = this.options.get(\"table.sort\", { field: null, dir: null });\r\n      let nextDir = dir;\r\n      if (nextDir !== 'asc' && nextDir !== 'desc') {\r\n        nextDir = (state.field === field && state.dir === 'asc') ? 'desc' : 'asc';\r\n      }\r\n\r\n      this.events.fire('store:data:sort', {\r\n        field: field,\r\n        dir: nextDir,\r\n        compare: typeof colDef.sort === 'function' ? colDef.sort : null\r\n      });\r\n\r\n      return nextDir;\r\n    }\r\n  },\r\n\r\n  extension: {},\r\n\r\n  events: [\r\n    {\r\n      for: 'brick:status:ready',\r\n      on: {\r\n        fn: function (ev) {\r\n          const columns = this.brick.columns.get();\r\n          const html = this.brick.html;\r\n          const root = html.element && html.element();\r\n          if (!root) return;\r\n\r\n          const table = root.tagName && root.tagName.toLowerCase() === 'table'\r\n            ? root\r\n            : (html.get && html.get('table')) || (root.querySelector && root.querySelector('table'));\r\n          if (!table) return;\r\n\r\n          // Build thead in-memory; attach in 'after'\r\n          const thead = html.create('thead');\r\n          const row = thead.insertRow();\r\n          const brick = this.brick;\r\n\r\n          for (let i = 0; i < columns.length; i += 1) {\r\n            const col = columns[i] || {};\r\n            const th = html.create('th', { text: col.label || col.datafield || '' });\r\n            if (col.sortable && col.datafield) {\r\n              th.classList.add('vb-sortable');\r\n              html.on(th, 'click', (function (colDef) {\r\n                return function () {\r\n                  brick.columns.sort(colDef.datafield, null);\r\n                };\r\n              })(col));\r\n            }\r\n            html.append(row, th);\r\n          }\r\n\r\n          // Pass along to after phase\r\n          if (!ev.data) ev.data = {};\r\n          ev.data.table = table;\r\n          ev.data.thead = thead;\r\n        }\r\n      },\r\n      after: {\r\n        fn: function (ev) {\r\n          const html = this.brick.html;\r\n          const table = (ev && ev.data && ev.data.table) || (html.get && html.get('table')) || null;\r\n          const thead = ev && ev.data && ev.data.thead;\r\n          if (!table || !thead) return;\r\n\r\n          const existing = table.tHead || table.querySelector && table.querySelector('thead');\r\n          if (existing && existing !== thead && existing.parentNode === table) {\r\n            table.removeChild(existing);\r\n          }\r\n          table.insertBefore(thead, table.firstChild || null);\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'store:data:sort',\r\n      after: {\r\n        fn: function (ev) {\r\n          this.brick.options.setSilent(\"table.sort\", { field: ev.field, dir: ev.dir || 'asc' });\r\n        }\r\n      }\r\n    }\r\n  ],\r\n\r\n  init: function () { },\r\n\r\n  destroy: function () { },\r\n\r\n  options: {\r\n    table: {\r\n      columns: [\r\n        { datafield: 'code', label: 'Code', sortable: true },\r\n        { datafield: 'name', label: 'Name', sortable: true },\r\n        { datafield: 'key', label: 'Key', sortable: false },\r\n      ]\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\nexport default tableColumns;\r\n\r\n", "export const tableRowsFocused = {\r\n    for: [{ host: 'brick', kind: 'table' }],\r\n    requires: ['html', 'rows', 'store'],\r\n    ns: 'rowsFocused',\r\n    options: {},\r\n\r\n    brick: {},\r\n\r\n    extension: {\r\n       /* _addTabIndex: function () {\r\n            const el = this.brick.html.element();\r\n            if (!el) return;\r\n            const rows = el.querySelectorAll('tbody tr') || [];\r\n            for (let i = 0; i < rows.length; i++) {\r\n                const row = rows[i];\r\n                if (!row.hasAttribute('tabindex')) {\r\n                    row.setAttribute('tabindex', i);\r\n                }\r\n            }\r\n        },\r\n        _handleFocus: function (target) {\r\n            const el = this.brick.html.element();\r\n            if (!el) return;\r\n            const row = target.closest('tr');\r\n            if (!row) return;\r\n            const old = el.querySelector('tr.vb-focused');\r\n            if (old) old.classList.remove('vb-focused');\r\n            row.classList.add('vb-focused');\r\n            const rowIndex = Array.prototype.indexOf.call(row.parentNode.children, row);\r\n            const data = this.brick.store.get(rowIndex);\r\n            this.brick.events.fire('dom:row:focus', {\r\n                index: rowIndex,\r\n                row: data,\r\n                element: row\r\n            });\r\n        }*/\r\n    },\r\n\r\n    events: [\r\n            {\r\n                // Per-row render\r\n                for: 'table:row:render',\r\n                before:{\r\n                    fn: function(ev){\r\n                        const html = this.brick.html;\r\n                        const tr = ev.data.tr;\r\n                        html.off(tr,\"mousedown\");\r\n                    }\r\n                },\r\n                after:{\r\n                    fn: function(ev){\r\n                        const html = this.brick.html;\r\n                        const tr = ev.data.tr;\r\n                        html.on(tr,\"mousedown\",(e)=>{\r\n                           const root = this.brick.html.element(); // o la table/tbody si tens la ref\r\n                            root.querySelectorAll(\"tr.vb-focused\").forEach(el => {\r\n                                if (el !== tr) this.brick.css.removeClass(el, \"vb-focused\");\r\n                            });\r\n                            this.brick.css.addClass(tr, \"vb-focused\");\r\n                            this.brick.wire?.notify('dom:row:focus', {row:ev.data.row});\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n    ],\r\n\r\n    init: function () { },\r\n\r\n    destroy: function () { }\r\n};\r\n\r\nexport default tableRowsFocused;\r\n\r\n", "export const tableRows = {\r\n  for: [{ host: 'brick', kind: 'table' }],\r\n  requires: ['html', 'store', 'columns'],\r\n  ns: 'rows',\r\n  options: {},\r\n\r\n  brick: {\r\n    render: function () {\r\n      const html = this.brick.html;\r\n      const root = html.element();\r\n      if (!root) return;\r\n      const t0 = (typeof performance !== 'undefined' && performance.now) ? performance.now() : Date.now();\r\n\r\n      const rows = this.brick.store.load();\r\n      const columns = this.brick.columns.get();\r\n\r\n      this.brick.events.fire('table:rows:data', { rows: rows, columns: columns });\r\n\r\n      // Fire render pipeline\r\n      this.brick.events.fire('table:rows:render', { rows: rows, columns: columns });\r\n    }\r\n  },\r\n\r\n  extension: {},\r\n\r\n  events: [\r\n    {\r\n      for: 'brick:status:ready',\r\n      on: {\r\n        fn: function (ev) {\r\n          console.log(\"what happened?\", ev.event.name);\r\n          this.brick.rows.render();\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'store:data:*',\r\n      after: {\r\n        fn: function (ev) {\r\n          console.log(\"what happened?\", ev.event.name);\r\n          this.brick.rows.render();\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'table:rows:render',\r\n      before: {\r\n        priority:0,\r\n        fn:function(ev){\r\n          const t0 = (typeof performance !== 'undefined' && performance.now) ? performance.now() : Date.now();\r\n\r\n          const html = this.brick.html;\r\n          const items = this.brick.options.get(\"table.rows\") || {};\r\n          const rows = Array.isArray(ev.data.rows) ? ev.data.rows : this.brick.store.load();\r\n          const columns = Array.isArray(ev.data.columns) ? ev.data.columns : this.brick.columns.get();\r\n\r\n          for (let i = 0; i < rows.length; i++){\r\n            let item = items[rows[i].key];\r\n            if (item == null){\r\n              item = {};\r\n              items[rows[i].key] = item ;\r\n            }\r\n\r\n            item.row = rows[i];\r\n            let tr = item.tr || null;\r\n            if (tr == null){\r\n              tr = html.create('tr');\r\n              html.attr(tr,'for',item.row.key);\r\n              items[item.row.key].tr = tr;\r\n            }\r\n\r\n            for(c = 0; c < columns.length; c++){\r\n              let td = tr.children.length > 0 ? tr.children[c] : null;\r\n              if (td == null){\r\n                td = html.create('td');\r\n                html.append(tr,td);\r\n              }\r\n              html.attr(td,'for',columns[c].datafield);\r\n              html.setSafe(td,item.row[columns[c].datafield])\r\n            }\r\n            \r\n          }\r\n          this.brick.options.setSilent(\"table.rows\",items);\r\n          const t1 = (typeof performance !== 'undefined' && performance.now) ? performance.now() : Date.now();\r\n          const ms = Math.round(t1 - t0);\r\n          console.warn('data created in...', ms, 'ms');\r\n        }\r\n      }\r\n    },    \r\n    {\r\n      // Manage full rows render pipeline\r\n      for: 'table:rows:render',\r\n      before: {\r\n        fn: function (ev) {\r\n          const html = this.brick.html;\r\n          const root = html.element && html.element();\r\n          const items = this.brick.options.get(\"table.rows\");\r\n          const t0 = (typeof performance !== 'undefined' && performance.now) ? performance.now() : Date.now();\r\n\r\n          if (!root) return;\r\n          ev.data = ev.data || {};\r\n          ev.data.t0 = t0;\r\n          // Ensure rows/columns available to downstream phases\r\n          ev.data.items = items;\r\n          ev.data.rows = Array.isArray(ev.data.rows) ? ev.data.rows : this.brick.store.load();\r\n          ev.data.columns = Array.isArray(ev.data.columns) ? ev.data.columns : this.brick.columns.get();\r\n\r\n          const table = root.tagName && root.tagName.toLowerCase() === 'table'\r\n            ? root\r\n            : (html.get && html.get('table')) || (root.querySelector && root.querySelector('table'));\r\n          if (!table) return;\r\n\r\n          // Prepare old/new tbody and pool of existing trs\r\n          const tbody = html.detach(table.querySelector('tbody'));\r\n          for (i = tbody.children.length; i >= 0 ; i--){\r\n            html.detach(tbody.children[i]);\r\n          }\r\n\r\n          ev.data.table = table;\r\n          ev.data.tbody = tbody;\r\n        }\r\n      },\r\n      on: {\r\n        fn: function (ev) {\r\n          const data = ev.data || {};\r\n          const rows = Array.isArray(ev && ev.data && ev.data.rows) ? ev.data.rows : this.brick.store.load();\r\n          const columns = Array.isArray(ev && ev.data && ev.data.columns) ? ev.data.columns : this.brick.columns.get();\r\n          data.columns = columns;\r\n          data.rows = rows;\r\n          for (let i = 0; i < rows.length; i += 1) {\r\n            const item = ev.data.items[rows[i].key];\r\n            const rowData = rows[i] || {};\r\n            this.brick.events.fire('table:row:render', {\r\n              item: item,\r\n              row: rowData,\r\n              rowIndex: i,\r\n              tbody: ev.data.tbody,\r\n              columns: columns\r\n            });\r\n          }\r\n        }\r\n      },\r\n      after: {\r\n        fn: function (ev) {\r\n          const data = ev.data || {};\r\n          const html = this.brick.html;\r\n          const tbody = data.tbody;\r\n          if (!tbody) return;\r\n\r\n          // Append assembled fragment\r\n          /*if (data.frag) {\r\n            html.append(tbody, data.frag);\r\n          }*/\r\n          requestAnimationFrame(() => {\r\n                    html.append(data.table,tbody);\r\n          });\r\n\r\n          const t1 = (typeof performance !== 'undefined' && performance.now) ? performance.now() : Date.now();\r\n          const ms = Math.round(t1 - ev.data.t0);\r\n        console.warn('table rows pipeline time', ms, 'ms');\r\n          //html.append(data.table,tbody);\r\n        }\r\n      }\r\n    },\r\n    {\r\n      // Per-row render\r\n      for: 'table:row:render',\r\n      before: {\r\n        fn: function (ev) {\r\n          const html = this.brick.html;\r\n          const tr = ev.data.item.tr;\r\n          ev.data.tr = tr;\r\n        }\r\n      },\r\n      on: {\r\n        fn: function (ev) {\r\n          /*const html = this.brick.html;\r\n          const tr = ev.data.tr;\r\n          const row = ev.data.row || {};\r\n          const columns = ev.data.columns || [];\r\n          html.attr(tr,\"for\", row.key);\r\n          for (let c = 0; c < columns.length; c += 1) {\r\n            const col = columns[c] || {};\r\n            this.brick.events.fire('table:col:render', {\r\n              tr: tr,\r\n              tdIndex: c,\r\n              column: col,\r\n              row: row,\r\n              rowIndex: ev.data.rowIndex\r\n            });\r\n          }*/\r\n        }\r\n      },\r\n      after: {\r\n        fn: function (ev) {\r\n          const html = this.brick.html;\r\n          const tr = ev.data.tr;\r\n          const tbody = ev.data.tbody;\r\n          if (tbody && tr) {\r\n            html.append(tbody, tr);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    {\r\n      // Per-column render\r\n      for: 'table:col:render',\r\n      before: {\r\n        fn: function (ev) {\r\n          const html = this.brick.html;\r\n          const tr = ev.data.tr;\r\n          const column = ev.data.column;\r\n          const row = ev.data.row;\r\n          if (!tr) return;\r\n          let td = html.get('[for=\"' + column.datafield + '\"]',tr);\r\n          if (!td) {\r\n            td = html.create('td');\r\n            html.attr(td,'for',column.datafield);\r\n            html.append(tr, td);\r\n          }\r\n          html.setSafe(td,row[column.datafield]);\r\n          ev.data.td = td;\r\n        }\r\n      },\r\n      on: {\r\n        fn: function (ev) {\r\n          const td = ev.data.td;\r\n          const col = ev.data.column || {};\r\n          const row = ev.data.row || {};\r\n          const field = col.datafield;\r\n          const val = (field && Object.prototype.hasOwnProperty.call(row, field)) ? row[field] : '';\r\n          if (td) {\r\n            td.textContent = (val === undefined || val === null) ? '' : val;\r\n          }\r\n        }\r\n      },\r\n      after: {\r\n        fn: function () { }\r\n      }\r\n    }\r\n  ],\r\n\r\n  init: function () { },\r\n\r\n  destroy: function () { }\r\n};\r\n\r\nexport default tableRows;\r\n", "export const table = {\r\n  for: [{ host: 'brick', kind: 'table' }],\r\n  requires: ['html'],\r\n  ns: 'table',\r\n  options: {},\r\n\r\n  brick: {\r\n    refresh: function () {\r\n      if (this.__tableExt) this.__tableExt._refreshRows();\r\n    },\r\n    getSelection: function () {\r\n      const ext = this.__tableExt;\r\n      if (!ext) return { index: -1, row: null };\r\n      const idx = (typeof ext.selectedIndex === 'number') ? ext.selectedIndex : -1;\r\n      const row = (idx >= 0 && ext.rows && ext.rows[idx]) ? ext.rows[idx] : null;\r\n      return { index: idx, row: row };\r\n    },\r\n    clearSelection: function () {\r\n      if (this.__tableExt) this.__tableExt._setSelectedIndex(-1);\r\n    }\r\n  },\r\n\r\n  extension: {\r\n    table: null,\r\n    rows: [],\r\n    selectedIndex: -1,\r\n    _findTable: function () {\r\n      const root = this.brick.html && typeof this.brick.html.element === 'function'\r\n        ? this.brick.html.element()\r\n        : null;\r\n      if (!root || !root.querySelector) {\r\n        this.table = null;\r\n        return null;\r\n      }\r\n      const table =\r\n        root.querySelector('table.vb-table') ||\r\n        root.querySelector('table');\r\n      this.table = table || null;\r\n      return this.table;\r\n    },\r\n    _refreshRows: function () {\r\n      const table = this.table || this._findTable();\r\n      if (!table) {\r\n        this.rows = [];\r\n        this.selectedIndex = -1;\r\n        return;\r\n      }\r\n      const body = (table.tBodies && table.tBodies.length)\r\n        ? table.tBodies[0]\r\n        : table.querySelector('tbody');\r\n      const rows = body ? body.rows : table.rows;\r\n      this.rows = Array.prototype.slice.call(rows || []);\r\n      if (this.selectedIndex >= this.rows.length) {\r\n        this.selectedIndex = -1;\r\n      }\r\n    },\r\n    _setSelectedIndex: function (index) {\r\n      const rows = this.rows || [];\r\n      if (!rows.length) {\r\n        this.selectedIndex = -1;\r\n        return;\r\n      }\r\n      if (typeof index !== 'number' || index < 0 || index >= rows.length) {\r\n        index = -1;\r\n      }\r\n      for (let i = 0; i < rows.length; i += 1) {\r\n        const row = rows[i];\r\n        if (!row || !row.classList) continue;\r\n        if (i === index) row.classList.add('selected');\r\n        else row.classList.remove('selected');\r\n      }\r\n      this.selectedIndex = index;\r\n    }\r\n  },\r\n\r\n  events: [\r\n    {\r\n      for: 'brick:status:ready',\r\n      on: {\r\n        fn: function () {\r\n          this._findTable();\r\n          this._refreshRows();\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'dom:click:*',\r\n      on: {\r\n        fn: function (ev) {\r\n          const table = this.table || this._findTable();\r\n          if (!table) return;\r\n          if (!ev || !ev.data || !ev.data.domEvent) return;\r\n          const target = ev.data.domEvent.target;\r\n          if (!target) return;\r\n\r\n          let node = target;\r\n          let clickedRow = null;\r\n          while (node && node !== table) {\r\n            if (node.tagName && node.tagName.toLowerCase() === 'tr') {\r\n              clickedRow = node;\r\n              break;\r\n            }\r\n            node = node.parentNode;\r\n          }\r\n          if (!clickedRow) return;\r\n\r\n          this._refreshRows();\r\n          const rows = this.rows || [];\r\n          const index = rows.indexOf(clickedRow);\r\n          if (index === -1) return;\r\n          if (this.selectedIndex === index) this._setSelectedIndex(-1);\r\n          else this._setSelectedIndex(index);\r\n        }\r\n      }\r\n    }\r\n  ],\r\n\r\n  init: function () {\r\n    this.brick.__tableExt = this;\r\n    this.table = null;\r\n    this.rows = [];\r\n    this.selectedIndex = -1;\r\n    return true;\r\n  },\r\n\r\n  destroy: function () {\r\n    this.rows = [];\r\n    this.table = null;\r\n    this.selectedIndex = -1;\r\n    if (this.brick) {\r\n      delete this.brick.__tableExt;\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\n\r\n\r\nexport default table;\r\n\r\n", "const WireService = {\r\n    kind: 'wire',\r\n};\r\n\r\nexport default WireService;\r\n", "/**\n * AUTO-GENERATED MANIFEST\n * Do not edit manually. This file is generated by scripts/build.mjs\n */\nimport extensions_0 from './extensions/html-css.js';\nimport extensions_1 from './extensions/html-events.js';\nimport extensions_2 from './extensions/html-render.js';\nimport extensions_3 from './extensions/html.js';\nimport extensions_4 from './extensions/store.js';\nimport extensions_5 from './extensions/wire-client.js';\nimport extensions_6 from './extensions/wire-service.js';\nimport components_0 from './components/form-items.js';\nimport components_1 from './components/form-record.js';\nimport components_2 from './components/form.js';\nimport components_3 from './components/status-bar.js';\nimport components_4 from './components/table-columns.js';\nimport components_5 from './components/table-rows-focused.js';\nimport components_6 from './components/table-rows.js';\nimport components_7 from './components/table.js';\nimport services_0 from './services/wire.js';\n\nexport function registerBuiltins(VanillaBrick) {\n\n// Automatic registration\nif (extensions_0) {\n  VanillaBrick.extensions['htmlCss'] = extensions_0;\n}\nif (extensions_1) {\n  VanillaBrick.extensions['htmlEvents'] = extensions_1;\n}\nif (extensions_2) {\n  VanillaBrick.extensions['htmlRender'] = extensions_2;\n}\nif (extensions_3) {\n  VanillaBrick.extensions['html'] = extensions_3;\n}\nif (extensions_4) {\n  VanillaBrick.extensions['store'] = extensions_4;\n}\nif (extensions_5) {\n  VanillaBrick.extensions['wire'] = extensions_5;\n}\nif (extensions_6) {\n  VanillaBrick.extensions['wireservice'] = extensions_6;\n}\nif (components_0) {\n  VanillaBrick.extensions['formItems'] = components_0;\n}\nif (components_1) {\n  VanillaBrick.extensions['formRecord'] = components_1;\n}\nif (components_2) {\n  VanillaBrick.extensions['form'] = components_2;\n}\nif (components_3) {\n  VanillaBrick.extensions['statusBar'] = components_3;\n}\nif (components_4) {\n  VanillaBrick.extensions['tableColumns'] = components_4;\n}\nif (components_5) {\n  VanillaBrick.extensions['tableRowsFocused'] = components_5;\n}\nif (components_6) {\n  VanillaBrick.extensions['tableRows'] = components_6;\n}\nif (components_7) {\n  VanillaBrick.extensions['table'] = components_7;\n}\nVanillaBrick.services['WireService'] = services_0;\n\n}\n", "import Brick from './brick/brick.js';\r\nimport ExtensionsRegistry from './controllers/extensionsRegistry.js';\r\nimport RuntimeController from './controllers/runtimeController.js';\r\nimport StatusController from './controllers/statusController.js';\r\nimport OptionsController from './controllers/optionsController.js';\r\nimport EventBusController from './controllers/eventsController.js';\r\nimport ExtensionsController from './controllers/extensionsController.js';\r\nimport * as optionsUtils from './utils/options.js';\r\n\r\n// Startup Logic\r\nimport { setupServices } from './startup/services.js';\r\nimport { setupBootstrap } from './startup/bootstrap.js';\r\n\r\n// Auto-generated manifest (at build time)\r\nimport { registerBuiltins } from './_manifest.js';\r\n\r\nconst runtimeCtrl = new RuntimeController();\r\n\r\nconst VanillaBrick = {\r\n    brick: Brick,\r\n    registry: ExtensionsRegistry,\r\n    utils: optionsUtils,\r\n    extensions: {},\r\n    services: {},\r\n    configs: {},\r\n    runtime: runtimeCtrl, // Global execution motor\r\n    base: {}\r\n};\r\n\r\n// Internal reference for tracking\r\nVanillaBrick.runtime.bricks = [];\r\nVanillaBrick.runtime.services = {};\r\nVanillaBrick.runtime.prototypes = {};\r\nVanillaBrick.runtime.controllers = {\r\n    status: new StatusController(),\r\n    options: new OptionsController(),\r\n    events: new EventBusController(),\r\n    extensions: new ExtensionsController()\r\n};\r\n\r\n// 1. Expose to global for extensions to find it if needed\r\nglobalThis.VanillaBrick = VanillaBrick;\r\n\r\n// 2. Register all extensions, components and services from manifest\r\nregisterBuiltins(VanillaBrick);\r\n\r\n// 3. Wire up core systems\r\nsetupServices(VanillaBrick);\r\nsetupBootstrap(VanillaBrick);\r\n\r\nexport default VanillaBrick;\r\nexport { Brick };\r\n"],
  "mappings": "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",
  "names": ["i", "i", "i", "i", "VanillaBrick", "VanillaBrick", "i", "i", "handler", "i", "i", "i", "i", "html", "i", "c", "html", "table", "i", "html", "html", "i", "table", "table", "i", "VanillaBrick"]
}

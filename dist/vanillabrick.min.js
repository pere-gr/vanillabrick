(()=>{var Y=Object.defineProperty;var Q=Object.getOwnPropertySymbols;var rt=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable;var X=(t,e,n)=>e in t?Y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Z=(t,e)=>{for(var n in e||(e={}))rt.call(e,n)&&X(t,n,e[n]);if(Q)for(var n of Q(e))it.call(e,n)&&X(t,n,e[n]);return t};var st=(t,e)=>{for(var n in e)Y(t,n,{get:e[n],enumerable:!0})};function v(t){let e=t&&typeof t=="object"?Object.assign({},t):{};e.id=e.id||this._nextId(),e.host=(e.host||"brick").toLowerCase(),e.kind=(e.kind||"brick").toLowerCase(),Object.defineProperty(this,"id",{value:e.id,writable:!1,configurable:!1,enumerable:!0}),Object.defineProperty(this,"host",{value:e.host,writable:!1,configurable:!1,enumerable:!0}),Object.defineProperty(this,"kind",{value:e.kind,writable:!1,configurable:!1,enumerable:!0}),Object.defineProperty(this,"_runtime",{value:{},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(this,"_controllers",{value:globalThis.VanillaBrick.runtime.controllers,writable:!1,configurable:!1,enumerable:!1});let n=this,o=this._controllers;o.status&&o.status.init(n),o.options&&o.options.init(n,e),o.events&&o.events.init(n),o.extensions&&o.extensions.init(n),o.extensions&&o.extensions.applyAll(n),o.status&&o.status.set(n,"ready",{options:e})}v.prototype.destroy=function(){this._controllers.status.set(this,"destroyed"),this._runtime&&(this._runtime.status={},this._runtime.options={},this._runtime.events={},this._runtime.extensions={})};Object.defineProperty(v,"_idCounter",{value:0,writable:!0,configurable:!1,enumerable:!1});Object.defineProperty(v.prototype,"_nextId",{value:function(){return v._idCounter+=1,"brick-"+v._idCounter},writable:!1,configurable:!1,enumerable:!1});var ct={_cache:{},all:function(t){if(!t||typeof t!="object")return console.warn("ExtensionsRegistry.all() called without brick context"),[];let e=(t.host||"brick").toLowerCase(),n=(t.kind||"").toLowerCase();if(!n)return[];let o=e+"::"+n;if(this._cache[o])return this._cache[o];let r=globalThis.VanillaBrick&&globalThis.VanillaBrick.extensions||{},s={},l=new Set;function a(p){if(!p||typeof p!="object")return null;let m=(p.host||"brick").toLowerCase(),y=typeof p.kind=="string"?p.kind.toLowerCase():"";return y?{host:m,kind:y}:null}function u(p,m,y){if(!p)return!1;let x=p.host==="*"||p.host===m,g=p.kind==="*"||p.kind===y;return x&&g}for(let p in r){if(!Object.prototype.hasOwnProperty.call(r,p))continue;let m=r[p];if(!m||typeof m!="object"||l.has(m))continue;m._name||(m._name=m.ns||p);let y=m.for;if(!Array.isArray(y)||!y.length){console.warn("VanillaBrick extension without valid `for` array, skipped",m._name||p);continue}let x=!1;for(let g=0;g<y.length;g+=1){let O=a(y[g]);if(O&&u(O,e,n)){x=!0;break}}x&&(s[p]={name:p,ext:m},l.add(m))}let f=[],d={};function h(p){if(d[p]==="ok")return!0;if(d[p]==="visiting"||d[p]==="missing")return!1;let m=s[p];if(!m){for(let x in s)if(s[x].ext.ns===p){m=s[x];break}}if(!m)return d[p]="missing",!1;d[p]="visiting";let y=m.ext.requires||m.ext._requires;if(Array.isArray(y))for(let x=0;x<y.length;x++){let g=y[x];if(!h(g))return d[p]="missing",!1}return d[p]="ok",f.push(m),!0}for(let p in s)h(p);return this._cache[o]=f,f},_bake:function(t){let e={};for(let n=0;n<t.length;n++){let o=t[n],r=o.name||o.ext.ns,s={_name:r,_def:o.ext};if(o.ext.extension&&typeof o.ext.extension=="object")for(let a in o.ext.extension)typeof o.ext.extension[a]=="function"&&(s[a]=o.ext.extension[a]);let l={};if(o.ext.brick)for(let a in o.ext.brick)typeof o.ext.brick[a]=="function"&&function(u,f,d){l[u]=function(){let h=this._extData&&this._extData[d];if(!h){console.warn(`VanillaBrick: Extension data not found for ${d} in namespace API call ${u}`);return}let p=Array.prototype.slice.call(arguments),m=globalThis.VanillaBrick?globalThis.VanillaBrick.runtime:null;if(m&&typeof m.execute=="function"){let y={type:"brick-api",ext:d,brick:h.ctx.brick?h.ctx.brick.id:"unknown",fnName:u};return m.execute(f,h.ctx,p,y)}return f.apply(h.ctx,p)}}(a,o.ext.brick[a],r);e[r]={ext:s,api:l}}return e}},E=ct;function S(){}S.prototype.execute=function(t,e,n,o){"use strict";if(typeof t!="function"){let r=o&&o.brick||e&&e.brick&&e.brick.id||"unknown";console.warn(`[RuntimeController] Attempted to execute non-function for brick ${r}`,o);return}try{let r=t.apply(e,n);return r&&typeof r.then=="function"?r.catch(function(s){return this._handleError(s,t,e,o),Promise.reject(s)}.bind(this)):r}catch(r){throw this._handleError(r,t,e,o),r}};S.prototype._handleError=function(t,e,n,o){var r=n&&n.brick?n.brick:n;(!r||!r.id)&&o&&o.brick&&(r={id:o.brick});let s={error:t,message:t.message||String(t),stack:t.stack,meta:o||{},context:{brick:r&&r.id?r.id:null,kind:r&&r.kind?r.kind:null}};try{s.fnSource=e.toString()}catch(l){s.fnSource="[unable to capture source]"}console.error("[RuntimeController] Error executing developer code:",s)};function _(){}_.prototype.init=function(t){if(!t||!t._runtime)return;t._runtime.status={value:"initializing",listening:!0};let e=this;t.status={get:()=>e.get(t),set:(n,o)=>e.set(t,n,o),is:n=>e.is(t,n)}};_.prototype.get=function(t){return t&&t._runtime&&t._runtime.status?t._runtime.status.value:void 0};_.prototype.is=function(t,e){return!t||!t._runtime||!t._runtime.status?!1:t._runtime.status.value===e};_.prototype.set=function(t,e,n){if(!t||!t._runtime||!t._runtime.status)return;let o=t._runtime.status;if(!o.listening||o.value===e)return;let r=o.value;o.value=e,t.events&&(t.events.fire("brick:status:change",Z({from:r,to:e},n)),t.events.fire("brick:status:"+e,n)),e==="destroyed"&&(o.listening=!1)};var j={};st(j,{getOption:()=>L,mergeOptions:()=>C,setOption:()=>q});function C(){let t={};for(let e=0;e<arguments.length;e++){let n=arguments[e];if(!(!n||typeof n!="object"))for(let o in n){if(!Object.prototype.hasOwnProperty.call(n,o))continue;let r=n[o],s=t[o];r&&typeof r=="object"&&!Array.isArray(r)&&s&&typeof s=="object"&&!Array.isArray(s)?t[o]=C(s,r):t[o]=r}}return t}function L(t,e){if(!t||!e)return;if(!e.indexOf("."))return t[e];let n=e.split("."),o=t;for(let r=0;r<n.length;r++){if(o==null)return;o=o[n[r]]}return o}function q(t,e,n){if(!t||!e)return;let o=e.split("."),r=t;for(let s=0;s<o.length-1;s++){let l=o[s];(r[l]===void 0||r[l]===null)&&(r[l]={}),r=r[l]}r[o[o.length-1]]=n}function k(){}k.prototype.init=function(t,e){if(!t||!t._runtime)return;t._runtime.options={data:e||{},cache:{}};let n=this;t.options={get:function(o,r){return n.get(t,o,r)},set:function(o,r){return n.setSync(t,o,r),t},setAsync:async function(o,r){return await n.setAsync(t,o,r),t},has:function(o){return n.has(t,o)},all:function(){n.all(t)},setSilent:function(o,r){return n.setSilent(t,o,r),t}}};k.prototype.all=function(t){return t&&t._runtime&&t._runtime.options?t._runtime.options.data:{}};k.prototype.has=function(t,e){let n=t&&t._runtime&&t._runtime.options?t._runtime.options.data:{};return L(n,e)!==void 0};k.prototype.get=function(t,e,n){let o=t&&t._runtime?t._runtime.options:null;if(!o)return n;if(o.cache&&Object.prototype.hasOwnProperty.call(o.cache,e))return o.cache[e];let r=L(o.data,e),s=r===void 0?n:r;return o.cache&&(o.cache[e]=s),s};k.prototype.setSync=function(t,e,n){let o=t&&t._runtime?t._runtime.options:null;if(!o)return;let r=this.get(t,e);r!==n&&(q(o.data,e,n),o.cache={},t.events&&(t.events.fire("brick:option:changed",{key:e,value:n,oldValue:r}),t.events.fire("brick:option:changed:"+e,{value:n,oldValue:r})))};k.prototype.setSilent=function(t,e,n){let o=t&&t._runtime?t._runtime.options:null;o&&(q(o.data,e,n),o.cache={})};k.prototype.setAsync=async function(t,e,n){return this.setSync(t,e,n),Promise.resolve()};function b(){this.phases=["before","on","after"]}b.prototype.init=function(t){if(!t||!t._runtime)return;t._runtime.events={handlers:[],dispatchCache:{}};let e=this;t.events={on:function(n,o,r,s,l){return e.on(t,n,o,r,s,l),t},off:function(n,o,r){return e.off(t,n,o,r),t},fire:function(n,o){return e.fire(t,n,o),t},fireAsync:function(n,o){return e.fireAsync(t,n,o)}}};b.prototype._normalizePriority=function(t){let e=typeof t=="number"?t:5;return e<0&&(e=0),e>10&&(e=10),e};b.prototype._compilePattern=function(t){let e=(t||"").split(":"),n=e[0],o=e[1],r=e[2];return{namespace:!n||n==="*"?void 0:n,type:!o||o==="*"?void 0:o,target:!r||r==="*"?void 0:r}};b.prototype._parseEventKey=function(t){let e=(t||"").split(":");return{namespace:e[0]||"",type:e[1]||"",target:e[2]||""}};b.prototype._matches=function(t,e){return(t.namespace===void 0||t.namespace===e.namespace)&&(t.type===void 0||t.type===e.type)&&(t.target===void 0||t.target===e.target)};b.prototype._validateEventName=function(t){if(typeof t!="string")return console.error("[EventBus] Event name must be a string.",t),!1;let e=t.split(":");return e.length!==3?(console.error('[EventBus] Invalid event name format. Expected exactly "namespace:type:target" (3 segments). Got:',t),!1):!e[0]||e[0]==="*"||!e[1]||e[1]==="*"||!e[2]||e[2]==="*"?(console.error("[EventBus] Invalid event name for dispatch. Wildcards (*) and empty segments are not allowed in namespace, type, or target.",t),!1):!0};b.prototype._getHandlersForEvent=function(t,e,n){if(!t||!t._runtime||!t._runtime.events)return n?[]:{before:[],on:[],after:[]};let o=t._runtime.events,r;if(o.dispatchCache[e])r=o.dispatchCache[e];else{let s=this._parseEventKey(e);r={before:[],on:[],after:[]};for(let l=0;l<o.handlers.length;l+=1){let a=o.handlers[l];this._matches(a.compiled,s)&&r[a.phase]&&r[a.phase].push(a)}o.dispatchCache[e]=r}return n?r[n]||[]:r};b.prototype.on=function(t,e,n,o,r,s){if(typeof n=="function"?(s=r,r=n,n="on",o=void 0):typeof o=="function"&&typeof r!="function"&&(s=r,r=o,o=void 0),!r)return;let l=n||"on";this.phases.indexOf(l)===-1&&(l="on");let a=this._normalizePriority(o),u=t._runtime.events;u.handlers.push({pattern:e,compiled:this._compilePattern(e),phase:l,handler:r,priority:a,meta:s||null}),u.handlers.sort(function(f,d){let h=typeof f.priority=="number"?f.priority:5,p=typeof d.priority=="number"?d.priority:5;return h-p}),u.dispatchCache={}};b.prototype.off=function(t,e,n,o){if(!t||!t._runtime||!t._runtime.events)return;let r=t._runtime.events;for(let s=r.handlers.length-1;s>=0;s-=1){let l=r.handlers[s];e&&l.pattern!==e||n&&l.phase!==n||o&&l.handler!==o||r.handlers.splice(s,1)}r.dispatchCache={}};b.prototype._firePhase=async function(t,e,n,o){o.event.phase=e,o.stopPhase=!1;let r=this._getHandlersForEvent(t,n,e),s=globalThis.VanillaBrick?globalThis.VanillaBrick.runtime:null;for(let l=0;l<r.length&&!o.stopPhase;l+=1){let a=r[l],u=a.handler;try{let f;u&&typeof u=="object"&&typeof u.fn=="function"?s?f=s.execute(u.fn,u.ctx,[o],u.meta):f=u.fn.apply(u.ctx,[o]):typeof u=="function"&&(s?f=s.execute(u,{brick:t},[o],a.meta):f=u(o,{brick:t})),f&&typeof f.then=="function"&&await f}catch(f){console.error("Error in event handler execution:",f,{h:a,eventName:n,phase:e}),o.errors.push({error:f,phase:e,event:n}),o.cancel=!0}}return o};b.prototype._run=async function(t,e,n){if(!t||!t._runtime||!t._runtime.events)return{event:{name:e},errors:[{error:"Event system not initialized for this brick"}],cancel:!0};if(!this._validateEventName(e))return{event:{name:e},errors:[{error:"Invalid event name format or wildcards in dispatch"}],cancel:!0};let o=this._parseEventKey(e),r={brick:t||null,cancel:!1,data:n,errors:[],event:{phase:null,name:e,namespace:o.namespace,type:o.type,target:o.target},stopPhase:!1},s=this.phases;for(let l=0;l<s.length;l+=1){let a=s[l];a==="on"&&r.cancel||await this._firePhase(t,a,e,r)}return r};b.prototype.fire=async function(t,e,n){await this._run(t,e,n)};b.prototype.fireAsync=function(t,e,n){return this._run(t,e,n)};function at(t){if(!t)return{ns:"",action:"",target:"*"};let e=String(t).split(":"),n=e[0]||"",o=e[1]||"",r=e.length>2?e.slice(2).join(":"):"*";return r||(r="*"),{ns:n,action:o,target:r}}function A(){}function P(){return globalThis.VanillaBrick&&globalThis.VanillaBrick.runtime?globalThis.VanillaBrick.runtime:null}A.prototype.init=function(t){!t||!t._runtime||(t._runtime.extensions={map:{},destroyHook:!1})};A.prototype.applyAll=function(t){let e=E;if(!e||typeof e.all!="function")return;let n=e.all(t)||[];if(n.length==0)return;let o=P();if(o){o.prototypes||(o.prototypes={});let s=e._bake(n);Object.assign(o.prototypes,s)}let r=t._controllers&&t._controllers.options;if(!C||typeof C!="function")console.error("mergeOptions is missing; cannot merge extension defaults safely");else if(r&&typeof r.get=="function"){let s=t._runtime&&t._runtime.options?t._runtime.options.data:{},l=(t.kind||"").toLowerCase(),a=[],u=[];for(let d=0;d<n.length;d+=1){let h=n[d],p=h.ext.options||h.ext._options;if(!p)continue;let m=(h.ext.ns||h.name||"").toLowerCase();m&&l&&m===l+"-core"?a.push(p):u.push(p)}let f=C.apply(null,a.concat(u,[s]));t._runtime&&t._runtime.options&&(t._runtime.options.data=f,t._runtime.options.cache={})}for(let s=0;s<n.length;s+=1)this._install(t,n[s]);this._ensureDestroyHook(t)};A.prototype._install=function(t,e){let n=e.name||e.ext.ns||null,o=e.ext.ns||n;if(!n){console.warn("VanillaBrick extension without name/ns, skipped",e);return}let r=t&&t._runtime?t._runtime.extensions:null;if(!r||r.map[n])return;let s=P(),l=s&&s.prototypes?s.prototypes[n]:null,a;if(l&&l.ext)a=Object.create(l.ext),a.brick=t,a.ext=a,a._ctx=a;else{let f={name:n,def:e.ext,brick:t};a=Object.create(f),a.brick=t,a.ext=f,a._ctx=a}Object.defineProperty(a,"options",{value:t.options,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(a,"events",{value:t.events,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(a,"status",{value:t.status,writable:!1,enumerable:!1,configurable:!0});let u=a;if(!l&&e.ext.extension&&typeof e.ext.extension=="object")for(let f in e.ext.extension){if(!Object.prototype.hasOwnProperty.call(e.ext.extension,f))continue;let d=e.ext.extension[f];if(typeof d=="function"){let h={type:"extension-private",ext:n,brick:t.id,fnName:f};a[f]=function(){let p=Array.prototype.slice.call(arguments);return s&&typeof s.execute=="function"?s.execute(d,a,p,h):d.apply(a,p)}}}if(typeof e.ext.init=="function")try{let f;if(s&&typeof s.execute=="function"?f=s.execute(e.ext.init,a,[],{type:"init",ext:n,brick:t.id,fnName:"init"}):f=e.ext.init.call(a),f===!1)return}catch(f){console.error('VanillaBrick extension "'+n+'" init() failed',f);return}if(e.ext.brick&&typeof e.ext.brick=="object"){t[o]||(t[o]={_extData:{}});let f=t[o];if(f._extData||(f._extData={}),l&&l.api)Object.assign(f,l.api),f._extData[n]={ctx:u,fns:e.ext.brick,meta:{}};else for(let d in e.ext.brick){if(!Object.prototype.hasOwnProperty.call(e.ext.brick,d))continue;let h=e.ext.brick[d];if(typeof h!="function")continue;let p={type:"brick-api",ext:n,brick:t.id,fnName:o+"."+d};f[d]=function(){let m=Array.prototype.slice.call(arguments);return s&&typeof s.execute=="function"?s.execute(h,u,m,p):h.apply(u,m)}}}if(Array.isArray(e.ext.events)&&e.ext.events.length&&t.events&&typeof t.events.on=="function")for(let f=0;f<e.ext.events.length;f+=1){let d=e.ext.events[f];if(!d)continue;let h=at(d.for),p=h.ns+":"+h.action+":"+h.target;["before","on","after"].forEach(function(m){let y=d[m];if(!y||typeof y.fn!="function")return;let x=typeof y.priority=="number"?y.priority:void 0,g={type:"event",ext:n,brick:t.id,event:p,phase:m,fnName:y.fn.name||"anon"},O=function(ot){let G=[ot];return s&&typeof s.execute=="function"?s.execute(y.fn,a,G,g):y.fn.apply(a,G)};t.events.on(p,m,x,O,{ext:n,fn:y.fn.name})})}r.map[n]=a};A.prototype._ensureDestroyHook=function(t){let e=t&&t._runtime?t._runtime.extensions:null;e&&(e.destroyHook||!t||!t.events||typeof t.events.on!="function"||(e.destroyHook=!0,t.events.on("brick:status:destroyed","on",0,function(){let n=P();for(let o in e.map){if(!Object.prototype.hasOwnProperty.call(e.map,o))continue;let r=e.map[o],s=r._def?{destroy:r._def.destroy,ns:r._name}:r.def||{};if(typeof s.destroy=="function")try{n&&typeof n.execute=="function"?n.execute(s.destroy,r,[],{type:"destroy",ext:o,brick:t.id,fnName:"destroy"}):s.destroy.call(r)}catch(l){console.error('VanillaBrick extension "'+o+'" destroy() failed',l)}}e.map={}})))};function V(t){t.runtime.services=t.runtime.services||{},t.service=function(e){return t.runtime.services[e]?t.runtime.services[e]:t.base.serviceStart(e)},t.base.serviceStart=function(e){if(t.runtime.services[e])return t.runtime.services[e];let n=t.services[e];if(!n)return console.warn("Service definition not found:",e),null;let o=Object.assign({},n);o.id=e,o.host="service",o.kind=o.kind||"service";let r=new t.brick(o);return t.runtime.services[e]=r,t.runtime.bricks&&Array.isArray(t.runtime.bricks)&&t.runtime.bricks.push(r),r},t.base.serviceStop=function(e){let n=t.runtime.services[e];n&&(n.destroy&&n.destroy(),delete t.runtime.services[e])}}function tt(t){t.base=t.base||{},t.configs=t.configs||{};let e={list:[],byId:{}};function n(a){if(typeof document=="undefined")return;let u=a||document;if(!u.querySelectorAll)return;let f=u.querySelectorAll('script[type="application/json"][data-brick]');for(let d=0;d<f.length;d+=1){let p=f[d].textContent||"";if(p.trim())try{let m=JSON.parse(p);if(!m||typeof m!="object")continue;for(let y in m){if(!Object.prototype.hasOwnProperty.call(m,y))continue;let x=t.configs[y]&&typeof t.configs[y]=="object"?t.configs[y]:{},g=m[y];!g||typeof g!="object"||(t.configs[y]=Object.assign({},x,g))}}catch(m){console.warn("VanillaBrick: invalid JSON in data-brick config",m)}}}function o(a){if(!a)return;let u=a.getAttribute("brick-kind")||a.getAttribute("data-kind")||a.getAttribute("data-brick-kind")||a.dataset&&(a.dataset.kind||a.dataset.brickKind);return u?String(u).toLowerCase():void 0}function r(a){if(!a)return null;if(a.__brickInstance)return a.__brickInstance;let u={},f=a.id&&t.configs?t.configs[a.id]:null;f&&typeof f=="object"&&Object.assign(u,f),a.id&&(u.id=a.id);let d=o(a);d&&(u.kind=d),u.html={id:a.id||null,element:a};let h=new t.brick(u);return a.__brickInstance=h,e.list.push(h),e.byId[h.id]=h,console.log("Brick",a.id,h),h}function s(a){if(typeof document=="undefined")return[];let u=a||document;if(!u.querySelectorAll)return[];n(u);let f=u.querySelectorAll(".vb"),d=[];for(let h=0;h<f.length;h++){let p=r(f[h]);p&&d.push(p)}return d}if(t.base.bootstrap=s,t.runtime=t.runtime||{},t.runtime.bricks=e.list||[],t.base.getBrick=function(a){return e.byId[a]||null},typeof document!="undefined"){let a=function(){l||(l=!0,s())};var l=!1;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){a()}):setTimeout(a,0)}}var ft={for:[{host:"brick",kind:"*"}],requires:["html"],ns:"css",options:{},brick:{addClass:function(t,e){if(!(!t||!e))if(t.classList&&t.classList.add)t.classList.add(e);else{let n=t.className||"";(" "+n+" ").indexOf(" "+e+" ")===-1&&(t.className=(n?n+" ":"")+e)}},removeClass:function(t,e){if(!(!t||!e))if(t.classList&&t.classList.remove)t.classList.remove(e);else{let n=t.className||"";t.className=(" "+n+" ").replace(" "+e+" "," ").trim()}},hasClass:function(t,e){return!t||!e?!1:t.classList&&t.classList.contains?t.classList.contains(e):(" "+(t.className||"")+" ").indexOf(" "+e+" ")!==-1},toggleClass:function(t,e,n){if(!(!t||!e))if(t.classList&&typeof t.classList.toggle=="function")typeof n=="boolean"?t.classList.toggle(e,n):t.classList.toggle(e);else{let o=this.css.hasClass(e);typeof n=="boolean"?(n&&!o&&this.css.addClass(e),!n&&o&&this.css.removeClass(e)):o?this.css.removeClass(e):this.css.addClass(e)}},show:function(t){t&&(t.style.display="")},hide:function(t){t&&(t.style.display="none")},setStyle:function(t,e,n){!t||!e||(t.style[e]=n)},getStyle:function(t,e){if(!t||!e||typeof window=="undefined"||!window.getComputedStyle)return null;let n=window.getComputedStyle(t);return n?n.getPropertyValue(e)||n[e]:null},setVar:function(t,e,n){!t||!e||(e.indexOf("--")!==0&&(e="--"+e),t.style.setProperty(e,n))},getVar:function(t,e){if(!t||!e||typeof window=="undefined"||!window.getComputedStyle)return null;e.indexOf("--")!==0&&(e="--"+e);let n=window.getComputedStyle(t);return n?n.getPropertyValue(e):null}},extension:{},events:[],init:function(){return!this.brick||!this.brick.html||typeof this.brick.html.element!="function"?(console.warn("VanillaBrick htmlCss requires html extension active",this.brick&&this.brick.id),!1):this.brick.html.element()?!0:(console.warn("VanillaBrick htmlCss: no DOM element resolved",this.brick&&this.brick.id),!1)},destroy:function(){}},I=ft;var lt={for:[{host:"brick",kind:"*"}],requires:["html"],ns:"html",options:{},brick:{on:function(t,e,n,o){if(!t||typeof t.addEventListener!="function"||typeof n!="function")return;t.addEventListener(e,n,o);let r=this.brick.options.get("html.listeners",[]);Array.isArray(r)||(r=[]),r.push({el:t,type:e,handler:n,options:o,source:"api"}),this.brick.options.setSilent("html.listeners",r)},off:function(t,e,n){if(!t||typeof t.removeEventListener!="function")return;let o=this.brick.options.get("html.listeners",[]);if(!Array.isArray(o)||o.length===0)return;let r=typeof e=="string"&&e.length>0,s=typeof n=="function";for(let l=o.length-1;l>=0;l--){let a=o[l];!a||a.el!==t||r&&a.type!==e||s&&a.handler!==n||(t.removeEventListener(a.type,a.handler,a.options),o.splice(l,1))}this.brick.options.setSilent("html.listeners",o)}},extension:{},events:[{for:"brick:status:ready",on:{fn:function(){let t=this.brick.html.element();if(!t||typeof t.addEventListener!="function")return;let e=this.brick.options.get("html.events.listeners",[]);Array.isArray(e)||(e=[]);let n=this,o=[{type:"click",eventName:"html:event:click"},{type:"mouseenter",eventName:"html:event:mouseenter"},{type:"mouseleave",eventName:"html:event:mouseleave"},{type:"mousedown",eventName:"html:event:mousedown"},{type:"mouseup",eventName:"html:event:mouseup"}];for(let r=0;r<o.length;r+=1){let s=o[r],l=function(u){n.brick.events.fire(s.eventName,{domEvent:u,element:t})};this.brick.html.on(t,s.type,l)}}}},{for:"brick:status:destroyed",before:{fn:function(){let t=this.brick&&this.brick.html.element&&this.brick.html.element();if(!t||typeof t.removeEventListener!="function")return;let e=this.brick.options.get("html.events.listeners",[]);if(Array.isArray(e))for(let n=0;n<e.length;n+=1){let o=e[n];this.brick.html.off(t,o.type,o.handler,o.options)}}}}],init:function(){},destroy:function(){}},D=lt;var ut={for:[{host:"brick",kind:"*"}],requires:["html"],ns:"html",options:{},brick:{attr:function(t,e,n){if(!t)return t;if(e&&typeof e=="object"){for(let o in e)attr(t,o,e[o]);return t}return n==null||n===!1?(t.removeAttribute(e),t):n===!0?(t.setAttribute(e,""),t):(t.setAttribute(e,String(n)),t)},get:function(t,e){return!t||(e==null&&(e=this.html&&typeof this.html.element=="function"?this.html.element():null),!e||!e.querySelector)?null:t.toLowerCase&&e.tagName&&t.toLowerCase()===e.tagName.toLowerCase()?e:e.querySelector(t)||null},create:function(t,e){if(!t||typeof document=="undefined")return null;let n=document.createElement(t),o=e||{};if(o.text!==void 0&&o.text!==null&&(n.textContent=o.text),o.html!==void 0&&o.html!==null&&this.html&&typeof this.html.sanitize=="function"&&(n.innerHTML=this.html.sanitize(String(o.html))),o.attrs&&typeof o.attrs=="object")for(let r in o.attrs)Object.prototype.hasOwnProperty.call(o.attrs,r)&&o.attrs[r]!==void 0&&n.setAttribute(r,o.attrs[r]);if(o.classList&&Array.isArray(o.classList)&&n.classList.add.apply(n.classList,o.classList),o.dataset&&typeof o.dataset=="object")for(let r in o.dataset)Object.prototype.hasOwnProperty.call(o.dataset,r)&&o.dataset[r]!==void 0&&(n.dataset[r]=o.dataset[r]);return n},frag:function(){return typeof document!="undefined"&&document.createDocumentFragment?document.createDocumentFragment():null},append:function(t,e){!t||!e||!t.appendChild||t.appendChild(e)},prepend:function(t,e){!t||!e||!t.insertBefore||(t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e))},replace:function(t,e){!t||!t.replaceChildren||t.replaceChildren(e)},clear:function(t){!t||!t.replaceChildren||t.replaceChildren()},detach:function(t){return t?(t.parentNode&&t.parentNode.removeChild(t),t):t||null},setSafe:function(t,e){if(t){if(!e){t.innerHTML="";return}this.html&&typeof this.html.sanitize=="function"?t.innerHTML=this.html.sanitize(String(e)):t.textContent=String(e)}},sanitize:function(t){if(!t)return"";if(typeof DOMParser=="undefined")return String(t).replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gi,"");let n=new DOMParser().parseFromString(String(t),"text/html");n.querySelectorAll("script, style, iframe, object, embed").forEach(function(s){s&&s.parentNode&&s.parentNode.removeChild(s)});let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT,null);for(;r.nextNode();){let s=r.currentNode,l=Array.prototype.slice.call(s.attributes||[]);for(let a=0;a<l.length;a++){let u=l[a],f=u.name.toLowerCase(),d=u.value||"";if(f.startsWith("on")){s.removeAttribute(u.name);continue}(f==="href"||f==="src")&&/^javascript:/i.test(d)&&s.removeAttribute(u.name)}}return n.body.innerHTML||""},queueRender:function(t){typeof t=="function"&&(typeof requestAnimationFrame=="function"?requestAnimationFrame(t):setTimeout(t,0))},batch:function(t,e,n){let o=Array.isArray(t)?t:[],r=typeof e=="number"&&e>0?e:100,s=typeof n=="function"?n:null;if(!s)return Promise.resolve();let l=0;return new Promise(a=>{let u=()=>{let f=o.slice(l,l+r);f.length?(s(f,l),l+=r,this.queueRender(u.bind(this))):a()};u()})}},extension:{},events:[],init:function(){return!0},destroy:function(){}},R=ut;var dt={for:[{host:"brick",kind:"*"}],requires:[],ns:"html",options:{},brick:{element:function(){return this.options.get("html.element",null)},on:function(t,e,n){let o=this.options.get("html.element",null);if(!o||typeof o.addEventListener!="function"||typeof e!="function")return;o.addEventListener(t,e,n);let r=this.options.get("html.listeners",[]);Array.isArray(r)||(r=[]),r.push({type:t,handler:e,options:n,source:"api"}),this.options.setSilent("html.listeners",r)},off:function(t,e,n){let o=this.options.get("html.element",null);if(!o||typeof o.removeEventListener!="function"||typeof e!="function")return;o.removeEventListener(t,e,n);let r=this.options.get("html.listeners",[]);if(Array.isArray(r)){for(let s=r.length-1;s>=0;s-=1){let l=r[s];l.type===t&&l.handler===e&&r.splice(s,1)}this.options.setSilent("html.listeners",r)}}},extension:{_resolveElement:function(t){if(!t)return null;if(typeof Element!="undefined"&&t instanceof Element||t&&t.nodeType===1)return t;if(typeof t=="function")try{return t()}catch(e){return null}return null},_resolveById:function(t){return!t||typeof t!="string"||typeof document=="undefined"?null:document.getElementById(t)||null}},events:[],init:function(){if(!this.brick)return!1;let t=this.brick.options.get("html.element",null),e=this.brick.options.get("html.id",null),n=this._resolveElement(t);return!n&&e&&(n=this._resolveById(e)),n?(t&&!this._resolveElement(t)&&console.warn("VanillaBrick html element must be a DOM node or factory, not an id. Use options.html.id to resolve by id.",this.brick.id),this.brick.options.set("html.element",n),!0):(console.warn("VanillaBrick html extension requires a DOM element (options.html.element) or a valid options.html.id",this.brick.id),!1)},destroy:function(){let t=this.brick.options.get("html.element",null),e=this.brick.options.get("html.listeners",null);if(t&&Array.isArray(e))for(let n=0;n<e.length;n+=1){let o=e[n];o&&o.type&&o.handler&&t.removeEventListener(o.type,o.handler,o.options)}}},T=dt;var pt=[{code:"1",name:"one",key:1},{code:"2",name:"two",key:2},{code:"3",name:"three",key:3},{code:"4",name:"four",key:4},{code:"5",name:"five",key:5},{code:"6",name:"six",key:6},{code:"7",name:"seven",key:7},{code:"8",name:"eight",key:8},{code:"9",name:"nine",key:9},{code:"10",name:"ten",key:10},{code:"11",name:"eleven",key:11},{code:"12",name:"twelve",key:12},{code:"13",name:"thirteen",key:13},{code:"14",name:"fourteen",key:14},{code:"15",name:"fifteen",key:15},{code:"16",name:"sixteen",key:16},{code:"17",name:"seventeen",key:17},{code:"18",name:"eighteen",key:18},{code:"19",name:"nineteen",key:19},{code:"20",name:"twenty",key:20},{code:"21",name:"twenty-one",key:21},{code:"22",name:"twenty-two",key:22},{code:"23",name:"twenty-three",key:23},{code:"24",name:"twenty-four",key:24},{code:"25",name:"twenty-five",key:25},{code:"26",name:"twenty-six",key:26},{code:"27",name:"twenty-seven",key:27},{code:"28",name:"twenty-eight",key:28},{code:"29",name:"twenty-nine",key:29},{code:"30",name:"thirty",key:30},{code:"31",name:"thirty-one",key:31},{code:"32",name:"thirty-two",key:32},{code:"33",name:"thirty-three",key:33},{code:"34",name:"thirty-four",key:34},{code:"35",name:"thirty-five",key:35},{code:"36",name:"thirty-six",key:36},{code:"37",name:"thirty-seven",key:37},{code:"38",name:"thirty-eight",key:38},{code:"39",name:"thirty-nine",key:39},{code:"40",name:"forty",key:40},{code:"41",name:"forty-one",key:41},{code:"42",name:"forty-two",key:42},{code:"43",name:"forty-three",key:43},{code:"44",name:"forty-four",key:44},{code:"45",name:"forty-five",key:45},{code:"46",name:"forty-six",key:46},{code:"47",name:"forty-seven",key:47},{code:"48",name:"forty-eight",key:48},{code:"49",name:"forty-nine",key:49},{code:"50",name:"fifty",key:50},{code:"51",name:"fifty-one",key:51},{code:"52",name:"fifty-two",key:52},{code:"53",name:"fifty-three",key:53},{code:"54",name:"fifty-four",key:54},{code:"55",name:"fifty-five",key:55},{code:"56",name:"fifty-six",key:56},{code:"57",name:"fifty-seven",key:57},{code:"58",name:"fifty-eight",key:58},{code:"59",name:"fifty-nine",key:59},{code:"60",name:"sixty",key:60},{code:"61",name:"sixty-one",key:61},{code:"62",name:"sixty-two",key:62},{code:"63",name:"sixty-three",key:63},{code:"64",name:"sixty-four",key:64},{code:"65",name:"sixty-five",key:65},{code:"66",name:"sixty-six",key:66},{code:"67",name:"sixty-seven",key:67},{code:"68",name:"sixty-eight",key:68},{code:"69",name:"sixty-nine",key:69},{code:"70",name:"seventy",key:70},{code:"71",name:"seventy-one",key:71},{code:"72",name:"seventy-two",key:72},{code:"73",name:"seventy-three",key:73},{code:"74",name:"seventy-four",key:74},{code:"75",name:"seventy-five",key:75},{code:"76",name:"seventy-six",key:76},{code:"77",name:"seventy-seven",key:77},{code:"78",name:"seventy-eight",key:78},{code:"79",name:"seventy-nine",key:79},{code:"80",name:"eighty",key:80},{code:"81",name:"eighty-one",key:81},{code:"82",name:"eighty-two",key:82},{code:"83",name:"eighty-three",key:83},{code:"84",name:"eighty-four",key:84},{code:"85",name:"eighty-five",key:85},{code:"86",name:"eighty-six",key:86},{code:"87",name:"eighty-seven",key:87},{code:"88",name:"eighty-eight",key:88},{code:"89",name:"eighty-nine",key:89},{code:"90",name:"ninety",key:90},{code:"91",name:"ninety-one",key:91},{code:"92",name:"ninety-two",key:92},{code:"93",name:"ninety-three",key:93},{code:"94",name:"ninety-four",key:94},{code:"95",name:"ninety-five",key:95},{code:"96",name:"ninety-six",key:96},{code:"97",name:"ninety-seven",key:97},{code:"98",name:"ninety-eight",key:98},{code:"99",name:"ninety-nine",key:99},{code:"100",name:"one hundred",key:100}],mt={for:[{host:"brick",kind:"form"},{host:"brick",kind:"table"}],requires:[],ns:"store",options:{},brick:{load:function(){return this.brick.options.get("store.data",[])},set:function(t){if(t===null)return;let e=this.brick.options.get("store.data",[]);return t=Array.isArray(t)?t.slice():[t],this.brick.events.fire("store:data:set",{previous:e,data:t}),t},setAsync:async function(t){let e=this.brick.options.get("store.data",[]);return t=Array.isArray(t)?t.slice():[],await this.brick.events.fireAsync("store:data:set",{previous:e,data:t}),t},all:function(){return this.brick.store.load()},get:function(t){let e=this.brick.store.load();return typeof t!="number"||t<0||t>=e.length?null:e[t]}},extension:{_normalizeArray:function(t,e){return Array.isArray(t)?t.slice():Array.isArray(e)?e.slice():[]},_sortRows:function(t,e,n,o){let r=Array.isArray(t)?t.slice():[],s=typeof o=="function"?function(l,a){return o(l,a,n)}:function(l,a){let u=l&&Object.prototype.hasOwnProperty.call(l,e)?l[e]:void 0,f=a&&Object.prototype.hasOwnProperty.call(a,e)?a[e]:void 0,d=0;return u===f?d=0:u==null?d=-1:f==null?d=1:typeof u=="number"&&typeof f=="number"?d=u-f:d=String(u).localeCompare(String(f)),n==="desc"?-d:d};return r.sort(s),r}},events:[{for:"brick:status:ready",on:{fn:function(t){let e=this._normalizeArray(pt,[]);this.brick.options.setSilent("store.data",e)}}},{for:"store:data:set",on:{fn:function(t){let e=t&&t.data||null,n=e&&e.data?e.data:[];this.brick.options.setSilent("store.data",n)}}},{for:"store:data:sort",on:{fn:function(t){let e=t&&t.data||{},n=e.field||null,o=e.dir||"asc";if(!n||!this.brick)return;let r=this._sortRows(this.brick.store.load(),n,o,e.compare);this.brick.options.setSilent("store.data",r),t.field=n,t.dir=o,t.data=r}}}],init:function(){},destroy:function(){}},M=mt;var ht={for:[{host:"brick",kind:"*"}],requires:[],ns:"wire",options:{},brick:{notify:function(t,e){this.ext._service||this.ext._connect(),this.ext._service&&this.ext._service.events.fire("wire:notify:out",{from:this.brick.id,event:t,data:e})},request:function(t,e){this.ext._service||this.ext._connect(),this.ext._service&&this.ext._service.events.fire("wire:request:out",{from:this.brick.id,event:t,data:e})}},extension:{_service:null,_connect:function(){this.ext._service||this.brick.options.get("wire",null)==null||(globalThis.VanillaBrick&&globalThis.VanillaBrick.service&&(this.ext._service=globalThis.VanillaBrick.service("WireService")),this.ext._service?this.ext._service.events.fire("wire:register:in",{brick:this.brick,options:this.brick.options.get("wire",{})}):console.warn("[Wire Client] No Wire Service found.",this.ext._service))}},events:[{for:"brick:status:ready",on:{fn:function(){this._connect()}}}],init:function(){},destroy:function(){}},F=ht;var yt={for:[{host:"service",kind:"wire"}],requires:[],ns:"wire",options:{},brick:{},events:[{for:"wire:notify:out",on:{fn:function(t){let e=t.data.from,n=t.data.event,o=t.data.data,r=this.ext._slaves[e];if(r&&r.length>0)for(let s=0;s<r.length;s++)r[s].brick.events.fire(n,o)}}},{for:"wire:register:in",on:{fn:function(t){this.ext._register(t.data)}}}],extension:{_register:function(t){if(t.options.master&&(this.ext._bricks==null&&(this.ext._bricks={}),this.ext._bricks[t.brick.id]=t.brick),t.options.slaveOf&&t.options.slaveOf.length>0){this.ext._masters==null&&(this.ext._masters={}),this.ext._slaves==null&&(this.ext._slaves={});for(let e=0;e<t.options.slaveOf.length;e++)this.ext._masters[t.brick.id]||(this.ext._masters[t.brick.id]=[]),this.ext._masters[t.brick.id].push({id:t.options.slaveOf[e].id,kind:t.options.slaveOf[e].kind}),this.ext._slaves[t.options.slaveOf[e].id]||(this.ext._slaves[t.options.slaveOf[e].id]=[]),this.ext._slaves[t.options.slaveOf[e].id].push({id:t.brick.id,kind:t.brick.kind,brick:t.brick})}}}},N=yt;var bt={for:[{host:"brick",kind:"form"}],requires:["html"],ns:"items",options:{},brick:{get:function(){return this.options.get("form.items",[])}},extension:{_parseFromDom:function(){let t=this.brick.html.element();if(!t)return[];let e=[],n=t.querySelectorAll(".vb-form-group");for(let o=0;o<n.length;o++){let r=n[o],s={type:"group",items:[]},l=r.querySelectorAll(".vb-form-field");for(let a=0;a<l.length;a++){let u=l[a],f=u.querySelector("input, select, textarea"),d=u.querySelector("label");if(f){let h={type:"field",name:f.name||f.id,label:d?d.textContent:"",controlType:f.tagName.toLowerCase(),inputType:f.type,required:f.required,placeholder:f.placeholder,span:this._detectSpan(u)};s.items.push(h)}}e.push(s)}return e},_detectSpan:function(t){let e=t;for(;e&&!e.classList.contains("vb-row");){if(e.className&&typeof e.className=="string"){let n=e.className.match(/vb-span-(\d+)/);if(n)return parseInt(n[1],10)}if(e=e.parentElement,!e||e.tagName==="FORM")break}return 12},_render:function(t){let e=this.brick.html,n=e.element();if(!n)return;e.clear(n);let o=e.frag()||n.ownerDocument.createDocumentFragment();for(let r=0;r<t.length;r++){let s=t[r];if(s.type!=="group")continue;let l=e.create("div",{classList:["vb-form-group"]}),a=e.create("div",{classList:["vb-row"]});if(s.items&&s.items.length)for(let u=0;u<s.items.length;u++){let f=s.items[u],d=f.span||12,h=e.create("div",{classList:["vb-span-"+d]}),p=e.create("div",{classList:["vb-form-field"]});if(f.label){let y=e.create("label",{text:f.label});f.name&&(y.htmlFor=f.name),e.append(p,y)}let m;f.controlType==="textarea"?m=e.create("textarea"):f.controlType==="select"?m=e.create("select"):(m=e.create("input"),m.type=f.inputType||"text"),f.name&&(m.name=f.name,m.id=f.name),f.placeholder&&(m.placeholder=f.placeholder),(f.required===!0||f.required==="true"||f.required==="required")&&(m.required=!0),e.append(p,m),e.append(h,p),e.append(a,h)}e.append(l,a),e.append(o,l)}e.append(n,o)}},events:[{for:"brick:status:ready",before:{fn:function(t){let e=[];if(this.brick.options.has("form.items")&&(e=this.brick.options.get("form.items")),!e||e.length===0){let n=this.brick.html.element();if(n){let o=n.getAttribute("brick-form-items")||n.getAttribute("data-form-items");o&&window[o]&&(console.log("[Form Items] Config var found",o),e=window[o],this.brick.options.set("form.items",e))}(!e||e.length===0)&&(console.log("[Form Items] Parsing from DOM",this.brick.id),e=this._parseFromDom(),this.brick.options.set("form.items",e))}else console.log("[Form Items] Config found in options",e);t.data=t.data||{},t.data.formItems=e}},on:{fn:function(t){let e=t.data.formItems||this.brick.options.get("form.items");e&&e.length>0&&this._render(e)}}}],init:function(){return!0},destroy:function(){}},H=bt;var xt={for:[{host:"brick",kind:"form"}],requires:["html","store"],ns:"record",options:{},brick:{getRecord:function(){let t=this.store.load();return t&&t.length?t[0]:null}},extension:{_bind:function(t){let e=this.brick.html.element();if(!e)return;let n=e.querySelectorAll("input, select, textarea");for(let o=0;o<n.length;o++){let r=n[o],s=r.name||r.id;s&&(t&&Object.prototype.hasOwnProperty.call(t,s)?r.value=t[s]:t||(r.value=""))}}},events:[{for:"brick:status:ready",on:{fn:function(t){let e=this.brick.store.load();e&&e.length&&this._bind(e[0])}}},{for:"store:data:*",after:{fn:function(t){let e=this.brick.store.load(),n=e&&e.length?e[0]:null;this._bind(n)}}},{for:"dom:row:focus",after:{fn:function(t){let e=t.data.row;this._bind(e)}}}],init:function(){return!0},destroy:function(){}},W=xt;var gt={for:[{host:"brick",kind:"form"}],requires:["html"],ns:"form",options:{items:[]},brick:{submit:function(){let t=this.dom.element();t&&typeof t.submit=="function"&&t.submit()},reset:function(){let t=this.dom.element();t&&typeof t.reset=="function"&&t.reset()}},extension:{},events:[{for:"brick:status:ready",on:{fn:function(){}}}],init:function(){return!0},destroy:function(){}},z=gt;var kt={for:[{host:"brick",kind:"status-bar"}],requires:["html"],ns:"statusBar",events:[{for:"dom:row:focus",after:{fn:function(t){let e=t.data.row,n=this.brick.html.element();n&&(n.textContent=`Wire OK -> Selected: ${e.name}`)}}}],init:function(){let t=this.brick.html.element();t&&(t.textContent="Wire status: Waiting for table...")}},K=kt;var wt={for:[{host:"brick",kind:"table"}],requires:["html","store"],ns:"columns",brick:{get:function(){return this.options.get("table.columns",[])},sort:function(t,e){let o=this.brick.columns.get().find(function(l){return l&&l.datafield===t})||{},r=this.options.get("table.sort",{field:null,dir:null}),s=e;return s!=="asc"&&s!=="desc"&&(s=r.field===t&&r.dir==="asc"?"desc":"asc"),this.events.fire("store:data:sort",{field:t,dir:s,compare:typeof o.sort=="function"?o.sort:null}),s}},extension:{},events:[{for:"brick:status:ready",on:{fn:function(t){let e=this.brick.columns.get(),n=this.brick.html,o=n.element&&n.element();if(!o)return;let r=o.tagName&&o.tagName.toLowerCase()==="table"?o:n.get&&n.get("table")||o.querySelector&&o.querySelector("table");if(!r)return;let s=n.create("thead"),l=s.insertRow(),a=this.brick;for(let u=0;u<e.length;u+=1){let f=e[u]||{},d=n.create("th",{text:f.label||f.datafield||""});f.sortable&&f.datafield&&(d.classList.add("vb-sortable"),n.on(d,"click",function(h){return function(){a.columns.sort(h.datafield,null)}}(f))),n.append(l,d)}t.data||(t.data={}),t.data.table=r,t.data.thead=s}},after:{fn:function(t){let e=this.brick.html,n=t&&t.data&&t.data.table||e.get&&e.get("table")||null,o=t&&t.data&&t.data.thead;if(!n||!o)return;let r=n.tHead||n.querySelector&&n.querySelector("thead");r&&r!==o&&r.parentNode===n&&n.removeChild(r),n.insertBefore(o,n.firstChild||null)}}},{for:"store:data:sort",after:{fn:function(t){this.brick.options.setSilent("table.sort",{field:t.field,dir:t.dir||"asc"})}}}],init:function(){},destroy:function(){},options:{table:{columns:[{datafield:"code",label:"Code",sortable:!0},{datafield:"name",label:"Name",sortable:!0},{datafield:"key",label:"Key",sortable:!1}]}}},B=wt;var vt={for:[{host:"brick",kind:"table"}],requires:["html","rows","store"],ns:"rowsFocused",options:{},brick:{},extension:{},events:[{for:"table:row:render",before:{fn:function(t){let e=this.brick.html,n=t.data.tr;e.off(n,"mousedown")}},after:{fn:function(t){let e=this.brick.html,n=t.data.tr;e.on(n,"mousedown",o=>{var s;this.brick.html.element().querySelectorAll("tr.vb-focused").forEach(l=>{l!==n&&this.brick.css.removeClass(l,"vb-focused")}),this.brick.css.addClass(n,"vb-focused"),(s=this.brick.wire)==null||s.notify("dom:row:focus",{row:t.data.row})})}}}],init:function(){},destroy:function(){}},$=vt;var _t={for:[{host:"brick",kind:"table"}],requires:["html","store","columns"],ns:"rows",options:{},brick:{render:function(){if(!this.brick.html.element())return;let n=typeof performance!="undefined"&&performance.now?performance.now():Date.now(),o=this.brick.store.load(),r=this.brick.columns.get();this.brick.events.fire("table:rows:data",{rows:o,columns:r}),this.brick.events.fire("table:rows:render",{rows:o,columns:r})}},extension:{},events:[{for:"brick:status:ready",on:{fn:function(t){console.log("what happened?",t.event.name),this.brick.rows.render()}}},{for:"store:data:*",after:{fn:function(t){console.log("what happened?",t.event.name),this.brick.rows.render()}}},{for:"table:rows:render",before:{priority:0,fn:function(t){let e=typeof performance!="undefined"&&performance.now?performance.now():Date.now(),n=this.brick.html,o=this.brick.options.get("table.rows")||{},r=Array.isArray(t.data.rows)?t.data.rows:this.brick.store.load(),s=Array.isArray(t.data.columns)?t.data.columns:this.brick.columns.get();for(let u=0;u<r.length;u++){let f=o[r[u].key];f==null&&(f={},o[r[u].key]=f),f.row=r[u];let d=f.tr||null;for(d==null&&(d=n.create("tr"),n.attr(d,"for",f.row.key),o[f.row.key].tr=d),c=0;c<s.length;c++){let h=d.children.length>0?d.children[c]:null;h==null&&(h=n.create("td"),n.append(d,h)),n.attr(h,"for",s[c].datafield),n.setSafe(h,f.row[s[c].datafield])}}this.brick.options.setSilent("table.rows",o);let l=typeof performance!="undefined"&&performance.now?performance.now():Date.now(),a=Math.round(l-e);console.warn("data created in...",a,"ms")}}},{for:"table:rows:render",before:{fn:function(t){let e=this.brick.html,n=e.element&&e.element(),o=this.brick.options.get("table.rows"),r=typeof performance!="undefined"&&performance.now?performance.now():Date.now();if(!n)return;t.data=t.data||{},t.data.t0=r,t.data.items=o,t.data.rows=Array.isArray(t.data.rows)?t.data.rows:this.brick.store.load(),t.data.columns=Array.isArray(t.data.columns)?t.data.columns:this.brick.columns.get();let s=n.tagName&&n.tagName.toLowerCase()==="table"?n:e.get&&e.get("table")||n.querySelector&&n.querySelector("table");if(!s)return;let l=e.detach(s.querySelector("tbody"));for(i=l.children.length;i>=0;i--)e.detach(l.children[i]);t.data.table=s,t.data.tbody=l}},on:{fn:function(t){let e=t.data||{},n=Array.isArray(t&&t.data&&t.data.rows)?t.data.rows:this.brick.store.load(),o=Array.isArray(t&&t.data&&t.data.columns)?t.data.columns:this.brick.columns.get();e.columns=o,e.rows=n;for(let r=0;r<n.length;r+=1){let s=t.data.items[n[r].key],l=n[r]||{};this.brick.events.fire("table:row:render",{item:s,row:l,rowIndex:r,tbody:t.data.tbody,columns:o})}}},after:{fn:function(t){let e=t.data||{},n=this.brick.html,o=e.tbody;if(!o)return;requestAnimationFrame(()=>{n.append(e.table,o)});let r=typeof performance!="undefined"&&performance.now?performance.now():Date.now(),s=Math.round(r-t.data.t0);console.warn("table rows pipeline time",s,"ms")}}},{for:"table:row:render",before:{fn:function(t){let e=this.brick.html,n=t.data.item.tr;t.data.tr=n}},on:{fn:function(t){}},after:{fn:function(t){let e=this.brick.html,n=t.data.tr,o=t.data.tbody;o&&n&&e.append(o,n)}}},{for:"table:col:render",before:{fn:function(t){let e=this.brick.html,n=t.data.tr,o=t.data.column,r=t.data.row;if(!n)return;let s=e.get('[for="'+o.datafield+'"]',n);s||(s=e.create("td"),e.attr(s,"for",o.datafield),e.append(n,s)),e.setSafe(s,r[o.datafield]),t.data.td=s}},on:{fn:function(t){let e=t.data.td,n=t.data.column||{},o=t.data.row||{},r=n.datafield,s=r&&Object.prototype.hasOwnProperty.call(o,r)?o[r]:"";e&&(e.textContent=s==null?"":s)}},after:{fn:function(){}}}],init:function(){},destroy:function(){}},J=_t;var At={for:[{host:"brick",kind:"table"}],requires:["html"],ns:"table",options:{},brick:{refresh:function(){this.__tableExt&&this.__tableExt._refreshRows()},getSelection:function(){let t=this.__tableExt;if(!t)return{index:-1,row:null};let e=typeof t.selectedIndex=="number"?t.selectedIndex:-1,n=e>=0&&t.rows&&t.rows[e]?t.rows[e]:null;return{index:e,row:n}},clearSelection:function(){this.__tableExt&&this.__tableExt._setSelectedIndex(-1)}},extension:{table:null,rows:[],selectedIndex:-1,_findTable:function(){let t=this.brick.html&&typeof this.brick.html.element=="function"?this.brick.html.element():null;if(!t||!t.querySelector)return this.table=null,null;let e=t.querySelector("table.vb-table")||t.querySelector("table");return this.table=e||null,this.table},_refreshRows:function(){let t=this.table||this._findTable();if(!t){this.rows=[],this.selectedIndex=-1;return}let e=t.tBodies&&t.tBodies.length?t.tBodies[0]:t.querySelector("tbody"),n=e?e.rows:t.rows;this.rows=Array.prototype.slice.call(n||[]),this.selectedIndex>=this.rows.length&&(this.selectedIndex=-1)},_setSelectedIndex:function(t){let e=this.rows||[];if(!e.length){this.selectedIndex=-1;return}(typeof t!="number"||t<0||t>=e.length)&&(t=-1);for(let n=0;n<e.length;n+=1){let o=e[n];!o||!o.classList||(n===t?o.classList.add("selected"):o.classList.remove("selected"))}this.selectedIndex=t}},events:[{for:"brick:status:ready",on:{fn:function(){this._findTable(),this._refreshRows()}}},{for:"dom:click:*",on:{fn:function(t){let e=this.table||this._findTable();if(!e||!t||!t.data||!t.data.domEvent)return;let n=t.data.domEvent.target;if(!n)return;let o=n,r=null;for(;o&&o!==e;){if(o.tagName&&o.tagName.toLowerCase()==="tr"){r=o;break}o=o.parentNode}if(!r)return;this._refreshRows();let l=(this.rows||[]).indexOf(r);l!==-1&&(this.selectedIndex===l?this._setSelectedIndex(-1):this._setSelectedIndex(l))}}}],init:function(){return this.brick.__tableExt=this,this.table=null,this.rows=[],this.selectedIndex=-1,!0},destroy:function(){this.rows=[],this.table=null,this.selectedIndex=-1,this.brick&&delete this.brick.__tableExt}},U=At;var Ct={kind:"wire"},et=Ct;function nt(t){I&&(t.extensions.htmlCss=I),D&&(t.extensions.htmlEvents=D),R&&(t.extensions.htmlRender=R),T&&(t.extensions.html=T),M&&(t.extensions.store=M),F&&(t.extensions.wire=F),N&&(t.extensions.wireservice=N),H&&(t.extensions.formItems=H),W&&(t.extensions.formRecord=W),z&&(t.extensions.form=z),K&&(t.extensions.statusBar=K),B&&(t.extensions.tableColumns=B),$&&(t.extensions.tableRowsFocused=$),J&&(t.extensions.tableRows=J),U&&(t.extensions.table=U),t.services.WireService=et}var St=new S,w={brick:v,registry:E,utils:j,extensions:{},services:{},configs:{},runtime:St,base:{}};w.runtime.bricks=[];w.runtime.services={};w.runtime.prototypes={};w.runtime.controllers={status:new _,options:new k,events:new b,extensions:new A};globalThis.VanillaBrick=w;nt(w);V(w);tt(w);var je=w;})();
//# sourceMappingURL=vanillabrick.min.js.map

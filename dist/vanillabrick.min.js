(()=>{var Q=Object.defineProperty;var U=Object.getOwnPropertySymbols;var nt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable;var G=(t,e,n)=>e in t?Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,X=(t,e)=>{for(var n in e||(e={}))nt.call(e,n)&&G(t,n,e[n]);if(U)for(var n of U(e))ot.call(e,n)&&G(t,n,e[n]);return t};var rt=(t,e)=>{for(var n in e)Q(t,n,{get:e[n],enumerable:!0})};function _(t){let e=t&&typeof t=="object"?Object.assign({},t):{};e.id=e.id||this._nextId(),e.host=(e.host||"brick").toLowerCase(),e.kind=(e.kind||"brick").toLowerCase(),Object.defineProperty(this,"id",{value:e.id,writable:!1,configurable:!1,enumerable:!0}),Object.defineProperty(this,"host",{value:e.host,writable:!1,configurable:!1,enumerable:!0}),Object.defineProperty(this,"kind",{value:e.kind,writable:!1,configurable:!1,enumerable:!0}),Object.defineProperty(this,"_runtime",{value:{},writable:!1,configurable:!1,enumerable:!1}),Object.defineProperty(this,"_controllers",{value:globalThis.VanillaBrick.runtime.controllers,writable:!1,configurable:!1,enumerable:!1});let n=this,o=this._controllers;o.status&&o.status.init(n),o.options&&o.options.init(n,e),o.events&&o.events.init(n),o.extensions&&o.extensions.init(n),o.extensions&&o.extensions.applyAll(n),o.status&&o.status.set(n,"ready",{options:e})}_.prototype.destroy=function(){this._controllers.status.set(this,"destroyed"),this._runtime&&(this._runtime.status={},this._runtime.options={},this._runtime.events={},this._runtime.extensions={})};Object.defineProperty(_,"_idCounter",{value:0,writable:!0,configurable:!1,enumerable:!1});Object.defineProperty(_.prototype,"_nextId",{value:function(){return _._idCounter+=1,"brick-"+_._idCounter},writable:!1,configurable:!1,enumerable:!1});var st={_cache:{},all:function(t){if(!t||typeof t!="object")return console.warn("ExtensionsRegistry.all() called without brick context"),[];let e=(t.host||"brick").toLowerCase(),n=(t.kind||"").toLowerCase();if(!n)return[];let o=e+"::"+n;if(this._cache[o])return this._cache[o];let r=globalThis.VanillaBrick&&globalThis.VanillaBrick.extensions||{},s={},f=new Set;function i(u){if(!u||typeof u!="object")return null;let d=(u.host||"brick").toLowerCase(),m=typeof u.kind=="string"?u.kind.toLowerCase():"";return m?{host:d,kind:m}:null}function l(u,d,m){if(!u)return!1;let y=u.host==="*"||u.host===d,b=u.kind==="*"||u.kind===m;return y&&b}for(let u in r){if(!Object.prototype.hasOwnProperty.call(r,u))continue;let d=r[u];if(!d||typeof d!="object"||f.has(d))continue;d._name||(d._name=d.ns||u);let m=d.for;if(!Array.isArray(m)||!m.length){console.warn("VanillaBrick extension without valid `for` array, skipped",d._name||u);continue}let y=!1;for(let b=0;b<m.length;b+=1){let C=i(m[b]);if(C&&l(C,e,n)){y=!0;break}}y&&(s[u]={name:u,ext:d},f.add(d))}let c=[],a={};function p(u){if(a[u]==="ok")return!0;if(a[u]==="visiting"||a[u]==="missing")return!1;let d=s[u];if(!d){for(let y in s)if(s[y].ext.ns===u){d=s[y];break}}if(!d)return a[u]="missing",!1;a[u]="visiting";let m=d.ext.requires||d.ext._requires;if(Array.isArray(m))for(let y=0;y<m.length;y++){let b=m[y];if(!p(b))return a[u]="missing",!1}return a[u]="ok",c.push(d),!0}for(let u in s)p(u);return this._cache[o]=c,c},_bake:function(t){let e={};for(let n=0;n<t.length;n++){let o=t[n],r=o.name||o.ext.ns,s={_name:r,_def:o.ext};if(o.ext.extension&&typeof o.ext.extension=="object")for(let i in o.ext.extension)typeof o.ext.extension[i]=="function"&&(s[i]=o.ext.extension[i]);let f={};if(o.ext.brick)for(let i in o.ext.brick)typeof o.ext.brick[i]=="function"&&function(l,c,a){f[l]=function(){let p=this._extData&&this._extData[a];if(!p){console.warn(`VanillaBrick: Extension data not found for ${a} in namespace API call ${l}`);return}let u=Array.prototype.slice.call(arguments),d=globalThis.VanillaBrick?globalThis.VanillaBrick.runtime:null;if(d&&typeof d.execute=="function"){let m={type:"brick-api",ext:a,brick:p.ctx.brick?p.ctx.brick.id:"unknown",fnName:l};return d.execute(c,p.ctx,u,m)}return c.apply(p.ctx,u)}}(i,o.ext.brick[i],r);e[r]={ext:s,api:f}}return e}},O=st;function A(){}A.prototype.execute=function(t,e,n,o){"use strict";if(typeof t!="function"){let r=o&&o.brick||e&&e.brick&&e.brick.id||"unknown";console.warn(`[RuntimeController] Attempted to execute non-function for brick ${r}`,o);return}try{let r=t.apply(e,n);return r&&typeof r.then=="function"?r.catch(function(s){return this._handleError(s,t,e,o),Promise.reject(s)}.bind(this)):r}catch(r){throw this._handleError(r,t,e,o),r}};A.prototype._handleError=function(t,e,n,o){var r=n&&n.brick?n.brick:n;(!r||!r.id)&&o&&o.brick&&(r={id:o.brick});let s={error:t,message:t.message||String(t),stack:t.stack,meta:o||{},context:{brick:r&&r.id?r.id:null,kind:r&&r.kind?r.kind:null}};try{s.fnSource=e.toString()}catch(f){s.fnSource="[unable to capture source]"}console.error("[RuntimeController] Error executing developer code:",s)};function w(){}w.prototype.init=function(t){if(!t||!t._runtime)return;t._runtime.status={value:"initializing",listening:!0};let e=this;t.status={get:()=>e.get(t),set:(n,o)=>e.set(t,n,o),is:n=>e.is(t,n)}};w.prototype.get=function(t){return t&&t._runtime&&t._runtime.status?t._runtime.status.value:void 0};w.prototype.is=function(t,e){return!t||!t._runtime||!t._runtime.status?!1:t._runtime.status.value===e};w.prototype.set=function(t,e,n){if(!t||!t._runtime||!t._runtime.status)return;let o=t._runtime.status;if(!o.listening||o.value===e)return;let r=o.value;o.value=e,t.events&&(t.events.fire("brick:status:change",X({from:r,to:e},n)),t.events.fire("brick:status:"+e,n)),e==="destroyed"&&(o.listening=!1)};var L={};rt(L,{getOption:()=>S,mergeOptions:()=>k,setOption:()=>E});function k(){let t={};for(let e=0;e<arguments.length;e++){let n=arguments[e];if(!(!n||typeof n!="object"))for(let o in n){if(!Object.prototype.hasOwnProperty.call(n,o))continue;let r=n[o],s=t[o];r&&typeof r=="object"&&!Array.isArray(r)&&s&&typeof s=="object"&&!Array.isArray(s)?t[o]=k(s,r):t[o]=r}}return t}function S(t,e){if(!t||!e)return;if(!e.indexOf("."))return t[e];let n=e.split("."),o=t;for(let r=0;r<n.length;r++){if(o==null)return;o=o[n[r]]}return o}function E(t,e,n){if(!t||!e)return;let o=e.split("."),r=t;for(let s=0;s<o.length-1;s++){let f=o[s];(r[f]===void 0||r[f]===null)&&(r[f]={}),r=r[f]}r[o[o.length-1]]=n}function x(){}x.prototype.init=function(t,e){if(!t||!t._runtime)return;t._runtime.options={data:e||{},cache:{}};let n=this;t.options={get:function(o,r){return n.get(t,o,r)},set:function(o,r){return n.setSync(t,o,r),t},setAsync:async function(o,r){return await n.setAsync(t,o,r),t},has:function(o){return n.has(t,o)},all:function(){n.all(t)},setSilent:function(o,r){return n.setSilent(t,o,r),t}}};x.prototype.all=function(t){return t&&t._runtime&&t._runtime.options?t._runtime.options.data:{}};x.prototype.has=function(t,e){let n=t&&t._runtime&&t._runtime.options?t._runtime.options.data:{};return S(n,e)!==void 0};x.prototype.get=function(t,e,n){let o=t&&t._runtime?t._runtime.options:null;if(!o)return n;if(o.cache&&Object.prototype.hasOwnProperty.call(o.cache,e))return o.cache[e];let r=S(o.data,e),s=r===void 0?n:r;return o.cache&&(o.cache[e]=s),s};x.prototype.setSync=function(t,e,n){let o=t&&t._runtime?t._runtime.options:null;if(!o)return;let r=this.get(t,e);r!==n&&(E(o.data,e,n),o.cache={},t.events&&(t.events.fire("brick:option:changed",{key:e,value:n,oldValue:r}),t.events.fire("brick:option:changed:"+e,{value:n,oldValue:r})))};x.prototype.setSilent=function(t,e,n){let o=t&&t._runtime?t._runtime.options:null;o&&(E(o.data,e,n),o.cache={})};x.prototype.setAsync=async function(t,e,n){return this.setSync(t,e,n),Promise.resolve()};function h(){this.phases=["before","on","after"]}h.prototype.init=function(t){if(!t||!t._runtime)return;t._runtime.events={handlers:[],dispatchCache:{}};let e=this;t.events={on:function(n,o,r,s,f){return e.on(t,n,o,r,s,f),t},off:function(n,o,r){return e.off(t,n,o,r),t},fire:function(n,o){return e.fire(t,n,o),t},fireAsync:function(n,o){return e.fireAsync(t,n,o)}}};h.prototype._normalizePriority=function(t){let e=typeof t=="number"?t:5;return e<0&&(e=0),e>10&&(e=10),e};h.prototype._compilePattern=function(t){let e=(t||"").split(":"),n=e[0],o=e[1],r=e[2];return{namespace:!n||n==="*"?void 0:n,type:!o||o==="*"?void 0:o,target:!r||r==="*"?void 0:r}};h.prototype._parseEventKey=function(t){let e=(t||"").split(":");return{namespace:e[0]||"",type:e[1]||"",target:e[2]||""}};h.prototype._matches=function(t,e){return(t.namespace===void 0||t.namespace===e.namespace)&&(t.type===void 0||t.type===e.type)&&(t.target===void 0||t.target===e.target)};h.prototype._validateEventName=function(t){if(typeof t!="string")return console.error("[EventBus] Event name must be a string.",t),!1;let e=t.split(":");return e.length!==3?(console.error('[EventBus] Invalid event name format. Expected exactly "namespace:type:target" (3 segments). Got:',t),!1):!e[0]||e[0]==="*"||!e[1]||e[1]==="*"||!e[2]||e[2]==="*"?(console.error("[EventBus] Invalid event name for dispatch. Wildcards (*) and empty segments are not allowed in namespace, type, or target.",t),!1):!0};h.prototype._getHandlersForEvent=function(t,e,n){if(!t||!t._runtime||!t._runtime.events)return n?[]:{before:[],on:[],after:[]};let o=t._runtime.events,r;if(o.dispatchCache[e])r=o.dispatchCache[e];else{let s=this._parseEventKey(e);r={before:[],on:[],after:[]};for(let f=0;f<o.handlers.length;f+=1){let i=o.handlers[f];this._matches(i.compiled,s)&&r[i.phase]&&r[i.phase].push(i)}o.dispatchCache[e]=r}return n?r[n]||[]:r};h.prototype.on=function(t,e,n,o,r,s){if(typeof n=="function"?(s=r,r=n,n="on",o=void 0):typeof o=="function"&&typeof r!="function"&&(s=r,r=o,o=void 0),!r)return;let f=n||"on";this.phases.indexOf(f)===-1&&(f="on");let i=this._normalizePriority(o),l=t._runtime.events;l.handlers.push({pattern:e,compiled:this._compilePattern(e),phase:f,handler:r,priority:i,meta:s||null}),l.handlers.sort(function(c,a){let p=typeof c.priority=="number"?c.priority:5,u=typeof a.priority=="number"?a.priority:5;return p-u}),l.dispatchCache={}};h.prototype.off=function(t,e,n,o){if(!t||!t._runtime||!t._runtime.events)return;let r=t._runtime.events;for(let s=r.handlers.length-1;s>=0;s-=1){let f=r.handlers[s];e&&f.pattern!==e||n&&f.phase!==n||o&&f.handler!==o||r.handlers.splice(s,1)}r.dispatchCache={}};h.prototype._firePhase=async function(t,e,n,o){o.event.phase=e,o.stopPhase=!1;let r=this._getHandlersForEvent(t,n,e),s=globalThis.VanillaBrick?globalThis.VanillaBrick.runtime:null;for(let f=0;f<r.length&&!o.stopPhase;f+=1){let i=r[f],l=i.handler;try{let c;l&&typeof l=="object"&&typeof l.fn=="function"?s?c=s.execute(l.fn,l.ctx,[o],l.meta):c=l.fn.apply(l.ctx,[o]):typeof l=="function"&&(s?c=s.execute(l,{brick:t},[o],i.meta):c=l(o,{brick:t})),c&&typeof c.then=="function"&&await c}catch(c){console.error("Error in event handler execution:",c,{h:i,eventName:n,phase:e}),o.errors.push({error:c,phase:e,event:n}),o.cancel=!0}}return o};h.prototype._run=async function(t,e,n){if(!t||!t._runtime||!t._runtime.events)return{event:{name:e},errors:[{error:"Event system not initialized for this brick"}],cancel:!0};if(!this._validateEventName(e))return{event:{name:e},errors:[{error:"Invalid event name format or wildcards in dispatch"}],cancel:!0};let o=this._parseEventKey(e),r={brick:t||null,cancel:!1,data:n,errors:[],event:{phase:null,name:e,namespace:o.namespace,type:o.type,target:o.target},stopPhase:!1},s=this.phases;for(let f=0;f<s.length;f+=1){let i=s[f];i==="on"&&r.cancel||await this._firePhase(t,i,e,r)}return r};h.prototype.fire=function(t,e,n){this._run(t,e,n)};h.prototype.fireAsync=function(t,e,n){return this._run(t,e,n)};function it(t){if(!t)return{ns:"",action:"",target:"*"};let e=String(t).split(":"),n=e[0]||"",o=e[1]||"",r=e.length>2?e.slice(2).join(":"):"*";return r||(r="*"),{ns:n,action:o,target:r}}function v(){}function q(){return globalThis.VanillaBrick&&globalThis.VanillaBrick.runtime?globalThis.VanillaBrick.runtime:null}v.prototype.init=function(t){!t||!t._runtime||(t._runtime.extensions={map:{},destroyHook:!1})};v.prototype.applyAll=function(t){let e=O;if(!e||typeof e.all!="function")return;let n=e.all(t)||[];if(n.length==0)return;let o=q();if(o){o.prototypes||(o.prototypes={});let s=e._bake(n);Object.assign(o.prototypes,s)}let r=t._controllers&&t._controllers.options;if(!k||typeof k!="function")console.error("mergeOptions is missing; cannot merge extension defaults safely");else if(r&&typeof r.get=="function"){let s=t._runtime&&t._runtime.options?t._runtime.options.data:{},f=(t.kind||"").toLowerCase(),i=[],l=[];for(let a=0;a<n.length;a+=1){let p=n[a],u=p.ext.options||p.ext._options;if(!u)continue;let d=(p.ext.ns||p.name||"").toLowerCase();d&&f&&d===f+"-core"?i.push(u):l.push(u)}let c=k.apply(null,i.concat(l,[s]));t._runtime&&t._runtime.options&&(t._runtime.options.data=c,t._runtime.options.cache={})}for(let s=0;s<n.length;s+=1)this._install(t,n[s]);this._ensureDestroyHook(t)};v.prototype._install=function(t,e){let n=e.name||e.ext.ns||null,o=e.ext.ns||n;if(!n){console.warn("VanillaBrick extension without name/ns, skipped",e);return}let r=t&&t._runtime?t._runtime.extensions:null;if(!r||r.map[n])return;let s=q(),f=s&&s.prototypes?s.prototypes[n]:null,i;if(f&&f.ext)i=Object.create(f.ext),i.brick=t,i.ext=i,i._ctx=i;else{let c={name:n,def:e.ext,brick:t};i=Object.create(c),i.brick=t,i.ext=c,i._ctx=i}Object.defineProperty(i,"options",{value:t.options,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(i,"events",{value:t.events,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(i,"status",{value:t.status,writable:!1,enumerable:!1,configurable:!0});let l=i;if(!f&&e.ext.extension&&typeof e.ext.extension=="object")for(let c in e.ext.extension){if(!Object.prototype.hasOwnProperty.call(e.ext.extension,c))continue;let a=e.ext.extension[c];if(typeof a=="function"){let p={type:"extension-private",ext:n,brick:t.id,fnName:c};i[c]=function(){let u=Array.prototype.slice.call(arguments);return s&&typeof s.execute=="function"?s.execute(a,i,u,p):a.apply(i,u)}}}if(typeof e.ext.init=="function")try{let c;if(s&&typeof s.execute=="function"?c=s.execute(e.ext.init,i,[],{type:"init",ext:n,brick:t.id,fnName:"init"}):c=e.ext.init.call(i),c===!1)return}catch(c){console.error('VanillaBrick extension "'+n+'" init() failed',c);return}if(e.ext.brick&&typeof e.ext.brick=="object"){t[o]||(t[o]={_extData:{}});let c=t[o];if(c._extData||(c._extData={}),f&&f.api)Object.assign(c,f.api),c._extData[n]={ctx:l,fns:e.ext.brick,meta:{}};else for(let a in e.ext.brick){if(!Object.prototype.hasOwnProperty.call(e.ext.brick,a))continue;let p=e.ext.brick[a];if(typeof p!="function")continue;let u={type:"brick-api",ext:n,brick:t.id,fnName:o+"."+a};c[a]=function(){let d=Array.prototype.slice.call(arguments);return s&&typeof s.execute=="function"?s.execute(p,l,d,u):p.apply(l,d)}}}if(Array.isArray(e.ext.events)&&e.ext.events.length&&t.events&&typeof t.events.on=="function")for(let c=0;c<e.ext.events.length;c+=1){let a=e.ext.events[c];if(!a)continue;let p=it(a.for),u=p.ns+":"+p.action+":"+p.target;["before","on","after"].forEach(function(d){let m=a[d];if(!m||typeof m.fn!="function")return;let y=typeof m.priority=="number"?m.priority:void 0,b={type:"event",ext:n,brick:t.id,event:u,phase:d,fnName:m.fn.name||"anon"},C=function(et){let J=[et];return s&&typeof s.execute=="function"?s.execute(m.fn,i,J,b):m.fn.apply(i,J)};t.events.on(u,d,y,C,{ext:n,fn:m.fn.name})})}r.map[n]=i};v.prototype._ensureDestroyHook=function(t){let e=t&&t._runtime?t._runtime.extensions:null;e&&(e.destroyHook||!t||!t.events||typeof t.events.on!="function"||(e.destroyHook=!0,t.events.on("brick:status:destroyed","on",0,function(){let n=q();for(let o in e.map){if(!Object.prototype.hasOwnProperty.call(e.map,o))continue;let r=e.map[o],s=r._def?{destroy:r._def.destroy,ns:r._name}:r.def||{};if(typeof s.destroy=="function")try{n&&typeof n.execute=="function"?n.execute(s.destroy,r,[],{type:"destroy",ext:o,brick:t.id,fnName:"destroy"}):s.destroy.call(r)}catch(f){console.error('VanillaBrick extension "'+o+'" destroy() failed',f)}}e.map={}})))};function Y(t){t.runtime.services=t.runtime.services||{},t.service=function(e){return t.runtime.services[e]?t.runtime.services[e]:t.base.serviceStart(e)},t.base.serviceStart=function(e){if(t.runtime.services[e])return t.runtime.services[e];let n=t.services[e];if(!n)return console.warn("Service definition not found:",e),null;let o=Object.assign({},n);o.id=e,o.host="service",o.kind=o.kind||"service";let r=new t.brick(o);return t.runtime.services[e]=r,t.runtime.bricks&&Array.isArray(t.runtime.bricks)&&t.runtime.bricks.push(r),r},t.base.serviceStop=function(e){let n=t.runtime.services[e];n&&(n.destroy&&n.destroy(),delete t.runtime.services[e])}}function Z(t){t.base=t.base||{},t.configs=t.configs||{};let e={list:[],byId:{}};function n(i){if(typeof document=="undefined")return;let l=i||document;if(!l.querySelectorAll)return;let c=l.querySelectorAll('script[type="application/json"][data-brick]');for(let a=0;a<c.length;a+=1){let u=c[a].textContent||"";if(u.trim())try{let d=JSON.parse(u);if(!d||typeof d!="object")continue;for(let m in d){if(!Object.prototype.hasOwnProperty.call(d,m))continue;let y=t.configs[m]&&typeof t.configs[m]=="object"?t.configs[m]:{},b=d[m];!b||typeof b!="object"||(t.configs[m]=Object.assign({},y,b))}}catch(d){console.warn("VanillaBrick: invalid JSON in data-brick config",d)}}}function o(i){if(!i)return;let l=i.getAttribute("brick-kind")||i.getAttribute("data-kind")||i.getAttribute("data-brick-kind")||i.dataset&&(i.dataset.kind||i.dataset.brickKind);return l?String(l).toLowerCase():void 0}function r(i){if(!i)return null;if(i.__brickInstance)return i.__brickInstance;let l={},c=i.id&&t.configs?t.configs[i.id]:null;c&&typeof c=="object"&&Object.assign(l,c),i.id&&(l.id=i.id);let a=o(i);a&&(l.kind=a),l.html={id:i.id||null,element:i};let p=new t.brick(l);return i.__brickInstance=p,e.list.push(p),e.byId[p.id]=p,console.log("Brick",i.id,p),p}function s(i){if(typeof document=="undefined")return[];let l=i||document;if(!l.querySelectorAll)return[];n(l);let c=l.querySelectorAll(".vb"),a=[];for(let p=0;p<c.length;p++){let u=r(c[p]);u&&a.push(u)}return a}if(t.base.bootstrap=s,t.runtime=t.runtime||{},t.runtime.bricks=e.list||[],t.base.getBrick=function(i){return e.byId[i]||null},typeof document!="undefined"){let i=function(){f||(f=!0,s())};var f=!1;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){i()}):setTimeout(i,0)}}var ct={for:[{host:"brick",kind:"*"}],requires:["html"],ns:"css",options:{},brick:{addClass:function(t,e){if(!(!t||!e))if(t.classList&&t.classList.add)t.classList.add(e);else{let n=t.className||"";(" "+n+" ").indexOf(" "+e+" ")===-1&&(t.className=(n?n+" ":"")+e)}},removeClass:function(t,e){if(!(!t||!e))if(t.classList&&t.classList.remove)t.classList.remove(e);else{let n=t.className||"";t.className=(" "+n+" ").replace(" "+e+" "," ").trim()}},hasClass:function(t,e){return!t||!e?!1:t.classList&&t.classList.contains?t.classList.contains(e):(" "+(t.className||"")+" ").indexOf(" "+e+" ")!==-1},toggleClass:function(t,e,n){if(!(!t||!e))if(t.classList&&typeof t.classList.toggle=="function")typeof n=="boolean"?t.classList.toggle(e,n):t.classList.toggle(e);else{let o=this.css.hasClass(e);typeof n=="boolean"?(n&&!o&&this.css.addClass(e),!n&&o&&this.css.removeClass(e)):o?this.css.removeClass(e):this.css.addClass(e)}},show:function(t){t&&(t.style.display="")},hide:function(t){t&&(t.style.display="none")},setStyle:function(t,e,n){!t||!e||(t.style[e]=n)},getStyle:function(t,e){if(!t||!e||typeof window=="undefined"||!window.getComputedStyle)return null;let n=window.getComputedStyle(t);return n?n.getPropertyValue(e)||n[e]:null},setVar:function(t,e,n){!t||!e||(e.indexOf("--")!==0&&(e="--"+e),t.style.setProperty(e,n))},getVar:function(t,e){if(!t||!e||typeof window=="undefined"||!window.getComputedStyle)return null;e.indexOf("--")!==0&&(e="--"+e);let n=window.getComputedStyle(t);return n?n.getPropertyValue(e):null}},extension:{},events:[],init:function(){return!this.brick||!this.brick.html||typeof this.brick.html.element!="function"?(console.warn("VanillaBrick htmlCss requires html extension active",this.brick&&this.brick.id),!1):this.brick.html.element()?!0:(console.warn("VanillaBrick htmlCss: no DOM element resolved",this.brick&&this.brick.id),!1)},destroy:function(){}},j=ct;var ft={for:[{host:"brick",kind:"*"}],requires:["html"],ns:"html",options:{},brick:{on:function(t,e,n,o){if(!t||typeof t.addEventListener!="function"||typeof n!="function")return;t.addEventListener(e,n,o);let r=this.brick.options.get("html.listeners",[]);Array.isArray(r)||(r=[]),r.push({el:t,type:e,handler:n,options:o,source:"api"}),this.brick.options.setSilent("html.listeners",r)},off:function(t,e,n){if(!t||typeof t.removeEventListener!="function")return;let o=this.brick.options.get("html.listeners",[]);if(!Array.isArray(o)||o.length===0)return;let r=typeof e=="string"&&e.length>0,s=typeof n=="function";for(let f=o.length-1;f>=0;f--){let i=o[f];!i||i.el!==t||r&&i.type!==e||s&&i.handler!==n||(t.removeEventListener(i.type,i.handler,i.options),o.splice(f,1))}this.brick.options.setSilent("html.listeners",o)}},extension:{},events:[{for:"brick:status:ready",on:{fn:function(){let t=this.brick.html.element();if(!t||typeof t.addEventListener!="function")return;let e=this.brick.options.get("html.events.listeners",[]);Array.isArray(e)||(e=[]);let n=this,o=[{type:"click",eventName:"html:event:click"},{type:"mouseenter",eventName:"html:event:mouseenter"},{type:"mouseleave",eventName:"html:event:mouseleave"},{type:"mousedown",eventName:"html:event:mousedown"},{type:"mouseup",eventName:"html:event:mouseup"}];for(let r=0;r<o.length;r+=1){let s=o[r],f=function(l){n.brick.events.fire(s.eventName,{domEvent:l,element:t})};this.brick.html.on(t,s.type,f)}}}},{for:"brick:status:destroyed",before:{fn:function(){let t=this.brick&&this.brick.html.element&&this.brick.html.element();if(!t||typeof t.removeEventListener!="function")return;let e=this.brick.options.get("html.events.listeners",[]);if(Array.isArray(e))for(let n=0;n<e.length;n+=1){let o=e[n];this.brick.html.off(t,o.type,o.handler,o.options)}}}}],init:function(){},destroy:function(){}},I=ft;var lt={for:[{host:"brick",kind:"*"}],requires:["html"],ns:"html",options:{},brick:{attr:function(t,e,n){if(!t)return t;if(e&&typeof e=="object"){for(let o in e)attr(t,o,e[o]);return t}return n==null||n===!1?(t.removeAttribute(e),t):n===!0?(t.setAttribute(e,""),t):(t.setAttribute(e,String(n)),t)},get:function(t){if(!t)return null;let e=this.html&&typeof this.html.element=="function"?this.html.element():null;return!e||!e.querySelector?null:t.toLowerCase&&e.tagName&&t.toLowerCase()===e.tagName.toLowerCase()?e:e.querySelector(t)||null},create:function(t,e){if(!t||typeof document=="undefined")return null;let n=document.createElement(t),o=e||{};if(o.text!==void 0&&o.text!==null&&(n.textContent=o.text),o.html!==void 0&&o.html!==null&&this.html&&typeof this.html.sanitize=="function"&&(n.innerHTML=this.html.sanitize(String(o.html))),o.attrs&&typeof o.attrs=="object")for(let r in o.attrs)Object.prototype.hasOwnProperty.call(o.attrs,r)&&o.attrs[r]!==void 0&&n.setAttribute(r,o.attrs[r]);if(o.classList&&Array.isArray(o.classList)&&n.classList.add.apply(n.classList,o.classList),o.dataset&&typeof o.dataset=="object")for(let r in o.dataset)Object.prototype.hasOwnProperty.call(o.dataset,r)&&o.dataset[r]!==void 0&&(n.dataset[r]=o.dataset[r]);return n},frag:function(){return typeof document!="undefined"&&document.createDocumentFragment?document.createDocumentFragment():null},append:function(t,e){!t||!e||!t.appendChild||t.appendChild(e)},prepend:function(t,e){!t||!e||!t.insertBefore||(t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e))},replace:function(t,e){!t||!t.replaceChildren||t.replaceChildren(e)},clear:function(t){!t||!t.replaceChildren||t.replaceChildren()},detach:function(t){return t?(t.parentNode&&t.parentNode.removeChild(t),t):t||null},setSafe:function(t,e){if(t){if(!e){t.innerHTML="";return}this.html&&typeof this.html.sanitize=="function"?t.innerHTML=this.html.sanitize(String(e)):t.textContent=String(e)}},sanitize:function(t){if(!t)return"";if(typeof DOMParser=="undefined")return String(t).replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gi,"");let n=new DOMParser().parseFromString(String(t),"text/html");n.querySelectorAll("script, style, iframe, object, embed").forEach(function(s){s&&s.parentNode&&s.parentNode.removeChild(s)});let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT,null);for(;r.nextNode();){let s=r.currentNode,f=Array.prototype.slice.call(s.attributes||[]);for(let i=0;i<f.length;i++){let l=f[i],c=l.name.toLowerCase(),a=l.value||"";if(c.startsWith("on")){s.removeAttribute(l.name);continue}(c==="href"||c==="src")&&/^javascript:/i.test(a)&&s.removeAttribute(l.name)}}return n.body.innerHTML||""},queueRender:function(t){typeof t=="function"&&(typeof requestAnimationFrame=="function"?requestAnimationFrame(t):setTimeout(t,0))},batch:function(t,e,n){let o=Array.isArray(t)?t:[],r=typeof e=="number"&&e>0?e:100,s=typeof n=="function"?n:null;if(!s)return Promise.resolve();let f=0;return new Promise(i=>{let l=()=>{let c=o.slice(f,f+r);c.length?(s(c,f),f+=r,this.queueRender(l.bind(this))):i()};l()})}},extension:{},events:[],init:function(){return!0},destroy:function(){}},P=lt;var at={for:[{host:"brick",kind:"*"}],requires:[],ns:"html",options:{},brick:{element:function(){return this.options.get("html.element",null)},on:function(t,e,n){let o=this.options.get("html.element",null);if(!o||typeof o.addEventListener!="function"||typeof e!="function")return;o.addEventListener(t,e,n);let r=this.options.get("html.listeners",[]);Array.isArray(r)||(r=[]),r.push({type:t,handler:e,options:n,source:"api"}),this.options.setSilent("html.listeners",r)},off:function(t,e,n){let o=this.options.get("html.element",null);if(!o||typeof o.removeEventListener!="function"||typeof e!="function")return;o.removeEventListener(t,e,n);let r=this.options.get("html.listeners",[]);if(Array.isArray(r)){for(let s=r.length-1;s>=0;s-=1){let f=r[s];f.type===t&&f.handler===e&&r.splice(s,1)}this.options.setSilent("html.listeners",r)}}},extension:{_resolveElement:function(t){if(!t)return null;if(typeof Element!="undefined"&&t instanceof Element||t&&t.nodeType===1)return t;if(typeof t=="function")try{return t()}catch(e){return null}return null},_resolveById:function(t){return!t||typeof t!="string"||typeof document=="undefined"?null:document.getElementById(t)||null}},events:[],init:function(){if(!this.brick)return!1;let t=this.brick.options.get("html.element",null),e=this.brick.options.get("html.id",null),n=this._resolveElement(t);return!n&&e&&(n=this._resolveById(e)),n?(t&&!this._resolveElement(t)&&console.warn("VanillaBrick html element must be a DOM node or factory, not an id. Use options.html.id to resolve by id.",this.brick.id),this.brick.options.set("html.element",n),!0):(console.warn("VanillaBrick html extension requires a DOM element (options.html.element) or a valid options.html.id",this.brick.id),!1)},destroy:function(){let t=this.brick.options.get("html.element",null),e=this.brick.options.get("html.listeners",null);if(t&&Array.isArray(e))for(let n=0;n<e.length;n+=1){let o=e[n];o&&o.type&&o.handler&&t.removeEventListener(o.type,o.handler,o.options)}}},T=at;var ut=[{code:"1",name:"one",key:1},{code:"2",name:"two",key:2},{code:"3",name:"three",key:3},{code:"4",name:"four",key:4},{code:"5",name:"five",key:5},{code:"6",name:"six",key:6},{code:"7",name:"seven",key:7},{code:"8",name:"eight",key:8},{code:"9",name:"nine",key:9},{code:"10",name:"ten",key:10},{code:"11",name:"eleven",key:11},{code:"12",name:"twelve",key:12},{code:"13",name:"thirteen",key:13},{code:"14",name:"fourteen",key:14},{code:"15",name:"fifteen",key:15},{code:"16",name:"sixteen",key:16},{code:"17",name:"seventeen",key:17},{code:"18",name:"eighteen",key:18},{code:"19",name:"nineteen",key:19},{code:"20",name:"twenty",key:20}],dt={for:[{host:"brick",kind:"form"},{host:"brick",kind:"table"}],requires:[],ns:"store",options:{},brick:{load:function(){return this.brick.options.get("store.data",[])},set:function(t){if(t===null)return;let e=this.brick.options.get("store.data",[]);return t=Array.isArray(t)?t.slice():[t],this.brick.events.fire("store:data:set",{previous:e,data:t}),t},setAsync:async function(t){let e=this.brick.options.get("store.data",[]);return t=Array.isArray(t)?t.slice():[],await this.brick.events.fireAsync("store:data:set",{previous:e,data:t}),t},all:function(){return this.brick.store.load()},get:function(t){let e=this.brick.store.load();return typeof t!="number"||t<0||t>=e.length?null:e[t]}},extension:{_normalizeArray:function(t,e){return Array.isArray(t)?t.slice():Array.isArray(e)?e.slice():[]},_sortRows:function(t,e,n,o){let r=Array.isArray(t)?t.slice():[],s=typeof o=="function"?function(f,i){return o(f,i,n)}:function(f,i){let l=f&&Object.prototype.hasOwnProperty.call(f,e)?f[e]:void 0,c=i&&Object.prototype.hasOwnProperty.call(i,e)?i[e]:void 0,a=0;return l===c?a=0:l==null?a=-1:c==null?a=1:typeof l=="number"&&typeof c=="number"?a=l-c:a=String(l).localeCompare(String(c)),n==="desc"?-a:a};return r.sort(s),r}},events:[{for:"brick:status:ready",on:{fn:function(t){let e=this._normalizeArray(ut,[]);this.brick.options.setSilent("store.data",e)}}},{for:"store:data:set",on:{fn:function(t){let e=t&&t.data||null,n=e&&e.data?e.data:[];this.brick.options.setSilent("store.data",n)}}},{for:"store:data:sort",on:{fn:function(t){let e=t&&t.data||{},n=e.field||null,o=e.dir||"asc";if(!n||!this.brick)return;let r=this._sortRows(this.brick.store.load(),n,o,e.compare);this.brick.options.setSilent("store.data",r),t.field=n,t.dir=o,t.data=r}}}],init:function(){},destroy:function(){}},D=dt;var pt={for:[{host:"brick",kind:"*"}],requires:[],ns:"wire",options:{},brick:{notify:function(t,e){this.ext._service||this.ext._connect(),this.ext._service&&this.ext._service.events.fire("wire:notify:out",{from:this.brick.id,event:t,data:e})},request:function(t,e){this.ext._service||this.ext._connect(),this.ext._service&&this.ext._service.events.fire("wire:request:out",{from:this.brick.id,event:t,data:e})}},extension:{_service:null,_connect:function(){this.ext._service||this.brick.options.get("wire",null)==null||(globalThis.VanillaBrick&&globalThis.VanillaBrick.service&&(this.ext._service=globalThis.VanillaBrick.service("WireService")),this.ext._service?this.ext._service.events.fire("wire:register:in",{brick:this.brick,options:this.brick.options.get("wire",{})}):console.warn("[Wire Client] No Wire Service found.",this.ext._service))}},events:[{for:"brick:status:ready",on:{fn:function(){this._connect()}}}],init:function(){},destroy:function(){}},R=pt;var mt={for:[{host:"service",kind:"wire"}],requires:[],ns:"wire",options:{},brick:{},events:[{for:"wire:notify:out",on:{fn:function(t){let e=t.data.from,n=t.data.event,o=t.data.data,r=this.ext._slaves[e];if(r&&r.length>0)for(let s=0;s<r.length;s++)r[s].brick.events.fire(n,o)}}},{for:"wire:register:in",on:{fn:function(t){this.ext._register(t.data)}}}],extension:{_register:function(t){if(t.options.master&&(this.ext._bricks==null&&(this.ext._bricks={}),this.ext._bricks[t.brick.id]=t.brick),t.options.slaveOf&&t.options.slaveOf.length>0){this.ext._masters==null&&(this.ext._masters={}),this.ext._slaves==null&&(this.ext._slaves={});for(let e=0;e<t.options.slaveOf.length;e++)this.ext._masters[t.brick.id]||(this.ext._masters[t.brick.id]=[]),this.ext._masters[t.brick.id].push({id:t.options.slaveOf[e].id,kind:t.options.slaveOf[e].kind}),this.ext._slaves[t.options.slaveOf[e].id]||(this.ext._slaves[t.options.slaveOf[e].id]=[]),this.ext._slaves[t.options.slaveOf[e].id].push({id:t.brick.id,kind:t.brick.kind,brick:t.brick})}}}},N=mt;var ht={for:[{host:"brick",kind:"form"}],requires:["html"],ns:"items",options:{},brick:{get:function(){return this.options.get("form.items",[])}},extension:{_parseFromDom:function(){let t=this.brick.html.element();if(!t)return[];let e=[],n=t.querySelectorAll(".vb-form-group");for(let o=0;o<n.length;o++){let r=n[o],s={type:"group",items:[]},f=r.querySelectorAll(".vb-form-field");for(let i=0;i<f.length;i++){let l=f[i],c=l.querySelector("input, select, textarea"),a=l.querySelector("label");if(c){let p={type:"field",name:c.name||c.id,label:a?a.textContent:"",controlType:c.tagName.toLowerCase(),inputType:c.type,required:c.required,placeholder:c.placeholder,span:this._detectSpan(l)};s.items.push(p)}}e.push(s)}return e},_detectSpan:function(t){let e=t;for(;e&&!e.classList.contains("vb-row");){if(e.className&&typeof e.className=="string"){let n=e.className.match(/vb-span-(\d+)/);if(n)return parseInt(n[1],10)}if(e=e.parentElement,!e||e.tagName==="FORM")break}return 12},_render:function(t){let e=this.brick.html,n=e.element();if(!n)return;e.clear(n);let o=e.frag()||n.ownerDocument.createDocumentFragment();for(let r=0;r<t.length;r++){let s=t[r];if(s.type!=="group")continue;let f=e.create("div",{classList:["vb-form-group"]}),i=e.create("div",{classList:["vb-row"]});if(s.items&&s.items.length)for(let l=0;l<s.items.length;l++){let c=s.items[l],a=c.span||12,p=e.create("div",{classList:["vb-span-"+a]}),u=e.create("div",{classList:["vb-form-field"]});if(c.label){let m=e.create("label",{text:c.label});c.name&&(m.htmlFor=c.name),e.append(u,m)}let d;c.controlType==="textarea"?d=e.create("textarea"):c.controlType==="select"?d=e.create("select"):(d=e.create("input"),d.type=c.inputType||"text"),c.name&&(d.name=c.name,d.id=c.name),c.placeholder&&(d.placeholder=c.placeholder),(c.required===!0||c.required==="true"||c.required==="required")&&(d.required=!0),e.append(u,d),e.append(p,u),e.append(i,p)}e.append(f,i),e.append(o,f)}e.append(n,o)}},events:[{for:"brick:status:ready",before:{fn:function(t){let e=[];if(this.brick.options.has("form.items")&&(e=this.brick.options.get("form.items")),!e||e.length===0){let n=this.brick.html.element();if(n){let o=n.getAttribute("brick-form-items")||n.getAttribute("data-form-items");o&&window[o]&&(console.log("[Form Items] Config var found",o),e=window[o],this.brick.options.set("form.items",e))}(!e||e.length===0)&&(console.log("[Form Items] Parsing from DOM",this.brick.id),e=this._parseFromDom(),this.brick.options.set("form.items",e))}else console.log("[Form Items] Config found in options",e);t.data=t.data||{},t.data.formItems=e}},on:{fn:function(t){let e=t.data.formItems||this.brick.options.get("form.items");e&&e.length>0&&this._render(e)}}}],init:function(){return!0},destroy:function(){}},F=ht;var yt={for:[{host:"brick",kind:"form"}],requires:["html","store"],ns:"record",options:{},brick:{getRecord:function(){let t=this.store.load();return t&&t.length?t[0]:null}},extension:{_bind:function(t){let e=this.brick.html.element();if(!e)return;let n=e.querySelectorAll("input, select, textarea");for(let o=0;o<n.length;o++){let r=n[o],s=r.name||r.id;s&&(t&&Object.prototype.hasOwnProperty.call(t,s)?r.value=t[s]:t||(r.value=""))}}},events:[{for:"brick:status:ready",on:{fn:function(t){let e=this.brick.store.load();e&&e.length&&this._bind(e[0])}}},{for:"store:data:*",after:{fn:function(t){let e=this.brick.store.load(),n=e&&e.length?e[0]:null;this._bind(n)}}},{for:"dom:row:focus",after:{fn:function(t){let e=t.data.row;this._bind(e)}}}],init:function(){return!0},destroy:function(){}},M=yt;var bt={for:[{host:"brick",kind:"form"}],requires:["html"],ns:"form",options:{items:[]},brick:{submit:function(){let t=this.dom.element();t&&typeof t.submit=="function"&&t.submit()},reset:function(){let t=this.dom.element();t&&typeof t.reset=="function"&&t.reset()}},extension:{},events:[{for:"brick:status:ready",on:{fn:function(){}}}],init:function(){return!0},destroy:function(){}},H=bt;var xt={for:[{host:"brick",kind:"status-bar"}],requires:["html"],ns:"statusBar",events:[{for:"dom:row:focus",after:{fn:function(t){let e=t.data.row,n=this.brick.html.element();n&&(n.textContent=`Wire OK -> Selected: ${e.name}`)}}}],init:function(){let t=this.brick.html.element();t&&(t.textContent="Wire status: Waiting for table...")}},W=xt;var gt={for:[{host:"brick",kind:"table"}],requires:["html","store"],ns:"columns",brick:{get:function(){return this.options.get("table.columns",[])},sort:function(t,e){let o=this.brick.columns.get().find(function(f){return f&&f.datafield===t})||{},r=this.options.get("table.sort",{field:null,dir:null}),s=e;return s!=="asc"&&s!=="desc"&&(s=r.field===t&&r.dir==="asc"?"desc":"asc"),this.events.fire("store:data:sort",{field:t,dir:s,compare:typeof o.sort=="function"?o.sort:null}),s}},extension:{},events:[{for:"brick:status:ready",on:{fn:function(t){let e=this.brick.columns.get(),n=this.brick.html,o=n.element&&n.element();if(!o)return;let r=o.tagName&&o.tagName.toLowerCase()==="table"?o:n.get&&n.get("table")||o.querySelector&&o.querySelector("table");if(!r)return;let s=n.create("thead"),f=s.insertRow(),i=this.brick;for(let l=0;l<e.length;l+=1){let c=e[l]||{},a=n.create("th",{text:c.label||c.datafield||""});c.sortable&&c.datafield&&(a.classList.add("vb-sortable"),n.on(a,"click",function(p){return function(){i.columns.sort(p.datafield,null)}}(c))),n.append(f,a)}t.data||(t.data={}),t.data.table=r,t.data.thead=s}},after:{fn:function(t){let e=this.brick.html,n=t&&t.data&&t.data.table||e.get&&e.get("table")||null,o=t&&t.data&&t.data.thead;if(!n||!o)return;let r=n.tHead||n.querySelector&&n.querySelector("thead");r&&r!==o&&r.parentNode===n&&n.removeChild(r),n.insertBefore(o,n.firstChild||null)}}},{for:"store:data:sort",after:{fn:function(t){this.brick.options.setSilent("table.sort",{field:t.field,dir:t.dir||"asc"})}}}],init:function(){},destroy:function(){},options:{table:{columns:[{datafield:"code",label:"Code",sortable:!0},{datafield:"name",label:"Name",sortable:!0},{datafield:"key",label:"Key",sortable:!1}]}}},z=gt;var _t={for:[{host:"brick",kind:"table"}],requires:["html","rows","store"],ns:"rowsFocused",options:{},brick:{},extension:{},events:[{for:"table:render:row",before:{fn:function(t){let e=this.brick.html,n=t.data.tr;e.off(n,"mousedown")}},after:{fn:function(t){let e=this.brick.html,n=t.data.tr;e.on(n,"mousedown",o=>{var s;this.brick.html.element().querySelectorAll("tr.vb-focused").forEach(f=>{f!==n&&this.brick.css.removeClass(f,"vb-focused")}),this.brick.css.addClass(n,"vb-focused"),(s=this.brick.wire)==null||s.notify("dom:row:focus",{row:t.data.row})})}}}],init:function(){},destroy:function(){}},K=_t;var wt={for:[{host:"brick",kind:"table"}],requires:["html","store","columns"],ns:"rows",options:{},brick:{render:function(){if(!this.brick.html.element())return;let n=typeof performance!="undefined"&&performance.now?performance.now():Date.now(),o=this.brick.store.load(),r=this.brick.columns.get();this.brick.events.fireAsync("table:render:rows",{rows:o,columns:r}).then(()=>{let s=typeof performance!="undefined"&&performance.now?performance.now():Date.now(),f=Math.round(s-n);console.warn("table rows pipeline time",f,"ms")})}},extension:{},events:[{for:"brick:status:ready",on:{fn:function(){this.brick.rows.render()}}},{for:"store:data:*",after:{fn:function(t){this.brick.rows.render()}}},{for:"table:render:rows",before:{fn:function(t){let e=this.brick.html,n=e.element&&e.element();if(!n)return;t.data=t.data||{},t.data.rows=Array.isArray(t.data.rows)?t.data.rows:this.brick.store.load(),t.data.columns=Array.isArray(t.data.columns)?t.data.columns:this.brick.columns.get();let o=n.tagName&&n.tagName.toLowerCase()==="table"?n:e.get&&e.get("table")||n.querySelector&&n.querySelector("table");if(!o)return;let r=e.detach(o.querySelector("tbody")),s=e.create("tbody");t.data.table=o,t.data.oldTbody=r,t.data.tbody=s,t.data.frag=e.frag()||s.ownerDocument.createDocumentFragment()}},on:{fn:function(t){let e=t.data||{},n=Array.isArray(t&&t.data&&t.data.rows)?t.data.rows:this.brick.store.load(),o=Array.isArray(t&&t.data&&t.data.columns)?t.data.columns:this.brick.columns.get();e.columns=o,e.rows=n;for(let r=0;r<n.length;r+=1){let s=n[r]||{};this.brick.events.fire("table:render:row",{row:s,rowIndex:r,oldTbody:e.oldTbody,frag:e.frag,tbody:t.data.tbody,columns:o})}}},after:{fn:function(t){let e=t.data||{},n=this.brick.html,o=e.tbody;o&&n.append(e.table,o)}}},{for:"table:render:row",before:{fn:function(t){let e=this.brick.html,n=null,o=t.data&&t.data.oldTbody;o&&o.firstChild&&(n=o.firstChild,o.removeChild(n)),n||(n=e.create("tr")),t.data.tr=n}},on:{fn:function(t){let e=this.brick.html,n=t.data.tr,o=t.data.row||{},r=t.data.columns||[];e.attr(n,"key",o.key);for(let s=0;s<r.length;s+=1){let f=r[s]||{};this.brick.events.fire("table:render:col",{tr:n,tdIndex:s,column:f,row:o,rowIndex:t.data.rowIndex})}}},after:{fn:function(t){let e=this.brick.html,n=t.data.tr,o=t.data.tbody;o&&n&&e.append(o,n)}}},{for:"table:render:col",before:{fn:function(t){let e=this.brick.html,n=t.data.tr,o=t.data.tdIndex;if(!n)return;let r=n.cells&&n.cells[o]?n.cells[o]:null;r||(r=e.create("td"),n.cells&&o<n.cells.length?n.insertBefore(r,n.cells[o]):e.append(n,r)),t.data.td=r}},on:{fn:function(t){let e=t.data.td,n=t.data.column||{},o=t.data.row||{},r=n.datafield,s=r&&Object.prototype.hasOwnProperty.call(o,r)?o[r]:"";e&&(e.textContent=s==null?"":s)}},after:{fn:function(){}}}],init:function(){},destroy:function(){}},B=wt;var vt={for:[{host:"brick",kind:"table"}],requires:["html"],ns:"table",options:{},brick:{refresh:function(){this.__tableExt&&this.__tableExt._refreshRows()},getSelection:function(){let t=this.__tableExt;if(!t)return{index:-1,row:null};let e=typeof t.selectedIndex=="number"?t.selectedIndex:-1,n=e>=0&&t.rows&&t.rows[e]?t.rows[e]:null;return{index:e,row:n}},clearSelection:function(){this.__tableExt&&this.__tableExt._setSelectedIndex(-1)}},extension:{table:null,rows:[],selectedIndex:-1,_findTable:function(){let t=this.brick.html&&typeof this.brick.html.element=="function"?this.brick.html.element():null;if(!t||!t.querySelector)return this.table=null,null;let e=t.querySelector("table.vb-table")||t.querySelector("table");return this.table=e||null,this.table},_refreshRows:function(){let t=this.table||this._findTable();if(!t){this.rows=[],this.selectedIndex=-1;return}let e=t.tBodies&&t.tBodies.length?t.tBodies[0]:t.querySelector("tbody"),n=e?e.rows:t.rows;this.rows=Array.prototype.slice.call(n||[]),this.selectedIndex>=this.rows.length&&(this.selectedIndex=-1)},_setSelectedIndex:function(t){let e=this.rows||[];if(!e.length){this.selectedIndex=-1;return}(typeof t!="number"||t<0||t>=e.length)&&(t=-1);for(let n=0;n<e.length;n+=1){let o=e[n];!o||!o.classList||(n===t?o.classList.add("selected"):o.classList.remove("selected"))}this.selectedIndex=t}},events:[{for:"brick:status:ready",on:{fn:function(){this._findTable(),this._refreshRows()}}},{for:"dom:click:*",on:{fn:function(t){let e=this.table||this._findTable();if(!e||!t||!t.data||!t.data.domEvent)return;let n=t.data.domEvent.target;if(!n)return;let o=n,r=null;for(;o&&o!==e;){if(o.tagName&&o.tagName.toLowerCase()==="tr"){r=o;break}o=o.parentNode}if(!r)return;this._refreshRows();let f=(this.rows||[]).indexOf(r);f!==-1&&(this.selectedIndex===f?this._setSelectedIndex(-1):this._setSelectedIndex(f))}}}],init:function(){return this.brick.__tableExt=this,this.table=null,this.rows=[],this.selectedIndex=-1,!0},destroy:function(){this.rows=[],this.table=null,this.selectedIndex=-1,this.brick&&delete this.brick.__tableExt}},$=vt;var kt={kind:"wire"},V=kt;function tt(t){j&&(t.extensions.htmlCss=j),I&&(t.extensions.htmlEvents=I),P&&(t.extensions.htmlRender=P),T&&(t.extensions.html=T),D&&(t.extensions.store=D),R&&(t.extensions.wire=R),N&&(t.extensions.wireservice=N),F&&(t.extensions.formItems=F),M&&(t.extensions.formRecord=M),H&&(t.extensions.form=H),W&&(t.extensions.statusBar=W),z&&(t.extensions.tableColumns=z),K&&(t.extensions.tableRowsFocused=K),B&&(t.extensions.tableRows=B),$&&(t.extensions.table=$),t.services.WireService=V}var At=new A,g={brick:_,registry:O,utils:L,extensions:{},services:{},configs:{},runtime:At,base:{}};g.runtime.bricks=[];g.runtime.services={};g.runtime.prototypes={};g.runtime.controllers={status:new w,options:new x,events:new h,extensions:new v};globalThis.VanillaBrick=g;tt(g);Y(g);Z(g);var Le=g;})();
//# sourceMappingURL=vanillabrick.min.js.map

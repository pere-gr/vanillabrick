{
  "version": 3,
  "sources": ["../src/controllers/statusController.js", "../src/controllers/runtimeController.js", "../src/controllers/optionsController.js", "../src/controllers/eventsController.js", "../src/controllers/extensionsRegistry.js", "../src/utils/options.js", "../src/controllers/extensionsController.js", "../src/brick/brick.js", "../src/startup/services.js", "../src/startup/bootstrap.js", "../src/extensions/dom-css.js", "../src/extensions/dom-events.js", "../src/extensions/dom.js", "../src/extensions/store.js", "../src/extensions/wire-client.js", "../src/extensions/wire-service.js", "../src/components/form-items.js", "../src/components/form-record.js", "../src/components/form.js", "../src/components/grid-columns.js", "../src/components/grid-rows-focused.js", "../src/components/grid-rows.js", "../src/components/grid.js", "../src/services/wire.js", "../src/_manifest.js", "../src/index.js"],
  "sourcesContent": ["/**\r\n * Status Controller\r\n * Manages the lifecycle state of the brick via EventBus.\r\n * @constructor\r\n */\r\nexport default function StatusController(brick) {\r\n    this.brick = brick;\r\n    this._status = 'initializing';\r\n    this._listening = false;\r\n\r\n    // Expose public Status API on the brick\r\n    var self = this;\r\n    if (brick) {\r\n        brick.status = {\r\n            get: function () {\r\n                return self.get();\r\n            },\r\n            set: function (newStatus) {\r\n                return self.set(newStatus);\r\n            },\r\n            is: function (status) {\r\n                return self.is(status);\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\nStatusController.prototype.get = function () {\r\n    return this._status;\r\n};\r\n\r\nStatusController.prototype.set = function (newStatus, payload) {\r\n    // Fallback: if events system is not available yet (very early init), just set it.\r\n    if (!this.brick.events) {\r\n        this._status = newStatus;\r\n        return;\r\n    }\r\n\r\n    // Lazy registration: ensure internal state is updated via EventBus 'on' phase\r\n    if (!this._listening) {\r\n        var self = this;\r\n        // Wildcard listener to catch ANY status change event (brick:status:ready, etc.)\r\n        this.brick.events.on('brick:status:*', 'on', function (ev) {\r\n            // Update internal state from payload\r\n            if (ev.data && ev.data.status) {\r\n                self._status = ev.data.status;\r\n            }\r\n        });\r\n        this._listening = true;\r\n    }\r\n\r\n    // Prepare event data mixing standard fields with payload\r\n    var eventData = Object.assign({}, payload || {}, {\r\n        status: newStatus,\r\n        from: this._status\r\n    });\r\n\r\n    // Fire specific event dynamic name: e.g., \"brick:status:ready\"\r\n    this.brick.events.fire('brick:status:' + newStatus, eventData);\r\n};\r\n\r\nStatusController.prototype.is = function (status) {\r\n    return this._status === status;\r\n};\r\n", "/**\r\n * Runtime controller - wraps all developer code execution from extensions.\r\n * Provides centralized error handling and metadata capture for debugging.\r\n * @constructor\r\n * @param {Object} brick - The brick instance this controller belongs to\r\n */\r\nexport default function RuntimeController(brick) {\r\n    this.brick = brick || null;\r\n}\r\n\r\n/**\r\n * Execute developer code with error handling and metadata capture.\r\n * \r\n * @param {Function} fn - The function to execute\r\n * @param {Object} context - The 'this' context for the function\r\n * @param {Array} args - Arguments to pass to the function\r\n * @param {Object} meta - Metadata for debugging\r\n *   - type: 'event' | 'init' | 'destroy' | 'brick-api' | 'extension-private'\r\n *   - ext: extension name\r\n *   - brick: brick.id (optional)\r\n *   - event: event name (optional, for event handlers)\r\n *   - phase: event phase (optional, for event handlers)\r\n *   - fnName: function name (optional)\r\n * @returns {*} The result of the function execution\r\n */\r\nRuntimeController.prototype.execute = function (fn, context, args, meta) {\r\n    \"use strict\";\r\n    if (typeof fn !== 'function') {\r\n        console.warn('[RuntimeController] Attempted to execute non-function', meta);\r\n        return undefined;\r\n    }\r\n\r\n    try {\r\n        const result = fn.apply(context, args);\r\n\r\n        // Support async functions\r\n        if (result && typeof result.then === 'function') {\r\n            return result.catch(function (err) {\r\n                this._handleError(err, fn, context, meta);\r\n                return Promise.reject(err);\r\n            }.bind(this));\r\n        }\r\n\r\n        return result;\r\n    } catch (err) {\r\n        this._handleError(err, fn, context, meta);\r\n        throw err;\r\n    }\r\n};\r\n\r\n/**\r\n * Handle errors from developer code execution.\r\n * Logs detailed information including source code for debugging.\r\n * \r\n * @param {Error} err - The error that occurred\r\n * @param {Function} fn - The function that threw the error\r\n * @param {Object} context - The context the function was executed in\r\n * @param {Object} meta - Metadata about the execution\r\n * @private\r\n */\r\nRuntimeController.prototype._handleError = function (err, fn, context, meta) {\r\n    var brickCtx = (context && context.brick) ? context.brick : context;\r\n    const errorInfo = {\r\n        error: err,\r\n        message: err.message || String(err),\r\n        stack: err.stack,\r\n        meta: meta || {},\r\n        context: {\r\n            brick: brickCtx && brickCtx.id ? brickCtx.id : null,\r\n            kind: brickCtx && brickCtx.kind ? brickCtx.kind : null\r\n        }\r\n    };\r\n\r\n    // Try to capture function source for debugging\r\n    try {\r\n        errorInfo.fnSource = fn.toString();\r\n    } catch (e) {\r\n        errorInfo.fnSource = '[unable to capture source]';\r\n    }\r\n\r\n    console.error('[RuntimeController] Error executing developer code:', errorInfo);\r\n\r\n    // Future: delegate to errorController\r\n    // if (this.errorController && typeof this.errorController.handle === 'function') {\r\n    //   this.errorController.handle(errorInfo);\r\n    // }\r\n};\r\n\r\n/**\r\n * Wrap a function with runtime execution protection.\r\n * Returns a new function that will execute through the runtime controller.\r\n * \r\n * @param {Function} fn - The function to wrap\r\n * @param {Object} context - The 'this' context for the function\r\n * @param {Object} meta - Metadata for debugging\r\n * @returns {Function} Wrapped function\r\n */\r\nRuntimeController.prototype.wrap = function (fn, context, meta) {\r\n    if (typeof fn !== 'function') {\r\n        return fn;\r\n    }\r\n\r\n    const runtime = this;\r\n    return function wrappedFunction() {\r\n        const args = Array.prototype.slice.call(arguments);\r\n        return runtime.execute(fn, context, args, meta);\r\n    };\r\n};\r\n", "/**\r\n * Per-brick options controller.\r\n * Guarda valors en objectes nested segons rutes amb punts,\r\n * mantenint compatibilitat de lectura amb claus planes.\r\n * @constructor\r\n * @param {Object} brick\r\n * @param {Object} initial\r\n */\r\nexport default function OptionsController(brick, initial) {\r\n  this.brick = brick;\r\n  this.data = {};\r\n  this._cache = {}; // Cache for O(1) reads\r\n  this._eventsBound = false;\r\n\r\n  if (initial && typeof initial === 'object') {\r\n    for (const k in initial) {\r\n      if (Object.prototype.hasOwnProperty.call(initial, k)) {\r\n        setPath(this.data, toPath(k), initial[k]);\r\n      }\r\n    }\r\n  }\r\n\r\n  var ctrl = this;\r\n\r\n  // API p\u00FAblica al brick\r\n  brick.options = {\r\n    get: function (key, fallback) {\r\n      return ctrl.get(key, fallback);\r\n    },\r\n\r\n    // S\u00EDncron: dispara events via fire()\r\n    set: function (key, value) {\r\n      ctrl.setSync(key, value);\r\n      return brick;\r\n    },\r\n\r\n    // Async: dispara events via fireAsync()\r\n    setAsync: async function (key, value) {\r\n      await ctrl.setAsync(key, value);\r\n      return brick; // permet await brick.options.setAsync(...); i chaining\r\n    },\r\n\r\n    has: function (key) {\r\n      return ctrl.has(key);\r\n    },\r\n\r\n    all: function () {\r\n      return ctrl.all();\r\n    },\r\n\r\n    setSilent: function (key, value) {\r\n      ctrl.setSilent(key, value);\r\n      return brick; // chaining\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Registra el handler _apply al bus d'events\r\n * per a la fase \"on\" de \"options:value:*\".\r\n * Nom\u00E9s es fa un cop.\r\n */\r\nOptionsController.prototype._ensureEventsBinding = function () {\r\n  if (this._eventsBound) return;\r\n\r\n  var brick = this.brick;\r\n  var self = this;\r\n\r\n  // Confies en la arquitectura: brick.events i on() EXISTEIXEN.\r\n  brick.events.on('options:value:*', 'on', 5, function (ev) {\r\n    self._apply(ev);\r\n  });\r\n\r\n  this._eventsBound = true;\r\n};\r\n\r\n/**\r\n * Handler de fase \"on\" per \"options:value:*\".\r\n * Aplica els canvis a this.data a partir de ev.data.\r\n *\r\n * Shape assumit:\r\n *  - single: { key, value, previous, options, brick }\r\n *  - batch:  { batch:true, values:{...}, previous:{...}, options, brick }\r\n *\r\n * @param {Object} ev - event del EventBus\r\n */\r\nOptionsController.prototype._apply = function (ev) {\r\n  if (!ev) return;\r\n  var payload = ev.data || {};\r\n\r\n  // Invalidate cache on any update\r\n  this._cache = {};\r\n\r\n  // Batch: set({ a:1, b:2 }) / set({ dom:{id:'x'} })\r\n  if (payload.batch && payload.values && typeof payload.values === 'object') {\r\n    for (var k in payload.values) {\r\n      if (Object.prototype.hasOwnProperty.call(payload.values, k)) {\r\n        setPath(this.data, toPath(k), payload.values[k]);\r\n      }\r\n    }\r\n    return;\r\n  }\r\n\r\n  // Single: set('foo', 123)\r\n  if (typeof payload.key === 'string') {\r\n    setPath(this.data, toPath(payload.key), payload.value);\r\n  }\r\n};\r\n\r\n/**\r\n * Set a value or merge an object, disparant events options:value.\r\n * Sempre usa fireAsync per permetre handlers async.\r\n *\r\n * @param {string|Object} key\r\n * @param {any} value\r\n * @returns {Promise<OptionsController>}\r\n */\r\nOptionsController.prototype.setAsync = async function (key, value) {\r\n  this._ensureEventsBinding();\r\n\r\n  var brick = this.brick;\r\n\r\n  // OBJECTE: set({ a:1, b:2 }) (pot incloure nested)\r\n  if (key && typeof key === 'object' && !Array.isArray(key)) {\r\n    var values = {};\r\n    var previous = {};\r\n\r\n    flattenEntries(key, '', values);\r\n\r\n    for (var vk in values) {\r\n      if (!Object.prototype.hasOwnProperty.call(values, vk)) continue;\r\n      previous[vk] = getWithFallback(this.data, vk);\r\n    }\r\n\r\n    var batchPayload = {\r\n      batch: true,\r\n      values: values,\r\n      previous: previous,\r\n      options: this,\r\n      brick: brick\r\n    };\r\n\r\n    // sense target: \"options:value:\"\r\n    // target \"batch\" per evitar el validator de 3 segments\r\n    await brick.events.fireAsync('options:value:batch', batchPayload);\r\n    return this;\r\n  }\r\n\r\n  // SINGLE: set('theme', 'dark')\r\n  var oldValue = getWithFallback(this.data, key);\r\n\r\n  var payload = {\r\n    key: key,\r\n    value: value,\r\n    previous: oldValue,\r\n    options: this,\r\n    brick: brick\r\n  };\r\n\r\n  // amb target: \"options:value:<key>\"\r\n  await brick.events.fireAsync('options:value:' + key, payload);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Set a value or merge an object, disparant events options:value de forma s\u00EDncrona.\r\n * @param {string|Object} key\r\n * @param {any} value\r\n * @returns {OptionsController}\r\n */\r\nOptionsController.prototype.setSync = function (key, value) {\r\n  this._ensureEventsBinding();\r\n\r\n  var brick = this.brick;\r\n\r\n  // OBJECTE: set({ a:1, b:2 }) (pot incloure nested)\r\n  if (key && typeof key === 'object' && !Array.isArray(key)) {\r\n    var values = {};\r\n    var previous = {};\r\n\r\n    flattenEntries(key, '', values);\r\n\r\n    for (var vk in values) {\r\n      if (!Object.prototype.hasOwnProperty.call(values, vk)) continue;\r\n      previous[vk] = getWithFallback(this.data, vk);\r\n    }\r\n\r\n    var batchPayload = {\r\n      batch: true,\r\n      values: values,\r\n      previous: previous,\r\n      options: this,\r\n      brick: brick\r\n    };\r\n\r\n    // sense target: \"options:value:\"\r\n    // target \"batch\" per evitar el validator de 3 segments\r\n    brick.events.fire('options:value:batch', batchPayload);\r\n    return this;\r\n  }\r\n\r\n  // SINGLE: set('theme', 'dark')\r\n  var oldValue = getWithFallback(this.data, key);\r\n\r\n  var payload = {\r\n    key: key,\r\n    value: value,\r\n    previous: oldValue,\r\n    options: this,\r\n    brick: brick\r\n  };\r\n\r\n  // amb target: \"options:value:<key>\"\r\n  brick.events.fire('options:value:' + key, payload);\r\n  return this;\r\n};\r\n\r\n// Compat: alias set -> setAsync\r\nOptionsController.prototype.set = OptionsController.prototype.setAsync;\r\n\r\n/**\r\n * Set sense emetre events.\r\n * @param {string|Object} key\r\n * @param {any} value\r\n * @returns {OptionsController}\r\n */\r\nOptionsController.prototype.setSilent = function (key, value) {\r\n  // Invalidate cache\r\n  this._cache = {};\r\n\r\n  // OBJECTE: setSilent({ a:1, b:2 })\r\n  if (key && typeof key === 'object' && !Array.isArray(key)) {\r\n    flattenEntries(key, '', this.data);\r\n    return this;\r\n  }\r\n\r\n  // SINGLE: setSilent('foo', 123)\r\n  setPath(this.data, toPath(key), value);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Get a value by key or return fallback.\r\n * @param {string} key\r\n * @param {any} fallback\r\n * @returns {any}\r\n */\r\nOptionsController.prototype.get = function (key, fallback) {\r\n  // 1. Return from cache if available\r\n  if (Object.prototype.hasOwnProperty.call(this._cache, key)) {\r\n    return this._cache[key];\r\n  }\r\n\r\n  // 2. Slow lookup\r\n  var val = getWithFallback(this.data, key);\r\n  var result = typeof val === 'undefined' ? fallback : val;\r\n\r\n  // 3. Store in cache\r\n  this._cache[key] = result;\r\n\r\n  return result;\r\n};\r\n\r\n/**\r\n * Indica si la clau existeix.\r\n * @param {string} key\r\n * @returns {boolean}\r\n */\r\nOptionsController.prototype.has = function (key) {\r\n  var path = toPath(key);\r\n  if (!path.length) return false;\r\n  var nested = hasPath(this.data, path);\r\n  if (nested) return true;\r\n  // compatibilitat: clau plana\r\n  return Object.prototype.hasOwnProperty.call(this.data, key);\r\n};\r\n\r\n/**\r\n * Retorna una c\u00F2pia superficial de totes les opcions.\r\n * @returns {Object}\r\n */\r\nOptionsController.prototype.all = function () {\r\n  return Object.assign({}, this.data);\r\n};\r\n\r\n// Helpers per gestionar claus amb punts com a rutes nested\r\nfunction toPath(key) {\r\n  if (!key && key !== 0) return [];\r\n  if (Array.isArray(key)) return key;\r\n  return String(key)\r\n    .split('.')\r\n    .filter(function (p) { return p !== ''; });\r\n}\r\n\r\nfunction setPath(obj, path, value) {\r\n  if (!path.length) return;\r\n  var cur = obj;\r\n  for (var i = 0; i < path.length - 1; i += 1) {\r\n    var seg = path[i];\r\n    if (!cur[seg] || typeof cur[seg] !== 'object') {\r\n      cur[seg] = {};\r\n    }\r\n    cur = cur[seg];\r\n  }\r\n  cur[path[path.length - 1]] = value;\r\n}\r\n\r\nfunction getPath(obj, path) {\r\n  var cur = obj;\r\n  for (var i = 0; i < path.length; i += 1) {\r\n    var seg = path[i];\r\n    if (!cur || !Object.prototype.hasOwnProperty.call(cur, seg)) {\r\n      return undefined;\r\n    }\r\n    cur = cur[seg];\r\n  }\r\n  return cur;\r\n}\r\n\r\nfunction hasPath(obj, path) {\r\n  var cur = obj;\r\n  for (var i = 0; i < path.length; i += 1) {\r\n    var seg = path[i];\r\n    if (!cur || !Object.prototype.hasOwnProperty.call(cur, seg)) {\r\n      return false;\r\n    }\r\n    cur = cur[seg];\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction getWithFallback(data, key) {\r\n  var path = toPath(key);\r\n  if (path.length) {\r\n    var nested = getPath(data, path);\r\n    if (typeof nested !== 'undefined') return nested;\r\n  }\r\n  // compatibilitat amb claus planes existents\r\n  if (Object.prototype.hasOwnProperty.call(data, key)) {\r\n    return data[key];\r\n  }\r\n  return undefined;\r\n}\r\n\r\n// Extreu claus de tipus objecte en forma de \"a.b\": valor\r\nfunction flattenEntries(src, prefix, target) {\r\n  for (var k in src) {\r\n    if (!Object.prototype.hasOwnProperty.call(src, k)) continue;\r\n    var path = prefix ? prefix + '.' + k : k;\r\n    var val = src[k];\r\n    if (val && typeof val === 'object' && !Array.isArray(val)) {\r\n      flattenEntries(val, path, target);\r\n    } else {\r\n      target[path] = val;\r\n    }\r\n  }\r\n}\r\n", "/**\r\n * Per-brick event bus controller.\r\n * Manages events shaped as \"namespace:event:target\" with phases before/on/after.\r\n * @constructor\r\n */\r\nexport default function EventBusController(brick) {\r\n  this.brick = brick || null;\r\n  this.handlers = []; // { pattern, compiled, phase, priority, handler }\r\n  this._dispatchCache = {};\r\n  this.phases = ['before', 'on', 'after'];\r\n\r\n  // Expose public EventBus API on the brick\r\n  var bus = this;\r\n  if (brick) {\r\n    brick.events = {\r\n      on: function (pattern, phase, priority, handler, meta) {\r\n        bus.on(pattern, phase, priority, handler, meta);\r\n        return brick; // permet chaining\r\n      },\r\n      off: function (pattern, phase, handler) {\r\n        bus.off(pattern, phase, handler);\r\n        return brick;\r\n      },\r\n      fire: function (eventName, payload) {\r\n        bus.fire(eventName, payload);\r\n        return brick;\r\n      },\r\n      fireAsync: function (eventName, payload) {\r\n        return bus.fireAsync(eventName, payload);\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\n// ---------- Internal utils ----------\r\n\r\nEventBusController.prototype._normalizePriority = function (priority) {\r\n  let pr = typeof priority === 'number' ? priority : 5;\r\n  if (pr < 0) pr = 0;\r\n  if (pr > 10) pr = 10;\r\n  return pr;\r\n};\r\n\r\n/**\r\n * Compiles a subscription pattern.\r\n * Pattern format: \"namespace:type:target\"\r\n * Supports '*' as wildcard in any position.\r\n */\r\nEventBusController.prototype._compilePattern = function (pattern) {\r\n  const parts = (pattern || '').split(':');\r\n  const ns = parts[0];\r\n  const type = parts[1];\r\n  const target = parts[2];\r\n\r\n  return {\r\n    namespace: !ns || ns === '*' ? undefined : ns,\r\n    type: !type || type === '*' ? undefined : type,\r\n    target: !target || target === '*' ? undefined : target,\r\n  };\r\n};\r\n\r\n/**\r\n * Parses an event name into its components.\r\n * Format: \"namespace:type:target\"\r\n */\r\nEventBusController.prototype._parseEventKey = function (eventName) {\r\n  const parts = (eventName || '').split(':');\r\n  return {\r\n    namespace: parts[0] || '',\r\n    type: parts[1] || '',\r\n    target: parts[2] || '',\r\n  };\r\n};\r\n\r\nEventBusController.prototype._matches = function (compiled, key) {\r\n  return (\r\n    (compiled.namespace === undefined || compiled.namespace === key.namespace) &&\r\n    (compiled.type === undefined || compiled.type === key.type) &&\r\n    (compiled.target === undefined || compiled.target === key.target)\r\n  );\r\n};\r\n\r\nEventBusController.prototype._validateEventName = function (eventName) {\r\n  if (typeof eventName !== 'string') {\r\n    console.error('[EventBus] Event name must be a string.', eventName);\r\n    return false;\r\n  }\r\n  const parts = eventName.split(':');\r\n\r\n  // Strict 3-segment rule\r\n  if (parts.length !== 3) {\r\n    console.error('[EventBus] Invalid event name format. Expected exactly \"namespace:type:target\" (3 segments). Got:', eventName);\r\n    return false;\r\n  }\r\n\r\n  // Validation for Dispatch: No empty parts, no wildcards allowed\r\n  if (!parts[0] || parts[0] === '*' || !parts[1] || parts[1] === '*' || !parts[2] || parts[2] === '*') {\r\n    console.error('[EventBus] Invalid event name for dispatch. Wildcards (*) and empty segments are not allowed in namespace, type, or target.', eventName);\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\n/**\r\n * Returns matched handlers grouped by phase for a specific event name.\r\n * Uses caching. The cache key is the full eventName string.\r\n */\r\nEventBusController.prototype._getHandlersForEvent = function (eventName) {\r\n  if (this._dispatchCache[eventName]) {\r\n    return this._dispatchCache[eventName];\r\n  }\r\n\r\n  const key = this._parseEventKey(eventName);\r\n  const result = {\r\n    before: [],\r\n    on: [],\r\n    after: []\r\n  };\r\n\r\n  // this.handlers is expected to be sorted by priority globally\r\n  for (let i = 0; i < this.handlers.length; i += 1) {\r\n    const h = this.handlers[i];\r\n    if (this._matches(h.compiled, key)) {\r\n      if (result[h.phase]) {\r\n        result[h.phase].push(h);\r\n      }\r\n    }\r\n  }\r\n\r\n  this._dispatchCache[eventName] = result;\r\n  return result;\r\n};\r\n\r\n// ---------- Subscription API ----------\r\n\r\n/**\r\n * Register a handler for a pattern and phase.\r\n * pattern: \"namespace:type:target\" (supports '*')\r\n * phase: \"before\" | \"on\" | \"after\" (default \"on\")\r\n * priority: 0..10 (default 5, 0 = highest priority)\r\n */\r\nEventBusController.prototype.on = function (pattern, phase, priority, handler, meta) {\r\n  // Signature compatibility: on(pattern, phase, priority, handler, meta)\r\n  // Optional args shifting\r\n  if (typeof phase === 'function') {\r\n    meta = handler;\r\n    handler = phase;\r\n    phase = 'on';\r\n    priority = undefined;\r\n  } else if (typeof priority === 'function' && typeof handler !== 'function') {\r\n    meta = handler;\r\n    handler = priority;\r\n    priority = undefined;\r\n  }\r\n  if (typeof handler !== 'function') return;\r\n\r\n  let ph = phase || 'on';\r\n  if (this.phases.indexOf(ph) === -1) ph = 'on';\r\n\r\n  const pr = this._normalizePriority(priority);\r\n\r\n  this.handlers.push({\r\n    pattern: pattern,\r\n    compiled: this._compilePattern(pattern),\r\n    phase: ph,\r\n    handler: handler,\r\n    priority: pr,\r\n    meta: meta || null\r\n  });\r\n\r\n  // Sort by priority asc (0 = first)\r\n  this.handlers.sort(function (a, b) {\r\n    const pa = typeof a.priority === 'number' ? a.priority : 5;\r\n    const pb = typeof b.priority === 'number' ? b.priority : 5;\r\n    return pa - pb;\r\n  });\r\n\r\n  // Invalidate cache on any subscription change\r\n  this._dispatchCache = {};\r\n};\r\n\r\n/**\r\n * Unregister handlers filtered by pattern, phase and/or handler.\r\n */\r\nEventBusController.prototype.off = function (pattern, phase, handler) {\r\n  for (let i = this.handlers.length - 1; i >= 0; i -= 1) {\r\n    const h = this.handlers[i];\r\n    if (pattern && h.pattern !== pattern) continue;\r\n    if (phase && h.phase !== phase) continue;\r\n    if (handler && h.handler !== handler) continue;\r\n    this.handlers.splice(i, 1);\r\n  }\r\n  // Invalidate cache on any unsubscription\r\n  this._dispatchCache = {};\r\n};\r\n\r\n// ---------- Pipeline execution (async core) ----------\r\n\r\nEventBusController.prototype._run = async function (eventName, payload) {\r\n  // 1. Validation\r\n  if (!this._validateEventName(eventName)) {\r\n    // Return a dummy error object so awaits don't crash, but do not process\r\n    return {\r\n      event: { name: eventName },\r\n      errors: [{ error: 'Invalid event name format or wildcards in dispatch' }],\r\n      cancel: true\r\n    };\r\n  }\r\n\r\n  // 2. Cache Lookup\r\n  const phases = this.phases;\r\n  const handlersByPhase = this._getHandlersForEvent(eventName);\r\n\r\n  // We parse again just to populate the event meta object accurately\r\n  const key = this._parseEventKey(eventName);\r\n\r\n  // 3. Event Object Construction\r\n  const ev = {\r\n    brick: this.brick || null,\r\n    cancel: false, // if true, skip \"on\" phase\r\n    data: payload,\r\n    errors: [], // collected handler errors\r\n    event: {\r\n      phase: null, // \"before\" | \"on\" | \"after\"\r\n      name: eventName,\r\n      namespace: key.namespace,\r\n      type: key.type,   // Renamed from 'event' to 'type'\r\n      target: key.target,\r\n    },\r\n    stopPhase: false, // if true, stop the current phase loop\r\n  };\r\n\r\n  // 4. Execution Loop\r\n  for (let p = 0; p < phases.length; p += 1) {\r\n    const phase = phases[p];\r\n\r\n    // If canceled, skip \"on\" phase, but continue to \"after\"\r\n    if (phase === 'on' && ev.cancel) continue;\r\n\r\n    ev.event.phase = phase;\r\n    const phaseHandlers = handlersByPhase[phase] || [];\r\n\r\n    for (let i = 0; i < phaseHandlers.length; i += 1) {\r\n      if (ev.stopPhase) break;\r\n\r\n      const h = phaseHandlers[i];\r\n\r\n      try {\r\n        // Pass event and context\r\n        const r = h.handler(ev, { brick: this.brick });\r\n        if (r && typeof r.then === 'function') {\r\n          await r; // support async handlers\r\n        }\r\n      } catch (err) {\r\n        console.error('Error in handler', h.handler, { pattern: h.pattern, phase: h.phase, meta: h.meta }, err);\r\n        ev.errors.push({ error: err, meta: h.meta, pattern: h.pattern, phase: h.phase });\r\n        // Force cancel on error to prevent inconsistent state\r\n        ev.cancel = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  return ev;\r\n};\r\n\r\n// ---------- Public API ----------\r\n\r\n/**\r\n * Fire-and-forget event.\r\n * eventName: \"namespace:type:target\"\r\n */\r\nEventBusController.prototype.fire = function (eventName, payload) {\r\n  // Fire-and-forget; use fireAsync() if you need the final event object.\r\n  this._run(eventName, payload);\r\n};\r\n\r\n/**\r\n * Fire an event and get a Promise with the final event object\r\n * (to inspect cancel/errors/meta).\r\n */\r\nEventBusController.prototype.fireAsync = function (eventName, payload) {\r\n  return this._run(eventName, payload);\r\n};\r\n\r\n", "// Retorna un array amb totes les definicions d'extensions d'un objecte font\r\nconst ExtensionsRegistry = {\r\n  /**\r\n   * Retorna un array amb totes les definicions d'extensions\r\n   * definides a la font (habitualment l'objecte d'extensions passat)\r\n   */\r\n  _cache: {},\r\n\r\n  /**\r\n   * Retorna un array amb totes les definicions d'extensions\r\n   * filtrades per host/kind i amb depend\u00E8ncies resoltes (topological sort).\r\n   *\r\n   * @param {Object} brick - Instancia del brick o objecte de metadates {host:'brick', kind:'grid'}\r\n   */\r\n  all: function (brick) {\r\n    if (!brick || typeof brick !== 'object') {\r\n      console.warn('ExtensionsRegistry.all() called without brick context');\r\n      return [];\r\n    }\r\n\r\n    const host = (brick.host || 'brick').toLowerCase();\r\n    const kind = (brick.kind || '').toLowerCase();\r\n    if (!kind) return [];\r\n\r\n    const cacheKey = host + '::' + kind;\r\n    if (this._cache[cacheKey]) {\r\n      return this._cache[cacheKey];\r\n    }\r\n\r\n    const src = (globalThis.VanillaBrick && globalThis.VanillaBrick.extensions) || {};\r\n    const candidates = {};\r\n    const seenExtensions = new Set();\r\n\r\n    function normalizeRule(rule) {\r\n      if (!rule || typeof rule !== 'object') return null;\r\n      const rHost = (rule.host || 'brick').toLowerCase();\r\n      const rKind = typeof rule.kind === 'string' ? rule.kind.toLowerCase() : '';\r\n      if (!rKind) return null;\r\n      return { host: rHost, kind: rKind };\r\n    }\r\n\r\n    function matchesRule(rule, currentHost, currentKind) {\r\n      if (!rule) return false;\r\n      const hostMatch = rule.host === '*' || rule.host === currentHost;\r\n      const kindMatch = rule.kind === '*' || rule.kind === currentKind;\r\n      return hostMatch && kindMatch;\r\n    }\r\n\r\n    // 1. Initial Filter by host/kind (and prepare candidates map)\r\n    for (const key in src) {\r\n      if (!Object.prototype.hasOwnProperty.call(src, key)) continue;\r\n      const def = src[key];\r\n      if (!def || typeof def !== 'object') continue;\r\n\r\n      // Skip if we've already seen this exact extension definition object\r\n      if (seenExtensions.has(def)) continue;\r\n\r\n      // Normalitzar el nom intern\r\n      if (!def._name) def._name = def.ns || key;\r\n\r\n      const rules = def.for;\r\n      if (!Array.isArray(rules) || !rules.length) {\r\n        console.warn('VanillaBrick extension without valid `for` array, skipped', def._name || key);\r\n        continue;\r\n      }\r\n\r\n      let match = false;\r\n      for (let ri = 0; ri < rules.length; ri += 1) {\r\n        const rule = normalizeRule(rules[ri]);\r\n        if (!rule) continue;\r\n        if (matchesRule(rule, host, kind)) {\r\n          match = true;\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (match) {\r\n        candidates[key] = { name: key, ext: def };\r\n        seenExtensions.add(def);\r\n      }\r\n    }\r\n\r\n    // 2. Recursive Validation & Topological Sort (DFS)\r\n    const sortedList = [];\r\n    // Status: undefined (unvisited), 'visiting', 'ok', 'missing'\r\n    const status = {};\r\n\r\n    function visit(name) {\r\n      if (status[name] === 'ok') return true;\r\n      if (status[name] === 'visiting') return false; // Cycle detection\r\n      if (status[name] === 'missing') return false;\r\n\r\n      let candidate = candidates[name];\r\n\r\n      // If not found by name, search for a candidate with matching .ns\r\n      if (!candidate) {\r\n        for (const k in candidates) {\r\n          if (candidates[k].ext.ns === name) {\r\n            candidate = candidates[k];\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!candidate) {\r\n        status[name] = 'missing';\r\n        return false;\r\n      }\r\n\r\n      status[name] = 'visiting';\r\n\r\n      const reqs = candidate.ext.requires || candidate.ext._requires;\r\n      if (Array.isArray(reqs)) {\r\n        for (let i = 0; i < reqs.length; i++) {\r\n          const depName = reqs[i];\r\n          if (!visit(depName)) {\r\n            status[name] = 'missing'; // Dependency failed\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n\r\n      status[name] = 'ok';\r\n      sortedList.push(candidate);\r\n      return true;\r\n    }\r\n\r\n    for (const name in candidates) {\r\n      visit(name);\r\n    }\r\n\r\n    this._cache[cacheKey] = sortedList;\r\n    return sortedList;\r\n  }\r\n};\r\n\r\nexport default ExtensionsRegistry;\r\n\r\n", "export function isPlainObject(value) {\r\n  if (!value || typeof value !== 'object') return false;\r\n  const proto = Object.getPrototypeOf(value);\r\n  return proto === Object.prototype || proto === null;\r\n}\r\n\r\nexport function isPollutionKey(key) {\r\n  return key === '__proto__' || key === 'prototype' || key === 'constructor';\r\n}\r\n\r\nexport function assertSafeValue(value, path) {\r\n  // We allow everything now to avoid breaking DOM element references in options\r\n  return { ok: true };\r\n}\r\n\r\nexport function deepCloneOptions(value, path) {\r\n  const currentPath = path || '';\r\n  const valid = assertSafeValue(value, currentPath || '<root>');\r\n  if (!valid.ok) {\r\n    // unsupported value: keep reference\r\n    return value;\r\n  }\r\n\r\n  if (Array.isArray(value)) {\r\n    const arr = new Array(value.length);\r\n    for (let i = 0; i < value.length; i += 1) {\r\n      arr[i] = deepCloneOptions(value[i], currentPath ? currentPath + '[' + i + ']' : '[' + i + ']');\r\n    }\r\n    return arr;\r\n  }\r\n\r\n  if (isPlainObject(value)) {\r\n    const obj = {};\r\n    for (const key in value) {\r\n      if (!Object.prototype.hasOwnProperty.call(value, key)) continue;\r\n      if (isPollutionKey(key)) continue;\r\n      const childPath = currentPath ? currentPath + '.' + key : key;\r\n      obj[key] = deepCloneOptions(value[key], childPath);\r\n    }\r\n    return obj;\r\n  }\r\n\r\n  // primitive\r\n  return value;\r\n}\r\n\r\nexport function deepMergeOptions(dest) {\r\n  if (!isPlainObject(dest)) {\r\n    dest = {};\r\n  }\r\n\r\n  for (let si = 1; si < arguments.length; si += 1) {\r\n    const src = arguments[si];\r\n    if (src === null || typeof src === 'undefined') continue;\r\n    if (!isPlainObject(src)) {\r\n      const path = '<root>';\r\n      return deepCloneOptions(src, path);\r\n    }\r\n\r\n    for (const key in src) {\r\n      if (!Object.prototype.hasOwnProperty.call(src, key)) continue;\r\n      if (isPollutionKey(key)) continue;\r\n      const val = src[key];\r\n      const path = key;\r\n\r\n      if (Array.isArray(val)) {\r\n        dest[key] = deepCloneOptions(val, path);\r\n        continue;\r\n      }\r\n\r\n      if (isPlainObject(val)) {\r\n        if (!isPlainObject(dest[key])) {\r\n          dest[key] = {};\r\n        }\r\n        deepMergeOptions(dest[key], val);\r\n        continue;\r\n      }\r\n\r\n      const valid = assertSafeValue(val, path);\r\n      dest[key] = val;\r\n    }\r\n  }\r\n\r\n  return dest;\r\n}\r\n\r\nexport function mergeOptions() {\r\n  const args = Array.prototype.slice.call(arguments);\r\n  args.unshift({});\r\n  return deepMergeOptions.apply(null, args);\r\n}\r\n", "import ExtensionsRegistry from './extensionsRegistry.js';\r\nimport { mergeOptions } from '../utils/options.js';\r\n\r\nfunction parseForPattern(pattern) {\r\n  if (!pattern) return { ns: '', action: '', target: '*' };\r\n  const bits = String(pattern).split(':');\r\n  const ns = bits[0] || '';\r\n  const action = bits[1] || '';\r\n  let target = bits.length > 2 ? bits.slice(2).join(':') : '*';\r\n  if (!target) target = '*';\r\n  return { ns: ns, action: action, target: target };\r\n}\r\n\r\nfunction isArrowFunction(fn) {\r\n  if (typeof fn !== 'function') return false;\r\n  // Arrow functions have no prototype and typically stringify with \"=>\"\r\n  if (fn.prototype) return false;\r\n  try {\r\n    return fn.toString().indexOf('=>') !== -1;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default function ExtensionsController(brick) {\r\n  this.brick = brick;\r\n  this.extensions = {};\r\n  this._destroyHook = false;\r\n}\r\n\r\nExtensionsController.prototype.applyAll = function () {\r\n  const registry = ExtensionsRegistry;\r\n  if (!registry || typeof registry.all !== 'function') return;\r\n\r\n  // Now registry returns a filtered, sorted, valid list\r\n  const defs = registry.all(this.brick) || [];\r\n\r\n  if (defs.length == 0) {\r\n    console.warn(\"No extensions found for this brick\", this.brick);\r\n    return;\r\n  }\r\n\r\n  // Phase 1: merge options before any init()\r\n  const optionsCtrl = this.brick._controllers && this.brick._controllers.options;\r\n\r\n  if (!mergeOptions || typeof mergeOptions !== 'function') {\r\n    console.error('mergeOptions is missing; cannot merge extension defaults safely');\r\n  } else if (optionsCtrl && typeof optionsCtrl.all === 'function') {\r\n    const userOptions = optionsCtrl.all();\r\n    const kind = (this.brick.kind || '').toLowerCase();\r\n    const coreDefaults = [];\r\n    const extDefaults = [];\r\n\r\n    for (let i = 0; i < defs.length; i += 1) {\r\n      const def = defs[i];\r\n      const defOpts = def.ext.options || def.ext._options;\r\n      if (!defOpts) continue;\r\n      const defName = (def.ext.ns || def.name || '').toLowerCase();\r\n      if (defName && kind && defName === kind + '-core') {\r\n        coreDefaults.push(defOpts);\r\n      } else {\r\n        extDefaults.push(defOpts);\r\n      }\r\n    }\r\n\r\n    const mergedOptions = mergeOptions.apply(null, coreDefaults.concat(extDefaults, [userOptions]));\r\n    optionsCtrl.data = mergedOptions;\r\n    optionsCtrl._cache = {};\r\n  }\r\n\r\n  // Phase 2: install + init extensions\r\n  for (let i = 0; i < defs.length; i += 1) {\r\n    this._install(defs[i]);\r\n  }\r\n\r\n  this._ensureDestroyHook();\r\n};\r\n\r\nExtensionsController.prototype._install = function (def) {\r\n  const brick = this.brick;\r\n  const name = def.name || def.ext.ns || null;\r\n  const ns = def.ext.ns || name;\r\n\r\n  if (!name) {\r\n    console.warn('VanillaBrick extension without name/ns, skipped', def);\r\n    return;\r\n  }\r\n\r\n  if (this.extensions[name]) return;\r\n\r\n  const ext = {\r\n    name: name,\r\n    def: def.ext,\r\n    brick: brick,\r\n  };\r\n  // Contexts with prototype chaining to preserve access to brick/extension state\r\n  const ctxExt = Object.create(ext);\r\n  ctxExt.brick = brick;\r\n  ctxExt.ext = ext;\r\n  const ctxApi = Object.create(brick);\r\n  ctxApi.brick = brick;\r\n  ctxApi.ext = ext;\r\n\r\n  // attach internal extension methods to ext (bound + wrapped)\r\n  const runtime = brick._controllers.runtime;\r\n  if (def.ext.extension && typeof def.ext.extension === 'object') {\r\n    for (const k in def.ext.extension) {\r\n      if (!Object.prototype.hasOwnProperty.call(def.ext.extension, k)) continue;\r\n      const fn = def.ext.extension[k];\r\n      if (typeof fn === 'function') {\r\n        if (isArrowFunction(fn)) {\r\n          console.warn('VanillaBrick: arrow functions discouraged for extension private method', { ns: name, fn: k, kind: brick.kind });\r\n        }\r\n        const meta = { type: 'extension-private', ext: name, brick: brick.id, fnName: k };\r\n        ext[k] = function () {\r\n          const args = Array.prototype.slice.call(arguments);\r\n          if (runtime && typeof runtime.execute === 'function') {\r\n            return runtime.execute(fn, ctxExt, args, meta);\r\n          }\r\n          return fn.apply(ctxExt, args);\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  // init hook (this === ext, wrapped)\r\n  if (typeof def.ext.init === 'function') {\r\n    const runtime = brick._controllers.runtime;\r\n    try {\r\n      let res;\r\n      if (runtime && typeof runtime.execute === 'function') {\r\n        res = runtime.execute(def.ext.init, ext, [], {\r\n          type: 'init',\r\n          ext: name,\r\n          brick: brick.id,\r\n          fnName: 'init'\r\n        });\r\n      } else {\r\n        res = def.ext.init.call(ext);\r\n      }\r\n      if (res === false) return;\r\n    } catch (err) {\r\n      console.error('VanillaBrick extension \"' + name + '\" init() failed', err);\r\n      return;\r\n    }\r\n  }\r\n\r\n  // expose API on brick namespace (wrapped) only after successful init\r\n  if (def.ext.brick && typeof def.ext.brick === 'object') {\r\n    if (!brick[ns]) brick[ns] = {};\r\n    const nsObj = brick[ns];\r\n    for (const apiName in def.ext.brick) {\r\n      if (!Object.prototype.hasOwnProperty.call(def.ext.brick, apiName)) continue;\r\n      const apiFn = def.ext.brick[apiName];\r\n      if (typeof apiFn !== 'function') {\r\n        console.warn('VanillaBrick extension \"' + name + '\" api \"' + apiName + '\" is not a function');\r\n        continue;\r\n      }\r\n      if (isArrowFunction(apiFn)) {\r\n        console.warn('VanillaBrick: arrow functions discouraged for brick API', { ns: name, api: apiName, kind: brick.kind });\r\n      }\r\n      if (nsObj[apiName]) {\r\n        console.warn('VanillaBrick extension overwriting API ' + ns + '.' + apiName);\r\n      }\r\n      const meta = { type: 'brick-api', ext: name, brick: brick.id, fnName: ns + '.' + apiName };\r\n      nsObj[apiName] = function () {\r\n        const args = Array.prototype.slice.call(arguments);\r\n        if (runtime && typeof runtime.execute === 'function') {\r\n          return runtime.execute(apiFn, ctxApi, args, meta);\r\n        }\r\n        return apiFn.apply(ctxApi, args);\r\n      };\r\n    }\r\n  }\r\n\r\n  // register event listeners\r\n  if (Array.isArray(def.ext.events) &&\r\n    def.ext.events.length &&\r\n    brick._controllers &&\r\n    brick._controllers.events &&\r\n    typeof brick._controllers.events.on === 'function') {\r\n\r\n    for (let li = 0; li < def.ext.events.length; li += 1) {\r\n      const evt = def.ext.events[li];\r\n      if (!evt) continue;\r\n      const parsed = parseForPattern(evt.for);\r\n      const pattern = parsed.ns + ':' + parsed.action + ':' + parsed.target;\r\n\r\n      ['before', 'on', 'after'].forEach(function (phase) {\r\n        const desc = evt[phase];\r\n        if (!desc || typeof desc.fn !== 'function') return;\r\n        if (isArrowFunction(desc.fn)) {\r\n          console.warn('VanillaBrick: arrow functions discouraged for event handler', { ns: name, event: pattern, phase: phase, kind: brick.kind });\r\n        }\r\n        const pr = (typeof desc.priority === 'number') ? desc.priority : undefined;\r\n        const pattern = parsed.ns + ':' + parsed.action + ':' + parsed.target;\r\n        const meta = {\r\n          type: 'event',\r\n          ext: name,\r\n          brick: brick.id,\r\n          event: pattern,\r\n          phase: phase,\r\n          fnName: desc.fn.name || 'anon'\r\n        };\r\n        const handler = function (ev) {\r\n          const args = [ev];\r\n          if (runtime && typeof runtime.execute === 'function') {\r\n            return runtime.execute(desc.fn, ctxExt, args, meta);\r\n          }\r\n          return desc.fn.apply(ctxExt, args);\r\n        };\r\n        brick._controllers.events.on(pattern, phase, pr, handler, { ext: name, fn: desc.fn.name || 'anon', extInstance: ext });\r\n      });\r\n    }\r\n  }\r\n\r\n  this.extensions[name] = ext;\r\n};\r\n\r\nExtensionsController.prototype._ensureDestroyHook = function () {\r\n  if (this._destroyHook) return;\r\n\r\n  const brick = this.brick;\r\n  if (!brick ||\r\n    !brick._controllers ||\r\n    !brick._controllers.events ||\r\n    typeof brick._controllers.events.on !== 'function') {\r\n    return;\r\n  }\r\n\r\n  this._destroyHook = true;\r\n  const self = this;\r\n\r\n  brick._controllers.events.on(\r\n    'brick:status:destroyed',\r\n    'on',\r\n    0,\r\n    function () {\r\n      for (const name in self.extensions) {\r\n        if (!Object.prototype.hasOwnProperty.call(self.extensions, name)) continue;\r\n        const ext = self.extensions[name];\r\n        if (!ext || !ext.def) continue;\r\n        const def = ext.def;\r\n\r\n        if (typeof def.destroy === 'function') {\r\n          const runtime = brick._controllers.runtime;\r\n          try {\r\n            if (runtime && typeof runtime.execute === 'function') {\r\n              runtime.execute(def.destroy, ext, [], {\r\n                type: 'destroy',\r\n                ext: name,\r\n                brick: brick.id,\r\n                fnName: 'destroy'\r\n              });\r\n            } else {\r\n              def.destroy.call(ext);\r\n            }\r\n          } catch (err) {\r\n            console.error('VanillaBrick extension \"' + (def.ns || name || '?') + '\" destroy() failed', err);\r\n          }\r\n        }\r\n      }\r\n\r\n      self.extensions = {};\r\n    }\r\n  );\r\n};\r\n", "import StatusController from '../controllers/statusController.js';\r\nimport RuntimeController from '../controllers/runtimeController.js';\r\nimport OptionsController from '../controllers/optionsController.js';\r\nimport EventBusController from '../controllers/eventsController.js';\r\nimport ExtensionsController from '../controllers/extensionsController.js';\r\n\r\n/**\r\n * Brick constructor.\r\n * @constructor\r\n * @param {Object} options\r\n */\r\nexport default function Brick(options) {\r\n  const opts = options && typeof options === 'object' ? Object.assign({}, options) : {};\r\n  opts.id = opts.id || this._nextId();\r\n  opts.host = (opts.host || 'brick').toLowerCase();\r\n  opts.kind = (opts.kind || 'brick').toLowerCase();\r\n  Object.defineProperty(this, 'id', {\r\n    value: opts.id,\r\n    writable: false,\r\n    configurable: false,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(this, 'host', {\r\n    value: opts.host,\r\n    writable: false,\r\n    configurable: false,\r\n    enumerable: true\r\n  });\r\n  Object.defineProperty(this, 'kind', {\r\n    value: opts.kind,\r\n    writable: false,\r\n    configurable: false,\r\n    enumerable: true\r\n  });\r\n  const controllers = Object.freeze({\r\n    status: new StatusController(this),\r\n    runtime: new RuntimeController(this),\r\n    options: new OptionsController(this, opts),\r\n    events: new EventBusController(this),\r\n    extensions: new ExtensionsController(this),\r\n  });\r\n  Object.defineProperty(this, '_controllers', {\r\n    value: controllers,\r\n    writable: false,\r\n    configurable: false,\r\n    enumerable: false\r\n  });\r\n\r\n  controllers.extensions.applyAll();\r\n  controllers.status.set('ready', { options: opts });\r\n}\r\n\r\nBrick.prototype.destroy = function () {\r\n  this._controllers.status.set('destroyed');\r\n};\r\n\r\nObject.defineProperty(Brick, '_idCounter', {\r\n  value: 0,\r\n  writable: true,\r\n  configurable: false,\r\n  enumerable: false\r\n});\r\n\r\nObject.defineProperty(Brick.prototype, '_nextId', {\r\n  value: function () {\r\n    Brick._idCounter += 1;\r\n    return 'brick-' + Brick._idCounter;\r\n  },\r\n  writable: false,\r\n  configurable: false,\r\n  enumerable: false\r\n});\r\n", "export function setupServices(VanillaBrick) {\r\n    // Ensure runtime services registry\r\n    VanillaBrick.runtime.services = VanillaBrick.runtime.services || {};\r\n\r\n    // Public accessor\r\n    VanillaBrick.service = function (name) {\r\n        // Check if running\r\n        if (VanillaBrick.runtime.services[name]) {\r\n            return VanillaBrick.runtime.services[name];\r\n        }\r\n        // Try to start\r\n        return VanillaBrick.base.serviceStart(name);\r\n    };\r\n\r\n    // Internal helpers in base\r\n    VanillaBrick.base.serviceStart = function (name) {\r\n        if (VanillaBrick.runtime.services[name]) {\r\n            return VanillaBrick.runtime.services[name];\r\n        }\r\n\r\n        const def = VanillaBrick.services[name];\r\n        if (!def) {\r\n            console.warn(\"Service definition not found:\", name);\r\n            return null;\r\n        }\r\n\r\n        const opts = Object.assign({}, def);\r\n        opts.id = name; // Service name as ID\r\n        opts.host = 'service';\r\n        opts.kind = opts.kind || 'service';\r\n\r\n        // Create brick instance\r\n        const brick = new VanillaBrick.brick(opts);\r\n\r\n        // Register instance\r\n        VanillaBrick.runtime.services[name] = brick;\r\n\r\n        if (VanillaBrick.runtime.bricks && Array.isArray(VanillaBrick.runtime.bricks)) {\r\n            VanillaBrick.runtime.bricks.push(brick);\r\n        }\r\n\r\n        return brick;\r\n    };\r\n\r\n    VanillaBrick.base.serviceStop = function (name) {\r\n        const service = VanillaBrick.runtime.services[name];\r\n        if (!service) return;\r\n\r\n        if (service.destroy) service.destroy();\r\n\r\n        delete VanillaBrick.runtime.services[name];\r\n    };\r\n}\r\n", "export function setupBootstrap(VanillaBrick) {\r\n  VanillaBrick.base = VanillaBrick.base || {};\r\n  VanillaBrick.configs = VanillaBrick.configs || {};\r\n\r\n  const registry = {\r\n    list: [],\r\n    byId: {},\r\n  };\r\n\r\n  function loadConfigs(scope) {\r\n    if (typeof document === 'undefined') return;\r\n    const root = scope || document;\r\n    if (!root.querySelectorAll) return;\r\n    const scripts = root.querySelectorAll('script[type=\"application/json\"][data-brick]');\r\n    for (let i = 0; i < scripts.length; i += 1) {\r\n      const node = scripts[i];\r\n      const raw = node.textContent || '';\r\n      if (!raw.trim()) continue;\r\n      try {\r\n        const parsed = JSON.parse(raw);\r\n        if (!parsed || typeof parsed !== 'object') continue;\r\n        for (const key in parsed) {\r\n          if (!Object.prototype.hasOwnProperty.call(parsed, key)) continue;\r\n          const base = (VanillaBrick.configs[key] && typeof VanillaBrick.configs[key] === 'object')\r\n            ? VanillaBrick.configs[key]\r\n            : {};\r\n          const next = parsed[key];\r\n          if (!next || typeof next !== 'object') continue;\r\n          VanillaBrick.configs[key] = Object.assign({}, base, next);\r\n        }\r\n      } catch (err) {\r\n        console.warn('VanillaBrick: invalid JSON in data-brick config', err);\r\n      }\r\n    }\r\n  }\r\n\r\n  function readKind(el) {\r\n    if (!el) return undefined;\r\n    // data-kind o data-brick-kind\r\n    const k =\r\n      el.getAttribute('brick-kind') ||\r\n      el.getAttribute('data-kind') ||\r\n      el.getAttribute('data-brick-kind') ||\r\n      (el.dataset && (el.dataset.kind || el.dataset.brickKind));\r\n    return k ? String(k).toLowerCase() : undefined;\r\n  }\r\n\r\n  function createBrickFromElement(el) {\r\n    if (!el) return null;\r\n\r\n    // Ja inicialitzat?\r\n    if (el.__brickInstance) return el.__brickInstance;\r\n\r\n    const opts = {};\r\n\r\n    const config = el.id && VanillaBrick.configs ? VanillaBrick.configs[el.id] : null;\r\n    if (config && typeof config === 'object') {\r\n      Object.assign(opts, config);\r\n    }\r\n\r\n    if (el.id) {\r\n      opts.id = el.id;\r\n    }\r\n\r\n    const kind = readKind(el);\r\n    if (kind) {\r\n      opts.kind = kind;\r\n    }\r\n\r\n    // NESTED: tot el que \u00E9s de DOM sota dom.{}\r\n    opts.dom = {\r\n      id: el.id || null,\r\n      element: el\r\n    };\r\n\r\n    const brick = new VanillaBrick.brick(opts);\r\n\r\n    el.__brickInstance = brick;\r\n    registry.list.push(brick);\r\n    registry.byId[brick.id] = brick;\r\n    console.log(\"Brick\", el.id, brick);\r\n    return brick;\r\n  }\r\n\r\n  function bootstrap(root) {\r\n    if (typeof document === 'undefined') return [];\r\n    const scope = root || document;\r\n    if (!scope.querySelectorAll) return [];\r\n\r\n    // Carrega tots els blocs de configuraci\u00F3 abans de crear bricks\r\n    loadConfigs(scope);\r\n\r\n    const nodes = scope.querySelectorAll('.vb');\r\n    const created = [];\r\n\r\n    for (let i = 0; i < nodes.length; i++) {\r\n      const brick = createBrickFromElement(nodes[i]);\r\n      if (brick) created.push(brick);\r\n    }\r\n\r\n    return created;\r\n  }\r\n\r\n  VanillaBrick.base.bootstrap = bootstrap;\r\n  VanillaBrick.runtime = VanillaBrick.runtime || {};\r\n  VanillaBrick.runtime.bricks = registry.list || [];\r\n  VanillaBrick.base.getBrick = function (id) {\r\n    return registry.byId[id] || null;\r\n  };\r\n\r\n  if (typeof document !== 'undefined') {\r\n    var bootstrapped = false;\r\n    function runOnce() {\r\n      if (bootstrapped) return;\r\n      bootstrapped = true;\r\n      bootstrap();\r\n    }\r\n\r\n    if (document.readyState === 'loading') {\r\n      document.addEventListener('DOMContentLoaded', function () {\r\n        runOnce();\r\n      });\r\n    } else {\r\n      // DOM ja llest: posposem al next tick per deixar executar scripts defer restants\r\n      setTimeout(runOnce, 0);\r\n    }\r\n  }\r\n}\r\n\r\n", "export const domCss = {\r\n  for: [{ host: 'brick', kind: '*' }],\r\n  requires: ['dom'],\r\n  ns: 'css',\r\n  options: {},\r\n\r\n  brick: {\r\n    addClass: function (className) {\r\n      const el = this.dom.element();\r\n      if (!el || !className) return;\r\n      if (el.classList && el.classList.add) {\r\n        el.classList.add(className);\r\n      } else {\r\n        const cur = el.className || '';\r\n        if ((' ' + cur + ' ').indexOf(' ' + className + ' ') === -1) {\r\n          el.className = (cur ? cur + ' ' : '') + className;\r\n        }\r\n      }\r\n    },\r\n    removeClass: function (className) {\r\n      const el = this.dom.element();\r\n      if (!el || !className) return;\r\n      if (el.classList && el.classList.remove) {\r\n        el.classList.remove(className);\r\n      } else {\r\n        const cur = el.className || '';\r\n        el.className = (' ' + cur + ' ').replace(' ' + className + ' ', ' ').trim();\r\n      }\r\n    },\r\n    hasClass: function (className) {\r\n      const el = this.dom.element();\r\n      if (!el || !className) return false;\r\n      if (el.classList && el.classList.contains) return el.classList.contains(className);\r\n      const cur = el.className || '';\r\n      return (' ' + cur + ' ').indexOf(' ' + className + ' ') !== -1;\r\n    },\r\n    toggleClass: function (className, force) {\r\n      const el = this.dom.element();\r\n      if (!el || !className) return;\r\n      if (el.classList && typeof el.classList.toggle === 'function') {\r\n        if (typeof force === 'boolean') el.classList.toggle(className, force);\r\n        else el.classList.toggle(className);\r\n      } else {\r\n        const has = this.css.hasClass(className);\r\n        if (typeof force === 'boolean') {\r\n          if (force && !has) this.css.addClass(className);\r\n          if (!force && has) this.css.removeClass(className);\r\n        } else {\r\n          if (has) this.css.removeClass(className);\r\n          else this.css.addClass(className);\r\n        }\r\n      }\r\n    },\r\n    show: function () {\r\n      const el = this.dom.element();\r\n      if (!el) return;\r\n      el.style.display = '';\r\n    },\r\n    hide: function () {\r\n      const el = this.dom.element();\r\n      if (!el) return;\r\n      el.style.display = 'none';\r\n    },\r\n    setStyle: function (prop, value) {\r\n      const el = this.dom.element();\r\n      if (!el || !prop) return;\r\n      el.style[prop] = value;\r\n    },\r\n    getStyle: function (prop) {\r\n      const el = this.dom.element();\r\n      if (!el || !prop || typeof window === 'undefined' || !window.getComputedStyle) return null;\r\n      const cs = window.getComputedStyle(el);\r\n      return cs ? (cs.getPropertyValue(prop) || cs[prop]) : null;\r\n    },\r\n    setVar: function (name, value) {\r\n      const el = this.dom.element();\r\n      if (!el || !name) return;\r\n      if (name.indexOf('--') !== 0) name = '--' + name;\r\n      el.style.setProperty(name, value);\r\n    },\r\n    getVar: function (name) {\r\n      const el = this.dom.element();\r\n      if (!el || !name || typeof window === 'undefined' || !window.getComputedStyle) return null;\r\n      if (name.indexOf('--') !== 0) name = '--' + name;\r\n      const cs = window.getComputedStyle(el);\r\n      return cs ? cs.getPropertyValue(name) : null;\r\n    }\r\n  },\r\n\r\n  extension: {},\r\n  events: [],\r\n\r\n  init: function () {\r\n    if (!this.brick || !this.brick.dom || typeof this.brick.dom.element !== 'function') {\r\n      console.warn('VanillaBrick domCss requires dom extension active', this.brick && this.brick.id);\r\n      return false;\r\n    }\r\n    const el = this.brick.dom.element();\r\n    if (!el) {\r\n      console.warn('VanillaBrick domCss: no DOM element resolved', this.brick && this.brick.id);\r\n      return false;\r\n    }\r\n    return true;\r\n  },\r\n\r\n  destroy: function () { }\r\n};\r\n\n\nexport default domCss;\r\n\r\n", "export const domEvents = {\r\n  for: [{ host: 'brick', kind: '*' }],\r\n  requires: ['dom'],\r\n  ns: 'dom',\r\n  options: {},\r\n\r\n  brick: {},\r\n\r\n  extension: {},\r\n\r\n  events: [\r\n    {\r\n      for: 'brick:status:ready',\r\n      on: {\r\n        fn: function () {\r\n          const el = this.brick.dom.element();\r\n          if (!el || typeof el.addEventListener !== 'function') return;\r\n          let listeners = this.brick.options.get(\"dom.events.listeners\", []);\r\n          if (!Array.isArray(listeners)) listeners = [];\r\n          const self = this;\r\n          const defaultMap = [\r\n            { type: 'click', eventName: 'dom:mouse:click' },\r\n            { type: 'mouseenter', eventName: 'dom:hover:on' },\r\n            { type: 'mouseleave', eventName: 'dom:hover:off' },\r\n            { type: 'mousedown', eventName: 'dom:mouse:down' },\r\n            { type: 'mouseup', eventName: 'dom:mouse:up' },\r\n          ];\r\n\r\n          for (let i = 0; i < defaultMap.length; i += 1) {\r\n            const entry = defaultMap[i];\r\n            const handler = function handler(domEvent) {\r\n              self.brick.events.fire(entry.eventName, {\r\n                domEvent: domEvent,\r\n                element: el,\r\n              });\r\n            };\r\n            el.addEventListener(entry.type, handler);\r\n            listeners.push({ type: entry.type, handler: handler, source: 'default' });\r\n          }\r\n          this.brick.options.setSilent(\"dom.events.listeners\", listeners);\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'brick:status:destroyed',\r\n      before: {\r\n        fn: function () {\r\n          const el = this.brick && this.brick.dom.element && this.brick.dom.element();\r\n          if (!el || typeof el.removeEventListener !== 'function') return;\r\n          const listeners = this.brick.options.get(\"dom.events.listeners\", []);\r\n          if (!Array.isArray(listeners)) return;\r\n          for (let i = 0; i < listeners.length; i += 1) {\r\n            const ln = listeners[i];\r\n            el.removeEventListener(ln.type, ln.handler, ln.options);\r\n          }\r\n          this.brick.options.setSilent(\"dom.events.listeners\", []);\r\n        }\r\n      }\r\n    }\r\n  ],\r\n\r\n  init: function () { },\r\n  destroy: function () { }\r\n};\r\n\n\nexport default domEvents;\r\n\r\n", "export const dom = {\r\n  for: [{ host: 'brick', kind: '*' }],\r\n  requires: [],\r\n  ns: 'dom',\r\n  options: {},\r\n\r\n  brick: {\r\n    element: function () {\r\n      return this.options.get('dom.element', null);\r\n    },\r\n    on: function (type, handler, options) {\r\n      const el = this.options.get('dom.element', null);\r\n      if (!el || typeof el.addEventListener !== 'function' || typeof handler !== 'function') return;\r\n      el.addEventListener(type, handler, options);\r\n      let listeners = this.options.get('dom.listeners', []);\r\n      if (!Array.isArray(listeners)) listeners = [];\r\n      listeners.push({ type: type, handler: handler, options: options, source: 'api' });\r\n      this.options.setSilent('dom.listeners', listeners);\r\n    },\r\n    off: function (type, handler, options) {\r\n      const el = this.options.get('dom.element', null);\r\n      if (!el || typeof el.removeEventListener !== 'function' || typeof handler !== 'function') return;\r\n      el.removeEventListener(type, handler, options);\r\n      const listeners = this.options.get('dom.listeners', []);\r\n      if (!Array.isArray(listeners)) return;\r\n      for (let i = listeners.length - 1; i >= 0; i -= 1) {\r\n        const ln = listeners[i];\r\n        if (ln.type === type && ln.handler === handler) {\r\n          listeners.splice(i, 1);\r\n        }\r\n      }\r\n      this.options.setSilent('dom.listeners', listeners);\r\n    }\r\n  },\r\n\r\n  extension: {\r\n    _resolveElement: function (value) {\r\n      if (!value) return null;\r\n      if (typeof Element !== 'undefined' && value instanceof Element) return value;\r\n      if (value && value.nodeType === 1) return value;\r\n      if (typeof value === 'function') {\r\n        try {\r\n          return value();\r\n        } catch (err) {\r\n          return null;\r\n        }\r\n      }\r\n      return null;\r\n    },\r\n    _resolveById: function (id) {\r\n      if (!id || typeof id !== 'string') return null;\r\n      if (typeof document === 'undefined') return null;\r\n      return document.getElementById(id) || null;\r\n    }\r\n  },\r\n\r\n  events: [],\r\n\r\n  init: function () {\r\n    if (!this.brick) return false;\r\n    const elemOpt = this.brick.options.get('dom.element', null);\r\n    const idOpt = this.brick.options.get('dom.id', null);\r\n\r\n    let el = this._resolveElement(elemOpt);\r\n    if (!el && idOpt) {\r\n      el = this._resolveById(idOpt);\r\n    }\r\n\r\n    if (!el) {\r\n      console.warn('VanillaBrick dom extension requires a DOM element (options.dom.element) or a valid options.dom.id', this.brick.id);\r\n      return false;\r\n    }\r\n\r\n    if (elemOpt && !this._resolveElement(elemOpt)) {\r\n      console.warn('VanillaBrick dom element must be a DOM node or factory, not an id. Use options.dom.id to resolve by id.', this.brick.id);\r\n    }\r\n\r\n    this.brick.options.set('dom.element', el);\r\n    return true;\r\n  },\r\n\r\n  destroy: function () {\r\n    const el = this.brick.options.get('dom.element', null);\r\n    const listeners = this.brick.options.get('dom.listeners', null);;\r\n    if (el && Array.isArray(listeners)) {\r\n      for (let i = 0; i < listeners.length; i += 1) {\r\n        const ln = listeners[i];\r\n        if (ln && ln.type && ln.handler) {\r\n          el.removeEventListener(ln.type, ln.handler, ln.options);\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\n\nexport default dom;\r\n\r\n", "const DATA_SAMPLE_ROWS = [\r\n  { code: '1', name: 'one', key: 1 },\r\n  { code: '2', name: 'two', key: 2 },\r\n  { code: '3', name: 'three', key: 3 },\r\n  { code: '4', name: 'four', key: 4 },\r\n  { code: '5', name: 'five', key: 5 },\r\n  { code: '6', name: 'six', key: 6 },\r\n  { code: '7', name: 'seven', key: 7 },\r\n  { code: '8', name: 'eight', key: 8 },\r\n  { code: '9', name: 'nine', key: 9 },\r\n  { code: '10', name: 'ten', key: 10 },\r\n  { code: '11', name: 'eleven', key: 11 },\r\n  { code: '12', name: 'twelve', key: 12 },\r\n  { code: '13', name: 'thirteen', key: 13 },\r\n  { code: '14', name: 'fourteen', key: 14 },\r\n  { code: '15', name: 'fifteen', key: 15 },\r\n  { code: '16', name: 'sixteen', key: 16 },\r\n  { code: '17', name: 'seventeen', key: 17 },\r\n  { code: '18', name: 'eighteen', key: 18 },\r\n  { code: '19', name: 'nineteen', key: 19 },\r\n  { code: '20', name: 'twenty', key: 20 },\r\n];\r\n\r\nexport const store = {\r\n  for: [\r\n    { host: 'brick', kind: 'form' },\r\n    { host: 'brick', kind: 'grid' }\r\n  ],\r\n  requires: [],\r\n  ns: 'store',\r\n  options: {},\r\n\r\n  // API p\u00FAblica sobre el brick (this === brick)\r\n  brick: {\r\n    load: function () {\r\n      return this.options.get('store.data', []);\r\n    },\r\n    set: function (data) {\r\n      if (data === null) return;\r\n      const previous = this.options.get('store.data', []);\r\n      data = Array.isArray(data) ? data.slice() : [data];\r\n\r\n      this.events.fire('store:data:set', {\r\n        previous: previous,\r\n        data: data\r\n      });\r\n\r\n      return data;\r\n    },\r\n    setAsync: async function (data) {\r\n      const previous = this.options.get('store.data', []);\r\n      data = Array.isArray(data) ? data.slice() : [];\r\n\r\n      await this.events.fireAsync('store:data:set', {\r\n        previous: previous,\r\n        data: data\r\n      });\r\n\r\n      return data;\r\n    },\r\n    all: function () {\r\n      return this.store.load();\r\n    },\r\n    get: function (index) {\r\n      const arr = this.store.load();\r\n      if (typeof index !== 'number') return null;\r\n      if (index < 0 || index >= arr.length) return null;\r\n      return arr[index];\r\n    }\r\n  },\r\n\r\n  // Helpers interns (this === ext)\r\n  extension: {\r\n    _normalizeArray: function (value, fallback) {\r\n      if (Array.isArray(value)) return value.slice();\r\n      return Array.isArray(fallback) ? fallback.slice() : [];\r\n    },\r\n    _sortRows: function (rows, field, dir, compareFn) {\r\n      const arr = Array.isArray(rows) ? rows.slice() : [];\r\n      const cmp = typeof compareFn === 'function'\r\n        ? function (a, b) { return compareFn(a, b, dir); }\r\n        : function (a, b) {\r\n          const va = a && Object.prototype.hasOwnProperty.call(a, field) ? a[field] : undefined;\r\n          const vb = b && Object.prototype.hasOwnProperty.call(b, field) ? b[field] : undefined;\r\n          let res = 0;\r\n          if (va === vb) res = 0;\r\n          else if (va === undefined || va === null) res = -1;\r\n          else if (vb === undefined || vb === null) res = 1;\r\n          else if (typeof va === 'number' && typeof vb === 'number') res = va - vb;\r\n          else res = String(va).localeCompare(String(vb));\r\n          return dir === 'desc' ? -res : res;\r\n        };\r\n      arr.sort(cmp);\r\n      return arr;\r\n    }\r\n  },\r\n\r\n  events: [\r\n    {\r\n      for: 'brick:status:ready',\r\n      on: {\r\n        fn: function (ev) {\r\n          //const storeData = this.brick.options.get('store:data', null);\r\n          const storeData = this._normalizeArray(DATA_SAMPLE_ROWS, []);\r\n          this.brick.options.setSilent('store.data', storeData);\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'store:data:set',\r\n      on: {\r\n        fn: function (ev) {\r\n          const payload = (ev && ev.data) || null;\r\n          const data = payload && payload.data ? payload.data : [];\r\n          this.brick.options.setSilent('store.data', data);\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'store:data:sort',\r\n      on: {\r\n        fn: function (ev) {\r\n          const payload = (ev && ev.data) || {};\r\n\r\n          const field = payload.field || null;\r\n          const dir = payload.dir || 'asc';\r\n\r\n          if (!field || !this.brick) return;\r\n          const sorted = this._sortRows(this.brick.store.load(), field, dir, payload.compare);\r\n          this.brick.options.setSilent(\"store.data\", sorted);\r\n          ev.field = field;\r\n          ev.dir = dir;\r\n          ev.data = sorted;\r\n        }\r\n      }\r\n    }\r\n  ],\r\n\r\n  init: function () { },\r\n\r\n  destroy: function () { }\r\n};\r\n\n\nexport default store;\r\n\r\n", "export const wire = {\r\n    for: [{ host: 'brick', kind: '*' }], // Available to all bricks\r\n    requires: [], // No strict requirements\r\n    ns: 'wire',\r\n    options: {},\r\n\r\n    brick: {\r\n        send: function (eventName, data) {\r\n            console.warn(\"send\", eventName, data);\r\n            console.log(\"this\", this);\r\n            if (!this.service) this.ext._connect();\r\n            if (!this.service) return; // Still no service?\r\n            console.log(\"this.service\", this.service);\r\n            this.service.events.fire('wire:message', {\r\n                from: this.brick.id,\r\n                event: eventName,\r\n                data: data\r\n            });\r\n        }\r\n    },\r\n\r\n    extension: {\r\n        service: null,\r\n\r\n        _connect: function () {\r\n\r\n            if (this.ext._service) return;\r\n\r\n            let wireKind = this.brick.options.get(\"wire\", null);\r\n            if (wireKind == null) return;\r\n\r\n            // Connect to WireService\r\n            if (globalThis.VanillaBrick && globalThis.VanillaBrick.service) {\r\n                this.ext._service = globalThis.VanillaBrick.service('WireService');\r\n            }\r\n\r\n            if (this.ext._service) {\r\n                this.ext._service.wire.register(this.brick, this.brick.options.get(\"wire\", {}));\r\n            }\r\n        },\r\n\r\n        _handleBroadcast: function (ev) {\r\n            const payload = ev.data || {};\r\n            const senderId = payload.from;\r\n            const eventName = payload.event;\r\n            const data = payload.data;\r\n\r\n            // Don't echo back to self?\r\n            if (senderId === this.brick.id) return;\r\n\r\n            // Fire local event\r\n            // We wrap it? or just fire raw?\r\n            // User said \"proxy per a que... s'envi\u00EFn events\".\r\n            // If brick A sends \"user:login\", brick B should receive \"user:login\".\r\n            if (eventName) {\r\n                this.brick.events.fire(eventName, data);\r\n            }\r\n        },\r\n\r\n        _send: function (eventName, data) {\r\n            if (!this.service) this._connect();\r\n            if (!this.service) return; // Still no service?\r\n\r\n            this.service.events.fire('wire:message', {\r\n                from: this.brick.id,\r\n                event: eventName,\r\n                data: data\r\n            });\r\n        }\r\n    },\r\n\r\n    events: [\r\n        {\r\n            for: 'brick:status:ready',\r\n            on: {\r\n                fn: function () {\r\n                    this._connect();\r\n                }\r\n            }\r\n        },\r\n        {\r\n            for: 'wire:outbound',\r\n            on: {\r\n                fn: function (ev) {\r\n                    const p = ev.data || {};\r\n                    this._send(p.event, p.data);\r\n                }\r\n            }\r\n        },\r\n        {\r\n            for: '*:*:*',\r\n            on: {\r\n                fn: function (ev) {\r\n                    console.log(\"wire\", ev);\r\n                }\r\n            }\r\n        }\r\n    ],\r\n\r\n    init: function () { },\r\n\r\n    destroy: function () { }\r\n};\r\n\n\nexport default wire;\r\n\r\n", "export const wireservice = {\r\n    for: [{ host: 'service', kind: 'wire' }], // Available to all bricks\r\n    requires: [], // No strict requirements\r\n    ns: 'wire',\r\n    options: {},\r\n\r\n    brick: {\r\n        register: function (brick, config) {\r\n            console.log(\"register\", brick, config);\r\n        },\r\n        login: function (brick, config) {\r\n            console.log(\"login\", this, brick, config);\r\n        }\r\n    },\r\n    events: [\r\n        {\r\n            for: 'wire:send:register',\r\n            on: {\r\n                fn: function (ev) {\r\n                    console.log(\"\", ev)\r\n                }\r\n            }\r\n        },\r\n    ],\r\n}\r\n\n\nexport default wireservice;\r\n\r\n", "export const formItems = {\r\n    for: [{ host: 'brick', kind: 'form' }],\r\n    requires: ['dom'],\r\n    ns: 'items',\r\n    options: {},\r\n\r\n    brick: {\r\n        get: function () {\r\n            return this.options.get('form.items', []);\r\n        }\r\n    },\r\n\r\n    extension: {\r\n        _parseFromDom: function () {\r\n            const root = this.brick.dom.element();\r\n            if (!root) return [];\r\n\r\n            const items = [];\r\n            const groups = root.querySelectorAll('.vb-form-group');\r\n\r\n            for (let i = 0; i < groups.length; i++) {\r\n                const groupEl = groups[i];\r\n                const group = {\r\n                    type: 'group',\r\n                    items: []\r\n                };\r\n\r\n                // Check structure inside group\r\n                const fields = groupEl.querySelectorAll('.vb-form-field');\r\n                for (let j = 0; j < fields.length; j++) {\r\n                    const fieldEl = fields[j];\r\n                    const input = fieldEl.querySelector('input, select, textarea');\r\n                    const label = fieldEl.querySelector('label');\r\n\r\n                    if (input) {\r\n                        const fieldItem = {\r\n                            type: 'field',\r\n                            name: input.name || input.id,\r\n                            label: label ? label.textContent : '',\r\n                            controlType: input.tagName.toLowerCase(),\r\n                            inputType: input.type,\r\n                            required: input.required,\r\n                            placeholder: input.placeholder,\r\n                            // Detect span from parent column if exists\r\n                            span: this._detectSpan(fieldEl)\r\n                        };\r\n                        group.items.push(fieldItem);\r\n                    }\r\n                }\r\n                items.push(group);\r\n            }\r\n            return items;\r\n        },\r\n\r\n        _detectSpan: function (el) {\r\n            let current = el;\r\n            while (current && !current.classList.contains('vb-row')) {\r\n                if (current.className && typeof current.className === 'string') {\r\n                    const match = current.className.match(/vb-span-(\\d+)/);\r\n                    if (match) return parseInt(match[1], 10);\r\n                }\r\n                current = current.parentElement;\r\n                if (!current || current.tagName === 'FORM') break;\r\n            }\r\n            return 12; // Default full width\r\n        },\r\n\r\n        _render: function (items) {\r\n            const root = this.brick.dom.element();\r\n            if (!root) return;\r\n\r\n            // Always clear existing content when rendering from items list\r\n            root.innerHTML = '';\r\n\r\n            for (let i = 0; i < items.length; i++) {\r\n                const item = items[i];\r\n                if (item.type !== 'group') continue;\r\n\r\n                const groupEl = document.createElement('div');\r\n                groupEl.className = 'vb-form-group';\r\n\r\n                const rowEl = document.createElement('div');\r\n                rowEl.className = 'vb-row';\r\n\r\n                if (item.items && item.items.length) {\r\n                    for (let j = 0; j < item.items.length; j++) {\r\n                        const field = item.items[j];\r\n                        const span = field.span || 12;\r\n                        const colEl = document.createElement('div');\r\n                        colEl.className = 'vb-span-' + span;\r\n\r\n                        const fieldContainer = document.createElement('div');\r\n                        fieldContainer.className = 'vb-form-field';\r\n\r\n                        if (field.label) {\r\n                            const label = document.createElement('label');\r\n                            label.textContent = field.label;\r\n                            if (field.name) label.htmlFor = field.name;\r\n                            fieldContainer.appendChild(label);\r\n                        }\r\n\r\n                        let input;\r\n                        if (field.controlType === 'textarea') {\r\n                            input = document.createElement('textarea');\r\n                        } else if (field.controlType === 'select') {\r\n                            input = document.createElement('select');\r\n                            // TODO: options\r\n                        } else {\r\n                            input = document.createElement('input');\r\n                            input.type = field.inputType || 'text';\r\n                        }\r\n\r\n                        if (field.name) {\r\n                            input.name = field.name;\r\n                            input.id = field.name;\r\n                        }\r\n                        if (field.placeholder) input.placeholder = field.placeholder;\r\n                        // handle required gracefully\r\n                        if (field.required === true || field.required === 'true' || field.required === 'required') {\r\n                            input.required = true;\r\n                        }\r\n\r\n                        fieldContainer.appendChild(input);\r\n                        colEl.appendChild(fieldContainer);\r\n                        rowEl.appendChild(colEl);\r\n                    }\r\n                }\r\n\r\n                groupEl.appendChild(rowEl);\r\n                root.appendChild(groupEl);\r\n            }\r\n\r\n            // Add Actions container if needed (can be separate config)\r\n        }\r\n    },\r\n\r\n    events: [\r\n        {\r\n            for: 'brick:status:ready',\r\n            before: {\r\n                fn: function (ev) {\r\n                    // Start fresh\r\n                    let items = [];\r\n                    // Check options first (programmatic)\r\n                    if (this.brick.options.has('form.items')) {\r\n                        items = this.brick.options.get('form.items');\r\n                    }\r\n\r\n                    if (!items || items.length === 0) {\r\n                        // Try to parse from global variable defined in attribute\r\n                        const root = this.brick.dom.element();\r\n                        if (root) {\r\n                            const configVar = root.getAttribute('brick-form-items') || root.getAttribute('data-form-items');\r\n                            if (configVar && window[configVar]) {\r\n                                console.log('[Form Items] Config var found', configVar);\r\n                                items = window[configVar];\r\n                                this.brick.options.set('form.items', items);\r\n                            }\r\n                        }\r\n\r\n                        // if still no items, check if current DOM has any specific structure to parse\r\n                        // (only if we didn't just load them from var)\r\n                        if (!items || items.length === 0) {\r\n                            // Try to parse from DOM\r\n                            console.log('[Form Items] Parsing from DOM', this.brick.id);\r\n                            items = this._parseFromDom();\r\n                            this.brick.options.set('form.items', items);\r\n                        }\r\n                    } else {\r\n                        console.log('[Form Items] Config found in options', items);\r\n                    }\r\n\r\n                    // Helper to access data in on phase\r\n                    ev.data = ev.data || {};\r\n                    ev.data.formItems = items;\r\n                }\r\n            },\r\n            on: {\r\n                fn: function (ev) {\r\n                    const items = ev.data.formItems || this.brick.options.get('form.items');\r\n\r\n                    if (items && items.length > 0) {\r\n                        // We render if there are items. \r\n                        // Note: If we just parsed them from DOM, this will clear and re-render the same structure.\r\n                        // Ideally we check if we need to render.\r\n                        // But per requirements: \"Si li pasem un arbre d'items... tant \u00E9s el que hi hagi en el html/DOM. Ha d'haver-hi aquells. Si cal netejar el DOM i afegir els nous... es fa.\"\r\n\r\n                        // Optimization: if we just parsed it, re-rendering is redundant but safe. \r\n                        // To avoid infinite loop or weirdness, we could check a flag, but strict rendering ensures state == DOM.\r\n                        this._render(items);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    ],\r\n\r\n    init: function () {\r\n        return true;\r\n    },\r\n\r\n    destroy: function () {\r\n    }\r\n};\r\n\n\nexport default formItems;\r\n\r\n", "export const formRecord = {\r\n    for: [{ host: 'brick', kind: 'form' }],\r\n    requires: ['dom', 'store'],\r\n    ns: 'record',\r\n    options: {},\r\n\r\n    brick: {\r\n        // We could expose methods to get/set the current record directly if needed\r\n        getRecord: function () {\r\n            const data = this.store.load();\r\n            return (data && data.length) ? data[0] : null;\r\n        }\r\n    },\r\n\r\n    extension: {\r\n        _bind: function (record) {\r\n            const root = this.brick.dom.element();\r\n            if (!root) return;\r\n\r\n            // Iterate over all form fields\r\n            const inputs = root.querySelectorAll('input, select, textarea');\r\n            for (let i = 0; i < inputs.length; i++) {\r\n                const input = inputs[i];\r\n                const name = input.name || input.id;\r\n                if (!name) continue;\r\n\r\n                // If record has this field, set value\r\n                if (record && Object.prototype.hasOwnProperty.call(record, name)) {\r\n                    input.value = record[name];\r\n                } else {\r\n                    // Optional: clear if not in record? Or leave defaults?\r\n                    // Typically binding means reflecting state. If state is null, clear.\r\n                    // But if record doesn't have the key, maybe leave it?\r\n                    // Let's assume strict binding for now: if record is null, clear.\r\n                    if (!record) input.value = '';\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    events: [\r\n        {\r\n            for: 'brick:status:ready',\r\n            on: {\r\n                fn: function (ev) {\r\n                    const data = this.brick.store.load();\r\n                    if (data && data.length) {\r\n                        this._bind(data[0]);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        {\r\n            for: 'store:data:*',\r\n            after: {\r\n                fn: function (ev) {\r\n                    const data = this.brick.store.load();\r\n                    // We bind the first record\r\n                    const record = (data && data.length) ? data[0] : null;\r\n                    this._bind(record);\r\n                }\r\n            }\r\n        }\r\n    ],\r\n\r\n    init: function () {\r\n        return true;\r\n    },\r\n\r\n    destroy: function () {\r\n    }\r\n};\r\n\n\nexport default formRecord;\r\n\r\n", "export const form = {\r\n    for: [{ host: 'brick', kind: 'form' }],\r\n    requires: ['dom'],\r\n    ns: 'form',\r\n    options: {\r\n        items:[],\r\n    },\r\n\r\n    brick: {\r\n        // Basic form component methods can be added here\r\n        submit: function () {\r\n            // Placeholder for submit logic\r\n            const el = this.dom.element();\r\n            if (el && typeof el.submit === 'function') el.submit();\r\n        },\r\n        reset: function () {\r\n            const el = this.dom.element();\r\n            if (el && typeof el.reset === 'function') el.reset();\r\n        }\r\n    },\r\n\r\n    extension: {\r\n        // Internal extension logic\r\n    },\r\n\r\n    events: [\r\n        // Basic lifecycle events\r\n        {\r\n            for: 'brick:status:ready',\r\n            on: {\r\n                fn: function () {\r\n                    // Initialization logic\r\n                }\r\n            }\r\n        }\r\n    ],\r\n\r\n    init: function () {\r\n        return true;\r\n    },\r\n\r\n    destroy: function () {\r\n    }\r\n};\r\n\n\nexport default form;\r\n\r\n", "export const gridColumns = {\r\n  for: [{ host: 'brick', kind: 'grid' }],\r\n  requires: ['dom', 'store'],\r\n  ns: 'columns',\r\n\r\n  brick: {\r\n    get: function () {\r\n      return this.options.get(\"grid.columns\", []);\r\n    },\r\n    sort: function (field, dir) {\r\n      const cols = this.columns.get();\r\n      const colDef = cols.find(function (c) { return c && c.datafield === field; }) || {};\r\n      const state = this.options.get(\"grid.sort\", { field: null, dir: null });\r\n      let nextDir = dir;\r\n      if (nextDir !== 'asc' && nextDir !== 'desc') {\r\n        nextDir = (state.field === field && state.dir === 'asc') ? 'desc' : 'asc';\r\n      }\r\n\r\n      this.events.fire('store:data:sort', {\r\n        field: field,\r\n        dir: nextDir,\r\n        compare: typeof colDef.sort === 'function' ? colDef.sort : null\r\n      });\r\n\r\n      return nextDir;\r\n    }\r\n  },\r\n\r\n  extension: {},\r\n\r\n  events: [\r\n    {\r\n      for: 'brick:status:ready',\r\n      on: {\r\n        fn: function () {\r\n          const columns = this.brick.columns.get();\r\n          const root = this.brick.dom.element && this.brick.dom.element();\r\n          if (!root) return;\r\n\r\n          const table = root.tagName && root.tagName.toLowerCase() === 'table'\r\n            ? root\r\n            : root.querySelector && root.querySelector('table');\r\n          if (!table) return;\r\n\r\n          let thead = (table.tHead) ? table.tHead : table.querySelector('thead');\r\n          if (!thead) {\r\n            thead = table.createTHead ? table.createTHead() : table.insertBefore(document.createElement('thead'), table.firstChild);\r\n          }\r\n\r\n          const row = thead.rows && thead.rows[0] ? thead.rows[0] : thead.insertRow();\r\n          row.innerHTML = '';\r\n          const brick = this.brick;\r\n          for (let i = 0; i < columns.length; i += 1) {\r\n            const col = columns[i] || {};\r\n            const th = document.createElement('th');\r\n            th.textContent = col.label || col.datafield || '';\r\n            if (col.sortable && col.datafield) {\r\n              th.classList.add('vb-sortable');\r\n              th.addEventListener('click', (function (colDef) {\r\n                return function () {\r\n                  brick.columns.sort(colDef.datafield, null);\r\n                };\r\n              })(col));\r\n            }\r\n            row.appendChild(th);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'store:data:sort',\r\n      after: {\r\n        fn: function (ev) {\r\n          this.brick.options.setSilent(\"grid.sort\", { field: ev.field, dir: ev.dir || 'asc' });\r\n        }\r\n      }\r\n    }\r\n  ],\r\n\r\n  init: function () { },\r\n\r\n  destroy: function () { },\r\n\r\n  options: {\r\n    grid: {\r\n      columns: [\r\n        { datafield: 'code', label: 'Code', sortable: true },\r\n        { datafield: 'name', label: 'Name', sortable: true },\r\n      ]\r\n    }\r\n  }\r\n};\r\n\r\n\n\nexport default gridColumns;\r\n\r\n", "export const gridRowsFocused = {\r\n  for: [{ host: 'brick', kind: 'grid' }],\r\n    requires: ['dom', 'rows', 'store'],\r\n    ns: 'rowsFocused',\r\n    options: {},\r\n\r\n    brick: {},\r\n\r\n    extension: {\r\n        _addTabIndex: function () {\r\n            const el = this.brick.dom.element();\r\n            if (!el) return;\r\n            const rows = el.querySelectorAll('tbody tr') || [];\r\n            for (let i = 0; i < rows.length; i++) {\r\n                const row = rows[i];\r\n                if (!row.hasAttribute('tabindex')) {\r\n                    row.setAttribute('tabindex', i);\r\n                }\r\n            }\r\n        },\r\n        _handleFocus: function (target) {\r\n            const el = this.brick.dom.element();\r\n            if (!el) return;\r\n            const row = target.closest('tr');\r\n            if (!row) return;\r\n            const old = el.querySelector('tr.vb-focused');\r\n            if (old) old.classList.remove('vb-focused');\r\n            row.classList.add('vb-focused');\r\n            const rowIndex = Array.prototype.indexOf.call(row.parentNode.children, row);\r\n            const data = this.brick.store.get(rowIndex);\r\n            this.brick.events.fire('dom:row:focus', {\r\n                index: rowIndex,\r\n                row: data,\r\n                element: row\r\n            });\r\n        }\r\n    },\r\n\r\n    events: [\r\n        {\r\n            for: 'brick:status:ready',\r\n            on: {\r\n                fn: function () {\r\n                    const el = this.brick.dom.element();\r\n                    if (el) {\r\n                        const self = this;\r\n                        el.addEventListener('focusin', function (e) {\r\n                            self._handleFocus(e.target);\r\n                        });\r\n                    }\r\n                    this._addTabIndex();\r\n                }\r\n            }\r\n        },\r\n        {\r\n            for: 'store:data:set',\r\n            after: {\r\n                fn: function () {\r\n                    this._addTabIndex();\r\n                }\r\n            }\r\n        },\r\n        {\r\n            for: 'store:data:sort',\r\n            after: {\r\n                fn: function () {\r\n                    this._addTabIndex();\r\n                }\r\n            }\r\n        }\r\n    ],\r\n\r\n    init: function () { },\r\n\r\n    destroy: function () { }\r\n};\r\n\n\nexport default gridRowsFocused;\r\n\r\n", "export const gridRows = {\r\n  for: [{ host: 'brick', kind: 'grid' }],\r\n  requires: ['dom', 'store', 'columns'],\r\n  ns: 'rows',\r\n  options: {},\r\n\r\n  brick: {\r\n    render: function () {\r\n      const root = this.dom.element();\r\n      if (!root) return;\r\n\r\n      const table = root.tagName && root.tagName.toLowerCase() === 'table'\r\n        ? root\r\n        : root.querySelector && root.querySelector('table');\r\n      if (!table) return;\r\n\r\n      const columns = this.columns.get();\r\n      const rows = this.store.load();\r\n\r\n      let tbody = (table.tBodies && table.tBodies.length)\r\n        ? table.tBodies[0]\r\n        : table.querySelector('tbody');\r\n      if (!tbody) {\r\n        tbody = document.createElement('tbody');\r\n        table.appendChild(tbody);\r\n      }\r\n      tbody.innerHTML = '';\r\n\r\n      for (let r = 0; r < rows.length; r += 1) {\r\n        const record = rows[r] || {};\r\n        const tr = document.createElement('tr');\r\n        for (let c = 0; c < columns.length; c += 1) {\r\n          const col = columns[c] || {};\r\n          const field = col.datafield;\r\n          const td = document.createElement('td');\r\n          td.textContent = (field && record[field] !== undefined && record[field] !== null)\r\n            ? record[field]\r\n            : '';\r\n          tr.appendChild(td);\r\n        }\r\n        tbody.appendChild(tr);\r\n      }\r\n    }\r\n  },\r\n\r\n  extension: {},\r\n\r\n  events: [\r\n    {\r\n      for: 'brick:status:ready',\r\n      on: {\r\n        fn: function () {\r\n          this.brick.rows.render();\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'store:data:*',\r\n      after: {\r\n        fn: function (ev) {\r\n          this.brick.rows.render();\r\n        }\r\n      }\r\n    }\r\n  ],\r\n\r\n  init: function () { },\r\n\r\n  destroy: function () { }\r\n};\r\n\n\nexport default gridRows;\r\n\r\n", "export const grid = {\r\n  for: [{ host: 'brick', kind: 'grid' }],\r\n  requires: ['dom'],\r\n  ns: 'grid',\r\n  options: {},\r\n\r\n  brick: {\r\n    refresh: function () {\r\n      if (this.__gridExt) this.__gridExt._refreshRows();\r\n    },\r\n    getSelection: function () {\r\n      const ext = this.__gridExt;\r\n      if (!ext) return { index: -1, row: null };\r\n      const idx = (typeof ext.selectedIndex === 'number') ? ext.selectedIndex : -1;\r\n      const row = (idx >= 0 && ext.rows && ext.rows[idx]) ? ext.rows[idx] : null;\r\n      return { index: idx, row: row };\r\n    },\r\n    clearSelection: function () {\r\n      if (this.__gridExt) this.__gridExt._setSelectedIndex(-1);\r\n    }\r\n  },\r\n\r\n  extension: {\r\n    table: null,\r\n    rows: [],\r\n    selectedIndex: -1,\r\n    _findTable: function () {\r\n      const root = this.brick.dom && typeof this.brick.dom.element === 'function'\r\n        ? this.brick.dom.element()\r\n        : null;\r\n      if (!root || !root.querySelector) {\r\n        this.table = null;\r\n        return null;\r\n      }\r\n      const table =\r\n        root.querySelector('table.vb-grid') ||\r\n        root.querySelector('table');\r\n      this.table = table || null;\r\n      return this.table;\r\n    },\r\n    _refreshRows: function () {\r\n      const table = this.table || this._findTable();\r\n      if (!table) {\r\n        this.rows = [];\r\n        this.selectedIndex = -1;\r\n        return;\r\n      }\r\n      const body = (table.tBodies && table.tBodies.length)\r\n        ? table.tBodies[0]\r\n        : table.querySelector('tbody');\r\n      const rows = body ? body.rows : table.rows;\r\n      this.rows = Array.prototype.slice.call(rows || []);\r\n      if (this.selectedIndex >= this.rows.length) {\r\n        this.selectedIndex = -1;\r\n      }\r\n    },\r\n    _setSelectedIndex: function (index) {\r\n      const rows = this.rows || [];\r\n      if (!rows.length) {\r\n        this.selectedIndex = -1;\r\n        return;\r\n      }\r\n      if (typeof index !== 'number' || index < 0 || index >= rows.length) {\r\n        index = -1;\r\n      }\r\n      for (let i = 0; i < rows.length; i += 1) {\r\n        const row = rows[i];\r\n        if (!row || !row.classList) continue;\r\n        if (i === index) row.classList.add('vb-grid-row-selected');\r\n        else row.classList.remove('vb-grid-row-selected');\r\n      }\r\n      this.selectedIndex = index;\r\n    }\r\n  },\r\n\r\n  events: [\r\n    {\r\n      for: 'brick:status:ready',\r\n      on: {\r\n        fn: function () {\r\n          this._findTable();\r\n          this._refreshRows();\r\n        }\r\n      }\r\n    },\r\n    {\r\n      for: 'dom:click:*',\r\n      on: {\r\n        fn: function (ev) {\r\n          const table = this.table || this._findTable();\r\n          if (!table) return;\r\n          if (!ev || !ev.data || !ev.data.domEvent) return;\r\n          const target = ev.data.domEvent.target;\r\n          if (!target) return;\r\n\r\n          let node = target;\r\n          let clickedRow = null;\r\n          while (node && node !== table) {\r\n            if (node.tagName && node.tagName.toLowerCase() === 'tr') {\r\n              clickedRow = node;\r\n              break;\r\n            }\r\n            node = node.parentNode;\r\n          }\r\n          if (!clickedRow) return;\r\n\r\n          this._refreshRows();\r\n          const rows = this.rows || [];\r\n          const index = rows.indexOf(clickedRow);\r\n          if (index === -1) return;\r\n          if (this.selectedIndex === index) this._setSelectedIndex(-1);\r\n          else this._setSelectedIndex(index);\r\n        }\r\n      }\r\n    }\r\n  ],\r\n\r\n  init: function () {\r\n    this.brick.__gridExt = this;\r\n    this.table = null;\r\n    this.rows = [];\r\n    this.selectedIndex = -1;\r\n    return true;\r\n  },\r\n\r\n  destroy: function () {\r\n    this.rows = [];\r\n    this.table = null;\r\n    this.selectedIndex = -1;\r\n    if (this.brick) {\r\n      delete this.brick.__gridExt;\r\n    }\r\n  }\r\n};\r\n\r\n\r\n\r\n\n\nexport default grid;\r\n\r\n", "const WireService = {\r\n    kind: 'wire',\r\n};\r\n\r\nexport default WireService;\r\n", "/**\n * AUTO-GENERATED MANIFEST\n * Do not edit manually. This file is generated by scripts/build.mjs\n */\nimport extensions_0 from './extensions/dom-css.js';\nimport extensions_1 from './extensions/dom-events.js';\nimport extensions_2 from './extensions/dom.js';\nimport extensions_3 from './extensions/store.js';\nimport extensions_4 from './extensions/wire-client.js';\nimport extensions_5 from './extensions/wire-service.js';\nimport components_0 from './components/form-items.js';\nimport components_1 from './components/form-record.js';\nimport components_2 from './components/form.js';\nimport components_3 from './components/grid-columns.js';\nimport components_4 from './components/grid-rows-focused.js';\nimport components_5 from './components/grid-rows.js';\nimport components_6 from './components/grid.js';\nimport services_0 from './services/wire.js';\n\nexport function registerBuiltins(VanillaBrick) {\n\n// Automatic registration\nif (extensions_0) {\n  VanillaBrick.extensions['domCss'] = extensions_0;\n}\nif (extensions_1) {\n  VanillaBrick.extensions['domEvents'] = extensions_1;\n}\nif (extensions_2) {\n  VanillaBrick.extensions['dom'] = extensions_2;\n}\nif (extensions_3) {\n  VanillaBrick.extensions['store'] = extensions_3;\n}\nif (extensions_4) {\n  VanillaBrick.extensions['wire'] = extensions_4;\n}\nif (extensions_5) {\n  VanillaBrick.extensions['wireservice'] = extensions_5;\n}\nif (components_0) {\n  VanillaBrick.extensions['formItems'] = components_0;\n}\nif (components_1) {\n  VanillaBrick.extensions['formRecord'] = components_1;\n}\nif (components_2) {\n  VanillaBrick.extensions['form'] = components_2;\n}\nif (components_3) {\n  VanillaBrick.extensions['gridColumns'] = components_3;\n}\nif (components_4) {\n  VanillaBrick.extensions['gridRowsFocused'] = components_4;\n}\nif (components_5) {\n  VanillaBrick.extensions['gridRows'] = components_5;\n}\nif (components_6) {\n  VanillaBrick.extensions['grid'] = components_6;\n}\nVanillaBrick.services['WireService'] = services_0;\n\n}\n", "import Brick from './brick/brick.js';\r\nimport ExtensionsRegistry from './controllers/extensionsRegistry.js';\r\nimport * as optionsUtils from './utils/options.js';\r\n\r\n// Startup Logic\r\nimport { setupServices } from './startup/services.js';\r\nimport { setupBootstrap } from './startup/bootstrap.js';\r\n\r\n// Auto-generated manifest (at build time)\r\nimport { registerBuiltins } from './_manifest.js';\r\n\r\nconst VanillaBrick = {\r\n    brick: Brick,\r\n    registry: ExtensionsRegistry,\r\n    utils: optionsUtils,\r\n    extensions: {},\r\n    services: {},\r\n    configs: {},\r\n    runtime: {\r\n        bricks: [],\r\n        services: {}\r\n    },\r\n    base: {}\r\n};\r\n\r\n// 1. Expose to global for extensions to find it if needed\r\nglobalThis.VanillaBrick = VanillaBrick;\r\n\r\n// 2. Register all extensions, components and services from manifest\r\nregisterBuiltins(VanillaBrick);\r\n\r\n// 3. Wire up core systems\r\nsetupServices(VanillaBrick);\r\nsetupBootstrap(VanillaBrick);\r\n\r\nexport default VanillaBrick;\r\nexport { Brick };\r\n"],
  "mappings": ";;;;;;;;AAKe,WAAR,iBAAkC,OAAO;AAC5C,SAAK,QAAQ;AACb,SAAK,UAAU;AACf,SAAK,aAAa;AAGlB,QAAI,OAAO;AACX,QAAI,OAAO;AACP,YAAM,SAAS;AAAA,QACX,KAAK,WAAY;AACb,iBAAO,KAAK,IAAI;AAAA,QACpB;AAAA,QACA,KAAK,SAAU,WAAW;AACtB,iBAAO,KAAK,IAAI,SAAS;AAAA,QAC7B;AAAA,QACA,IAAI,SAAU,QAAQ;AAClB,iBAAO,KAAK,GAAG,MAAM;AAAA,QACzB;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAEA,mBAAiB,UAAU,MAAM,WAAY;AACzC,WAAO,KAAK;AAAA,EAChB;AAEA,mBAAiB,UAAU,MAAM,SAAU,WAAW,SAAS;AAE3D,QAAI,CAAC,KAAK,MAAM,QAAQ;AACpB,WAAK,UAAU;AACf;AAAA,IACJ;AAGA,QAAI,CAAC,KAAK,YAAY;AAClB,UAAI,OAAO;AAEX,WAAK,MAAM,OAAO,GAAG,kBAAkB,MAAM,SAAU,IAAI;AAEvD,YAAI,GAAG,QAAQ,GAAG,KAAK,QAAQ;AAC3B,eAAK,UAAU,GAAG,KAAK;AAAA,QAC3B;AAAA,MACJ,CAAC;AACD,WAAK,aAAa;AAAA,IACtB;AAGA,QAAI,YAAY,OAAO,OAAO,CAAC,GAAG,WAAW,CAAC,GAAG;AAAA,MAC7C,QAAQ;AAAA,MACR,MAAM,KAAK;AAAA,IACf,CAAC;AAGD,SAAK,MAAM,OAAO,KAAK,kBAAkB,WAAW,SAAS;AAAA,EACjE;AAEA,mBAAiB,UAAU,KAAK,SAAU,QAAQ;AAC9C,WAAO,KAAK,YAAY;AAAA,EAC5B;;;ACzDe,WAAR,kBAAmC,OAAO;AAC7C,SAAK,QAAQ,SAAS;AAAA,EAC1B;AAiBA,oBAAkB,UAAU,UAAU,SAAU,IAAI,SAAS,MAAM,MAAM;AACrE;AACA,QAAI,OAAO,OAAO,YAAY;AAC1B,cAAQ,KAAK,yDAAyD,IAAI;AAC1E,aAAO;AAAA,IACX;AAEA,QAAI;AACA,YAAM,SAAS,GAAG,MAAM,SAAS,IAAI;AAGrC,UAAI,UAAU,OAAO,OAAO,SAAS,YAAY;AAC7C,eAAO,OAAO,MAAM,SAAU,KAAK;AAC/B,eAAK,aAAa,KAAK,IAAI,SAAS,IAAI;AACxC,iBAAO,QAAQ,OAAO,GAAG;AAAA,QAC7B,EAAE,KAAK,IAAI,CAAC;AAAA,MAChB;AAEA,aAAO;AAAA,IACX,SAAS,KAAK;AACV,WAAK,aAAa,KAAK,IAAI,SAAS,IAAI;AACxC,YAAM;AAAA,IACV;AAAA,EACJ;AAYA,oBAAkB,UAAU,eAAe,SAAU,KAAK,IAAI,SAAS,MAAM;AACzE,QAAI,WAAY,WAAW,QAAQ,QAAS,QAAQ,QAAQ;AAC5D,UAAM,YAAY;AAAA,MACd,OAAO;AAAA,MACP,SAAS,IAAI,WAAW,OAAO,GAAG;AAAA,MAClC,OAAO,IAAI;AAAA,MACX,MAAM,QAAQ,CAAC;AAAA,MACf,SAAS;AAAA,QACL,OAAO,YAAY,SAAS,KAAK,SAAS,KAAK;AAAA,QAC/C,MAAM,YAAY,SAAS,OAAO,SAAS,OAAO;AAAA,MACtD;AAAA,IACJ;AAGA,QAAI;AACA,gBAAU,WAAW,GAAG,SAAS;AAAA,IACrC,SAAS,GAAG;AACR,gBAAU,WAAW;AAAA,IACzB;AAEA,YAAQ,MAAM,uDAAuD,SAAS;AAAA,EAMlF;AAWA,oBAAkB,UAAU,OAAO,SAAU,IAAI,SAAS,MAAM;AAC5D,QAAI,OAAO,OAAO,YAAY;AAC1B,aAAO;AAAA,IACX;AAEA,UAAM,UAAU;AAChB,WAAO,SAAS,kBAAkB;AAC9B,YAAM,OAAO,MAAM,UAAU,MAAM,KAAK,SAAS;AACjD,aAAO,QAAQ,QAAQ,IAAI,SAAS,MAAM,IAAI;AAAA,IAClD;AAAA,EACJ;;;ACnGe,WAAR,kBAAmC,OAAO,SAAS;AACxD,SAAK,QAAQ;AACb,SAAK,OAAO,CAAC;AACb,SAAK,SAAS,CAAC;AACf,SAAK,eAAe;AAEpB,QAAI,WAAW,OAAO,YAAY,UAAU;AAC1C,iBAAW,KAAK,SAAS;AACvB,YAAI,OAAO,UAAU,eAAe,KAAK,SAAS,CAAC,GAAG;AACpD,kBAAQ,KAAK,MAAM,OAAO,CAAC,GAAG,QAAQ,CAAC,CAAC;AAAA,QAC1C;AAAA,MACF;AAAA,IACF;AAEA,QAAI,OAAO;AAGX,UAAM,UAAU;AAAA,MACd,KAAK,SAAU,KAAK,UAAU;AAC5B,eAAO,KAAK,IAAI,KAAK,QAAQ;AAAA,MAC/B;AAAA;AAAA,MAGA,KAAK,SAAU,KAAK,OAAO;AACzB,aAAK,QAAQ,KAAK,KAAK;AACvB,eAAO;AAAA,MACT;AAAA;AAAA,MAGA,UAAU,eAAgB,KAAK,OAAO;AACpC,cAAM,KAAK,SAAS,KAAK,KAAK;AAC9B,eAAO;AAAA,MACT;AAAA,MAEA,KAAK,SAAU,KAAK;AAClB,eAAO,KAAK,IAAI,GAAG;AAAA,MACrB;AAAA,MAEA,KAAK,WAAY;AACf,eAAO,KAAK,IAAI;AAAA,MAClB;AAAA,MAEA,WAAW,SAAU,KAAK,OAAO;AAC/B,aAAK,UAAU,KAAK,KAAK;AACzB,eAAO;AAAA,MACT;AAAA,IACF;AAAA,EACF;AAOA,oBAAkB,UAAU,uBAAuB,WAAY;AAC7D,QAAI,KAAK;AAAc;AAEvB,QAAI,QAAQ,KAAK;AACjB,QAAI,OAAO;AAGX,UAAM,OAAO,GAAG,mBAAmB,MAAM,GAAG,SAAU,IAAI;AACxD,WAAK,OAAO,EAAE;AAAA,IAChB,CAAC;AAED,SAAK,eAAe;AAAA,EACtB;AAYA,oBAAkB,UAAU,SAAS,SAAU,IAAI;AACjD,QAAI,CAAC;AAAI;AACT,QAAI,UAAU,GAAG,QAAQ,CAAC;AAG1B,SAAK,SAAS,CAAC;AAGf,QAAI,QAAQ,SAAS,QAAQ,UAAU,OAAO,QAAQ,WAAW,UAAU;AACzE,eAAS,KAAK,QAAQ,QAAQ;AAC5B,YAAI,OAAO,UAAU,eAAe,KAAK,QAAQ,QAAQ,CAAC,GAAG;AAC3D,kBAAQ,KAAK,MAAM,OAAO,CAAC,GAAG,QAAQ,OAAO,CAAC,CAAC;AAAA,QACjD;AAAA,MACF;AACA;AAAA,IACF;AAGA,QAAI,OAAO,QAAQ,QAAQ,UAAU;AACnC,cAAQ,KAAK,MAAM,OAAO,QAAQ,GAAG,GAAG,QAAQ,KAAK;AAAA,IACvD;AAAA,EACF;AAUA,oBAAkB,UAAU,WAAW,eAAgB,KAAK,OAAO;AACjE,SAAK,qBAAqB;AAE1B,QAAI,QAAQ,KAAK;AAGjB,QAAI,OAAO,OAAO,QAAQ,YAAY,CAAC,MAAM,QAAQ,GAAG,GAAG;AACzD,UAAI,SAAS,CAAC;AACd,UAAI,WAAW,CAAC;AAEhB,qBAAe,KAAK,IAAI,MAAM;AAE9B,eAAS,MAAM,QAAQ;AACrB,YAAI,CAAC,OAAO,UAAU,eAAe,KAAK,QAAQ,EAAE;AAAG;AACvD,iBAAS,EAAE,IAAI,gBAAgB,KAAK,MAAM,EAAE;AAAA,MAC9C;AAEA,UAAI,eAAe;AAAA,QACjB,OAAO;AAAA,QACP;AAAA,QACA;AAAA,QACA,SAAS;AAAA,QACT;AAAA,MACF;AAIA,YAAM,MAAM,OAAO,UAAU,uBAAuB,YAAY;AAChE,aAAO;AAAA,IACT;AAGA,QAAI,WAAW,gBAAgB,KAAK,MAAM,GAAG;AAE7C,QAAI,UAAU;AAAA,MACZ;AAAA,MACA;AAAA,MACA,UAAU;AAAA,MACV,SAAS;AAAA,MACT;AAAA,IACF;AAGA,UAAM,MAAM,OAAO,UAAU,mBAAmB,KAAK,OAAO;AAC5D,WAAO;AAAA,EACT;AAQA,oBAAkB,UAAU,UAAU,SAAU,KAAK,OAAO;AAC1D,SAAK,qBAAqB;AAE1B,QAAI,QAAQ,KAAK;AAGjB,QAAI,OAAO,OAAO,QAAQ,YAAY,CAAC,MAAM,QAAQ,GAAG,GAAG;AACzD,UAAI,SAAS,CAAC;AACd,UAAI,WAAW,CAAC;AAEhB,qBAAe,KAAK,IAAI,MAAM;AAE9B,eAAS,MAAM,QAAQ;AACrB,YAAI,CAAC,OAAO,UAAU,eAAe,KAAK,QAAQ,EAAE;AAAG;AACvD,iBAAS,EAAE,IAAI,gBAAgB,KAAK,MAAM,EAAE;AAAA,MAC9C;AAEA,UAAI,eAAe;AAAA,QACjB,OAAO;AAAA,QACP;AAAA,QACA;AAAA,QACA,SAAS;AAAA,QACT;AAAA,MACF;AAIA,YAAM,OAAO,KAAK,uBAAuB,YAAY;AACrD,aAAO;AAAA,IACT;AAGA,QAAI,WAAW,gBAAgB,KAAK,MAAM,GAAG;AAE7C,QAAI,UAAU;AAAA,MACZ;AAAA,MACA;AAAA,MACA,UAAU;AAAA,MACV,SAAS;AAAA,MACT;AAAA,IACF;AAGA,UAAM,OAAO,KAAK,mBAAmB,KAAK,OAAO;AACjD,WAAO;AAAA,EACT;AAGA,oBAAkB,UAAU,MAAM,kBAAkB,UAAU;AAQ9D,oBAAkB,UAAU,YAAY,SAAU,KAAK,OAAO;AAE5D,SAAK,SAAS,CAAC;AAGf,QAAI,OAAO,OAAO,QAAQ,YAAY,CAAC,MAAM,QAAQ,GAAG,GAAG;AACzD,qBAAe,KAAK,IAAI,KAAK,IAAI;AACjC,aAAO;AAAA,IACT;AAGA,YAAQ,KAAK,MAAM,OAAO,GAAG,GAAG,KAAK;AACrC,WAAO;AAAA,EACT;AAQA,oBAAkB,UAAU,MAAM,SAAU,KAAK,UAAU;AAEzD,QAAI,OAAO,UAAU,eAAe,KAAK,KAAK,QAAQ,GAAG,GAAG;AAC1D,aAAO,KAAK,OAAO,GAAG;AAAA,IACxB;AAGA,QAAI,MAAM,gBAAgB,KAAK,MAAM,GAAG;AACxC,QAAI,SAAS,OAAO,QAAQ,cAAc,WAAW;AAGrD,SAAK,OAAO,GAAG,IAAI;AAEnB,WAAO;AAAA,EACT;AAOA,oBAAkB,UAAU,MAAM,SAAU,KAAK;AAC/C,QAAI,OAAO,OAAO,GAAG;AACrB,QAAI,CAAC,KAAK;AAAQ,aAAO;AACzB,QAAI,SAAS,QAAQ,KAAK,MAAM,IAAI;AACpC,QAAI;AAAQ,aAAO;AAEnB,WAAO,OAAO,UAAU,eAAe,KAAK,KAAK,MAAM,GAAG;AAAA,EAC5D;AAMA,oBAAkB,UAAU,MAAM,WAAY;AAC5C,WAAO,OAAO,OAAO,CAAC,GAAG,KAAK,IAAI;AAAA,EACpC;AAGA,WAAS,OAAO,KAAK;AACnB,QAAI,CAAC,OAAO,QAAQ;AAAG,aAAO,CAAC;AAC/B,QAAI,MAAM,QAAQ,GAAG;AAAG,aAAO;AAC/B,WAAO,OAAO,GAAG,EACd,MAAM,GAAG,EACT,OAAO,SAAU,GAAG;AAAE,aAAO,MAAM;AAAA,IAAI,CAAC;AAAA,EAC7C;AAEA,WAAS,QAAQ,KAAK,MAAM,OAAO;AACjC,QAAI,CAAC,KAAK;AAAQ;AAClB,QAAI,MAAM;AACV,aAAS,IAAI,GAAG,IAAI,KAAK,SAAS,GAAG,KAAK,GAAG;AAC3C,UAAI,MAAM,KAAK,CAAC;AAChB,UAAI,CAAC,IAAI,GAAG,KAAK,OAAO,IAAI,GAAG,MAAM,UAAU;AAC7C,YAAI,GAAG,IAAI,CAAC;AAAA,MACd;AACA,YAAM,IAAI,GAAG;AAAA,IACf;AACA,QAAI,KAAK,KAAK,SAAS,CAAC,CAAC,IAAI;AAAA,EAC/B;AAEA,WAAS,QAAQ,KAAK,MAAM;AAC1B,QAAI,MAAM;AACV,aAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACvC,UAAI,MAAM,KAAK,CAAC;AAChB,UAAI,CAAC,OAAO,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,GAAG,GAAG;AAC3D,eAAO;AAAA,MACT;AACA,YAAM,IAAI,GAAG;AAAA,IACf;AACA,WAAO;AAAA,EACT;AAEA,WAAS,QAAQ,KAAK,MAAM;AAC1B,QAAI,MAAM;AACV,aAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACvC,UAAI,MAAM,KAAK,CAAC;AAChB,UAAI,CAAC,OAAO,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,GAAG,GAAG;AAC3D,eAAO;AAAA,MACT;AACA,YAAM,IAAI,GAAG;AAAA,IACf;AACA,WAAO;AAAA,EACT;AAEA,WAAS,gBAAgB,MAAM,KAAK;AAClC,QAAI,OAAO,OAAO,GAAG;AACrB,QAAI,KAAK,QAAQ;AACf,UAAI,SAAS,QAAQ,MAAM,IAAI;AAC/B,UAAI,OAAO,WAAW;AAAa,eAAO;AAAA,IAC5C;AAEA,QAAI,OAAO,UAAU,eAAe,KAAK,MAAM,GAAG,GAAG;AACnD,aAAO,KAAK,GAAG;AAAA,IACjB;AACA,WAAO;AAAA,EACT;AAGA,WAAS,eAAe,KAAK,QAAQ,QAAQ;AAC3C,aAAS,KAAK,KAAK;AACjB,UAAI,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,CAAC;AAAG;AACnD,UAAI,OAAO,SAAS,SAAS,MAAM,IAAI;AACvC,UAAI,MAAM,IAAI,CAAC;AACf,UAAI,OAAO,OAAO,QAAQ,YAAY,CAAC,MAAM,QAAQ,GAAG,GAAG;AACzD,uBAAe,KAAK,MAAM,MAAM;AAAA,MAClC,OAAO;AACL,eAAO,IAAI,IAAI;AAAA,MACjB;AAAA,IACF;AAAA,EACF;;;AC/Ve,WAAR,mBAAoC,OAAO;AAChD,SAAK,QAAQ,SAAS;AACtB,SAAK,WAAW,CAAC;AACjB,SAAK,iBAAiB,CAAC;AACvB,SAAK,SAAS,CAAC,UAAU,MAAM,OAAO;AAGtC,QAAI,MAAM;AACV,QAAI,OAAO;AACT,YAAM,SAAS;AAAA,QACb,IAAI,SAAU,SAAS,OAAO,UAAU,SAAS,MAAM;AACrD,cAAI,GAAG,SAAS,OAAO,UAAU,SAAS,IAAI;AAC9C,iBAAO;AAAA,QACT;AAAA,QACA,KAAK,SAAU,SAAS,OAAO,SAAS;AACtC,cAAI,IAAI,SAAS,OAAO,OAAO;AAC/B,iBAAO;AAAA,QACT;AAAA,QACA,MAAM,SAAU,WAAW,SAAS;AAClC,cAAI,KAAK,WAAW,OAAO;AAC3B,iBAAO;AAAA,QACT;AAAA,QACA,WAAW,SAAU,WAAW,SAAS;AACvC,iBAAO,IAAI,UAAU,WAAW,OAAO;AAAA,QACzC;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAIA,qBAAmB,UAAU,qBAAqB,SAAU,UAAU;AACpE,QAAI,KAAK,OAAO,aAAa,WAAW,WAAW;AACnD,QAAI,KAAK;AAAG,WAAK;AACjB,QAAI,KAAK;AAAI,WAAK;AAClB,WAAO;AAAA,EACT;AAOA,qBAAmB,UAAU,kBAAkB,SAAU,SAAS;AAChE,UAAM,SAAS,WAAW,IAAI,MAAM,GAAG;AACvC,UAAM,KAAK,MAAM,CAAC;AAClB,UAAM,OAAO,MAAM,CAAC;AACpB,UAAM,SAAS,MAAM,CAAC;AAEtB,WAAO;AAAA,MACL,WAAW,CAAC,MAAM,OAAO,MAAM,SAAY;AAAA,MAC3C,MAAM,CAAC,QAAQ,SAAS,MAAM,SAAY;AAAA,MAC1C,QAAQ,CAAC,UAAU,WAAW,MAAM,SAAY;AAAA,IAClD;AAAA,EACF;AAMA,qBAAmB,UAAU,iBAAiB,SAAU,WAAW;AACjE,UAAM,SAAS,aAAa,IAAI,MAAM,GAAG;AACzC,WAAO;AAAA,MACL,WAAW,MAAM,CAAC,KAAK;AAAA,MACvB,MAAM,MAAM,CAAC,KAAK;AAAA,MAClB,QAAQ,MAAM,CAAC,KAAK;AAAA,IACtB;AAAA,EACF;AAEA,qBAAmB,UAAU,WAAW,SAAU,UAAU,KAAK;AAC/D,YACG,SAAS,cAAc,UAAa,SAAS,cAAc,IAAI,eAC/D,SAAS,SAAS,UAAa,SAAS,SAAS,IAAI,UACrD,SAAS,WAAW,UAAa,SAAS,WAAW,IAAI;AAAA,EAE9D;AAEA,qBAAmB,UAAU,qBAAqB,SAAU,WAAW;AACrE,QAAI,OAAO,cAAc,UAAU;AACjC,cAAQ,MAAM,2CAA2C,SAAS;AAClE,aAAO;AAAA,IACT;AACA,UAAM,QAAQ,UAAU,MAAM,GAAG;AAGjC,QAAI,MAAM,WAAW,GAAG;AACtB,cAAQ,MAAM,qGAAqG,SAAS;AAC5H,aAAO;AAAA,IACT;AAGA,QAAI,CAAC,MAAM,CAAC,KAAK,MAAM,CAAC,MAAM,OAAO,CAAC,MAAM,CAAC,KAAK,MAAM,CAAC,MAAM,OAAO,CAAC,MAAM,CAAC,KAAK,MAAM,CAAC,MAAM,KAAK;AACnG,cAAQ,MAAM,+HAA+H,SAAS;AACtJ,aAAO;AAAA,IACT;AAEA,WAAO;AAAA,EACT;AAMA,qBAAmB,UAAU,uBAAuB,SAAU,WAAW;AACvE,QAAI,KAAK,eAAe,SAAS,GAAG;AAClC,aAAO,KAAK,eAAe,SAAS;AAAA,IACtC;AAEA,UAAM,MAAM,KAAK,eAAe,SAAS;AACzC,UAAM,SAAS;AAAA,MACb,QAAQ,CAAC;AAAA,MACT,IAAI,CAAC;AAAA,MACL,OAAO,CAAC;AAAA,IACV;AAGA,aAAS,IAAI,GAAG,IAAI,KAAK,SAAS,QAAQ,KAAK,GAAG;AAChD,YAAM,IAAI,KAAK,SAAS,CAAC;AACzB,UAAI,KAAK,SAAS,EAAE,UAAU,GAAG,GAAG;AAClC,YAAI,OAAO,EAAE,KAAK,GAAG;AACnB,iBAAO,EAAE,KAAK,EAAE,KAAK,CAAC;AAAA,QACxB;AAAA,MACF;AAAA,IACF;AAEA,SAAK,eAAe,SAAS,IAAI;AACjC,WAAO;AAAA,EACT;AAUA,qBAAmB,UAAU,KAAK,SAAU,SAAS,OAAO,UAAU,SAAS,MAAM;AAGnF,QAAI,OAAO,UAAU,YAAY;AAC/B,aAAO;AACP,gBAAU;AACV,cAAQ;AACR,iBAAW;AAAA,IACb,WAAW,OAAO,aAAa,cAAc,OAAO,YAAY,YAAY;AAC1E,aAAO;AACP,gBAAU;AACV,iBAAW;AAAA,IACb;AACA,QAAI,OAAO,YAAY;AAAY;AAEnC,QAAI,KAAK,SAAS;AAClB,QAAI,KAAK,OAAO,QAAQ,EAAE,MAAM;AAAI,WAAK;AAEzC,UAAM,KAAK,KAAK,mBAAmB,QAAQ;AAE3C,SAAK,SAAS,KAAK;AAAA,MACjB;AAAA,MACA,UAAU,KAAK,gBAAgB,OAAO;AAAA,MACtC,OAAO;AAAA,MACP;AAAA,MACA,UAAU;AAAA,MACV,MAAM,QAAQ;AAAA,IAChB,CAAC;AAGD,SAAK,SAAS,KAAK,SAAU,GAAG,GAAG;AACjC,YAAM,KAAK,OAAO,EAAE,aAAa,WAAW,EAAE,WAAW;AACzD,YAAM,KAAK,OAAO,EAAE,aAAa,WAAW,EAAE,WAAW;AACzD,aAAO,KAAK;AAAA,IACd,CAAC;AAGD,SAAK,iBAAiB,CAAC;AAAA,EACzB;AAKA,qBAAmB,UAAU,MAAM,SAAU,SAAS,OAAO,SAAS;AACpE,aAAS,IAAI,KAAK,SAAS,SAAS,GAAG,KAAK,GAAG,KAAK,GAAG;AACrD,YAAM,IAAI,KAAK,SAAS,CAAC;AACzB,UAAI,WAAW,EAAE,YAAY;AAAS;AACtC,UAAI,SAAS,EAAE,UAAU;AAAO;AAChC,UAAI,WAAW,EAAE,YAAY;AAAS;AACtC,WAAK,SAAS,OAAO,GAAG,CAAC;AAAA,IAC3B;AAEA,SAAK,iBAAiB,CAAC;AAAA,EACzB;AAIA,qBAAmB,UAAU,OAAO,eAAgB,WAAW,SAAS;AAEtE,QAAI,CAAC,KAAK,mBAAmB,SAAS,GAAG;AAEvC,aAAO;AAAA,QACL,OAAO,EAAE,MAAM,UAAU;AAAA,QACzB,QAAQ,CAAC,EAAE,OAAO,qDAAqD,CAAC;AAAA,QACxE,QAAQ;AAAA,MACV;AAAA,IACF;AAGA,UAAM,SAAS,KAAK;AACpB,UAAM,kBAAkB,KAAK,qBAAqB,SAAS;AAG3D,UAAM,MAAM,KAAK,eAAe,SAAS;AAGzC,UAAM,KAAK;AAAA,MACT,OAAO,KAAK,SAAS;AAAA,MACrB,QAAQ;AAAA;AAAA,MACR,MAAM;AAAA,MACN,QAAQ,CAAC;AAAA;AAAA,MACT,OAAO;AAAA,QACL,OAAO;AAAA;AAAA,QACP,MAAM;AAAA,QACN,WAAW,IAAI;AAAA,QACf,MAAM,IAAI;AAAA;AAAA,QACV,QAAQ,IAAI;AAAA,MACd;AAAA,MACA,WAAW;AAAA;AAAA,IACb;AAGA,aAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK,GAAG;AACzC,YAAM,QAAQ,OAAO,CAAC;AAGtB,UAAI,UAAU,QAAQ,GAAG;AAAQ;AAEjC,SAAG,MAAM,QAAQ;AACjB,YAAM,gBAAgB,gBAAgB,KAAK,KAAK,CAAC;AAEjD,eAAS,IAAI,GAAG,IAAI,cAAc,QAAQ,KAAK,GAAG;AAChD,YAAI,GAAG;AAAW;AAElB,cAAM,IAAI,cAAc,CAAC;AAEzB,YAAI;AAEF,gBAAM,IAAI,EAAE,QAAQ,IAAI,EAAE,OAAO,KAAK,MAAM,CAAC;AAC7C,cAAI,KAAK,OAAO,EAAE,SAAS,YAAY;AACrC,kBAAM;AAAA,UACR;AAAA,QACF,SAAS,KAAK;AACZ,kBAAQ,MAAM,oBAAoB,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,OAAO,EAAE,OAAO,MAAM,EAAE,KAAK,GAAG,GAAG;AACtG,aAAG,OAAO,KAAK,EAAE,OAAO,KAAK,MAAM,EAAE,MAAM,SAAS,EAAE,SAAS,OAAO,EAAE,MAAM,CAAC;AAE/E,aAAG,SAAS;AAAA,QACd;AAAA,MACF;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAQA,qBAAmB,UAAU,OAAO,SAAU,WAAW,SAAS;AAEhE,SAAK,KAAK,WAAW,OAAO;AAAA,EAC9B;AAMA,qBAAmB,UAAU,YAAY,SAAU,WAAW,SAAS;AACrE,WAAO,KAAK,KAAK,WAAW,OAAO;AAAA,EACrC;;;AC1RA,MAAM,qBAAqB;AAAA;AAAA;AAAA;AAAA;AAAA,IAKzB,QAAQ,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAQT,KAAK,SAAU,OAAO;AACpB,UAAI,CAAC,SAAS,OAAO,UAAU,UAAU;AACvC,gBAAQ,KAAK,uDAAuD;AACpE,eAAO,CAAC;AAAA,MACV;AAEA,YAAM,QAAQ,MAAM,QAAQ,SAAS,YAAY;AACjD,YAAM,QAAQ,MAAM,QAAQ,IAAI,YAAY;AAC5C,UAAI,CAAC;AAAM,eAAO,CAAC;AAEnB,YAAM,WAAW,OAAO,OAAO;AAC/B,UAAI,KAAK,OAAO,QAAQ,GAAG;AACzB,eAAO,KAAK,OAAO,QAAQ;AAAA,MAC7B;AAEA,YAAM,MAAO,WAAW,gBAAgB,WAAW,aAAa,cAAe,CAAC;AAChF,YAAM,aAAa,CAAC;AACpB,YAAM,iBAAiB,oBAAI,IAAI;AAE/B,eAAS,cAAc,MAAM;AAC3B,YAAI,CAAC,QAAQ,OAAO,SAAS;AAAU,iBAAO;AAC9C,cAAM,SAAS,KAAK,QAAQ,SAAS,YAAY;AACjD,cAAM,QAAQ,OAAO,KAAK,SAAS,WAAW,KAAK,KAAK,YAAY,IAAI;AACxE,YAAI,CAAC;AAAO,iBAAO;AACnB,eAAO,EAAE,MAAM,OAAO,MAAM,MAAM;AAAA,MACpC;AAEA,eAAS,YAAY,MAAM,aAAa,aAAa;AACnD,YAAI,CAAC;AAAM,iBAAO;AAClB,cAAM,YAAY,KAAK,SAAS,OAAO,KAAK,SAAS;AACrD,cAAM,YAAY,KAAK,SAAS,OAAO,KAAK,SAAS;AACrD,eAAO,aAAa;AAAA,MACtB;AAGA,iBAAW,OAAO,KAAK;AACrB,YAAI,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,GAAG;AAAG;AACrD,cAAM,MAAM,IAAI,GAAG;AACnB,YAAI,CAAC,OAAO,OAAO,QAAQ;AAAU;AAGrC,YAAI,eAAe,IAAI,GAAG;AAAG;AAG7B,YAAI,CAAC,IAAI;AAAO,cAAI,QAAQ,IAAI,MAAM;AAEtC,cAAM,QAAQ,IAAI;AAClB,YAAI,CAAC,MAAM,QAAQ,KAAK,KAAK,CAAC,MAAM,QAAQ;AAC1C,kBAAQ,KAAK,6DAA6D,IAAI,SAAS,GAAG;AAC1F;AAAA,QACF;AAEA,YAAI,QAAQ;AACZ,iBAAS,KAAK,GAAG,KAAK,MAAM,QAAQ,MAAM,GAAG;AAC3C,gBAAM,OAAO,cAAc,MAAM,EAAE,CAAC;AACpC,cAAI,CAAC;AAAM;AACX,cAAI,YAAY,MAAM,MAAM,IAAI,GAAG;AACjC,oBAAQ;AACR;AAAA,UACF;AAAA,QACF;AAEA,YAAI,OAAO;AACT,qBAAW,GAAG,IAAI,EAAE,MAAM,KAAK,KAAK,IAAI;AACxC,yBAAe,IAAI,GAAG;AAAA,QACxB;AAAA,MACF;AAGA,YAAM,aAAa,CAAC;AAEpB,YAAM,SAAS,CAAC;AAEhB,eAAS,MAAM,MAAM;AACnB,YAAI,OAAO,IAAI,MAAM;AAAM,iBAAO;AAClC,YAAI,OAAO,IAAI,MAAM;AAAY,iBAAO;AACxC,YAAI,OAAO,IAAI,MAAM;AAAW,iBAAO;AAEvC,YAAI,YAAY,WAAW,IAAI;AAG/B,YAAI,CAAC,WAAW;AACd,qBAAW,KAAK,YAAY;AAC1B,gBAAI,WAAW,CAAC,EAAE,IAAI,OAAO,MAAM;AACjC,0BAAY,WAAW,CAAC;AACxB;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAEA,YAAI,CAAC,WAAW;AACd,iBAAO,IAAI,IAAI;AACf,iBAAO;AAAA,QACT;AAEA,eAAO,IAAI,IAAI;AAEf,cAAM,OAAO,UAAU,IAAI,YAAY,UAAU,IAAI;AACrD,YAAI,MAAM,QAAQ,IAAI,GAAG;AACvB,mBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AACpC,kBAAM,UAAU,KAAK,CAAC;AACtB,gBAAI,CAAC,MAAM,OAAO,GAAG;AACnB,qBAAO,IAAI,IAAI;AACf,qBAAO;AAAA,YACT;AAAA,UACF;AAAA,QACF;AAEA,eAAO,IAAI,IAAI;AACf,mBAAW,KAAK,SAAS;AACzB,eAAO;AAAA,MACT;AAEA,iBAAW,QAAQ,YAAY;AAC7B,cAAM,IAAI;AAAA,MACZ;AAEA,WAAK,OAAO,QAAQ,IAAI;AACxB,aAAO;AAAA,IACT;AAAA,EACF;AAEA,MAAO,6BAAQ;;;ACxIf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,WAAS,cAAc,OAAO;AACnC,QAAI,CAAC,SAAS,OAAO,UAAU;AAAU,aAAO;AAChD,UAAM,QAAQ,OAAO,eAAe,KAAK;AACzC,WAAO,UAAU,OAAO,aAAa,UAAU;AAAA,EACjD;AAEO,WAAS,eAAe,KAAK;AAClC,WAAO,QAAQ,eAAe,QAAQ,eAAe,QAAQ;AAAA,EAC/D;AAEO,WAAS,gBAAgB,OAAO,MAAM;AAE3C,WAAO,EAAE,IAAI,KAAK;AAAA,EACpB;AAEO,WAAS,iBAAiB,OAAO,MAAM;AAC5C,UAAM,cAAc,QAAQ;AAC5B,UAAM,QAAQ,gBAAgB,OAAO,eAAe,QAAQ;AAC5D,QAAI,CAAC,MAAM,IAAI;AAEb,aAAO;AAAA,IACT;AAEA,QAAI,MAAM,QAAQ,KAAK,GAAG;AACxB,YAAM,MAAM,IAAI,MAAM,MAAM,MAAM;AAClC,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,GAAG;AACxC,YAAI,CAAC,IAAI,iBAAiB,MAAM,CAAC,GAAG,cAAc,cAAc,MAAM,IAAI,MAAM,MAAM,IAAI,GAAG;AAAA,MAC/F;AACA,aAAO;AAAA,IACT;AAEA,QAAI,cAAc,KAAK,GAAG;AACxB,YAAM,MAAM,CAAC;AACb,iBAAW,OAAO,OAAO;AACvB,YAAI,CAAC,OAAO,UAAU,eAAe,KAAK,OAAO,GAAG;AAAG;AACvD,YAAI,eAAe,GAAG;AAAG;AACzB,cAAM,YAAY,cAAc,cAAc,MAAM,MAAM;AAC1D,YAAI,GAAG,IAAI,iBAAiB,MAAM,GAAG,GAAG,SAAS;AAAA,MACnD;AACA,aAAO;AAAA,IACT;AAGA,WAAO;AAAA,EACT;AAEO,WAAS,iBAAiB,MAAM;AACrC,QAAI,CAAC,cAAc,IAAI,GAAG;AACxB,aAAO,CAAC;AAAA,IACV;AAEA,aAAS,KAAK,GAAG,KAAK,UAAU,QAAQ,MAAM,GAAG;AAC/C,YAAM,MAAM,UAAU,EAAE;AACxB,UAAI,QAAQ,QAAQ,OAAO,QAAQ;AAAa;AAChD,UAAI,CAAC,cAAc,GAAG,GAAG;AACvB,cAAM,OAAO;AACb,eAAO,iBAAiB,KAAK,IAAI;AAAA,MACnC;AAEA,iBAAW,OAAO,KAAK;AACrB,YAAI,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,GAAG;AAAG;AACrD,YAAI,eAAe,GAAG;AAAG;AACzB,cAAM,MAAM,IAAI,GAAG;AACnB,cAAM,OAAO;AAEb,YAAI,MAAM,QAAQ,GAAG,GAAG;AACtB,eAAK,GAAG,IAAI,iBAAiB,KAAK,IAAI;AACtC;AAAA,QACF;AAEA,YAAI,cAAc,GAAG,GAAG;AACtB,cAAI,CAAC,cAAc,KAAK,GAAG,CAAC,GAAG;AAC7B,iBAAK,GAAG,IAAI,CAAC;AAAA,UACf;AACA,2BAAiB,KAAK,GAAG,GAAG,GAAG;AAC/B;AAAA,QACF;AAEA,cAAM,QAAQ,gBAAgB,KAAK,IAAI;AACvC,aAAK,GAAG,IAAI;AAAA,MACd;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAEO,WAAS,eAAe;AAC7B,UAAM,OAAO,MAAM,UAAU,MAAM,KAAK,SAAS;AACjD,SAAK,QAAQ,CAAC,CAAC;AACf,WAAO,iBAAiB,MAAM,MAAM,IAAI;AAAA,EAC1C;;;ACvFA,WAAS,gBAAgB,SAAS;AAChC,QAAI,CAAC;AAAS,aAAO,EAAE,IAAI,IAAI,QAAQ,IAAI,QAAQ,IAAI;AACvD,UAAM,OAAO,OAAO,OAAO,EAAE,MAAM,GAAG;AACtC,UAAM,KAAK,KAAK,CAAC,KAAK;AACtB,UAAM,SAAS,KAAK,CAAC,KAAK;AAC1B,QAAI,SAAS,KAAK,SAAS,IAAI,KAAK,MAAM,CAAC,EAAE,KAAK,GAAG,IAAI;AACzD,QAAI,CAAC;AAAQ,eAAS;AACtB,WAAO,EAAE,IAAQ,QAAgB,OAAe;AAAA,EAClD;AAEA,WAAS,gBAAgB,IAAI;AAC3B,QAAI,OAAO,OAAO;AAAY,aAAO;AAErC,QAAI,GAAG;AAAW,aAAO;AACzB,QAAI;AACF,aAAO,GAAG,SAAS,EAAE,QAAQ,IAAI,MAAM;AAAA,IACzC,SAAS,GAAG;AACV,aAAO;AAAA,IACT;AAAA,EACF;AAEe,WAAR,qBAAsC,OAAO;AAClD,SAAK,QAAQ;AACb,SAAK,aAAa,CAAC;AACnB,SAAK,eAAe;AAAA,EACtB;AAEA,uBAAqB,UAAU,WAAW,WAAY;AACpD,UAAM,WAAW;AACjB,QAAI,CAAC,YAAY,OAAO,SAAS,QAAQ;AAAY;AAGrD,UAAM,OAAO,SAAS,IAAI,KAAK,KAAK,KAAK,CAAC;AAE1C,QAAI,KAAK,UAAU,GAAG;AACpB,cAAQ,KAAK,sCAAsC,KAAK,KAAK;AAC7D;AAAA,IACF;AAGA,UAAM,cAAc,KAAK,MAAM,gBAAgB,KAAK,MAAM,aAAa;AAEvE,QAAI,CAAC,gBAAgB,OAAO,iBAAiB,YAAY;AACvD,cAAQ,MAAM,iEAAiE;AAAA,IACjF,WAAW,eAAe,OAAO,YAAY,QAAQ,YAAY;AAC/D,YAAM,cAAc,YAAY,IAAI;AACpC,YAAM,QAAQ,KAAK,MAAM,QAAQ,IAAI,YAAY;AACjD,YAAM,eAAe,CAAC;AACtB,YAAM,cAAc,CAAC;AAErB,eAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACvC,cAAM,MAAM,KAAK,CAAC;AAClB,cAAM,UAAU,IAAI,IAAI,WAAW,IAAI,IAAI;AAC3C,YAAI,CAAC;AAAS;AACd,cAAM,WAAW,IAAI,IAAI,MAAM,IAAI,QAAQ,IAAI,YAAY;AAC3D,YAAI,WAAW,QAAQ,YAAY,OAAO,SAAS;AACjD,uBAAa,KAAK,OAAO;AAAA,QAC3B,OAAO;AACL,sBAAY,KAAK,OAAO;AAAA,QAC1B;AAAA,MACF;AAEA,YAAM,gBAAgB,aAAa,MAAM,MAAM,aAAa,OAAO,aAAa,CAAC,WAAW,CAAC,CAAC;AAC9F,kBAAY,OAAO;AACnB,kBAAY,SAAS,CAAC;AAAA,IACxB;AAGA,aAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACvC,WAAK,SAAS,KAAK,CAAC,CAAC;AAAA,IACvB;AAEA,SAAK,mBAAmB;AAAA,EAC1B;AAEA,uBAAqB,UAAU,WAAW,SAAU,KAAK;AACvD,UAAM,QAAQ,KAAK;AACnB,UAAM,OAAO,IAAI,QAAQ,IAAI,IAAI,MAAM;AACvC,UAAM,KAAK,IAAI,IAAI,MAAM;AAEzB,QAAI,CAAC,MAAM;AACT,cAAQ,KAAK,mDAAmD,GAAG;AACnE;AAAA,IACF;AAEA,QAAI,KAAK,WAAW,IAAI;AAAG;AAE3B,UAAM,MAAM;AAAA,MACV;AAAA,MACA,KAAK,IAAI;AAAA,MACT;AAAA,IACF;AAEA,UAAM,SAAS,OAAO,OAAO,GAAG;AAChC,WAAO,QAAQ;AACf,WAAO,MAAM;AACb,UAAM,SAAS,OAAO,OAAO,KAAK;AAClC,WAAO,QAAQ;AACf,WAAO,MAAM;AAGb,UAAM,UAAU,MAAM,aAAa;AACnC,QAAI,IAAI,IAAI,aAAa,OAAO,IAAI,IAAI,cAAc,UAAU;AAC9D,iBAAW,KAAK,IAAI,IAAI,WAAW;AACjC,YAAI,CAAC,OAAO,UAAU,eAAe,KAAK,IAAI,IAAI,WAAW,CAAC;AAAG;AACjE,cAAM,KAAK,IAAI,IAAI,UAAU,CAAC;AAC9B,YAAI,OAAO,OAAO,YAAY;AAC5B,cAAI,gBAAgB,EAAE,GAAG;AACvB,oBAAQ,KAAK,0EAA0E,EAAE,IAAI,MAAM,IAAI,GAAG,MAAM,MAAM,KAAK,CAAC;AAAA,UAC9H;AACA,gBAAM,OAAO,EAAE,MAAM,qBAAqB,KAAK,MAAM,OAAO,MAAM,IAAI,QAAQ,EAAE;AAChF,cAAI,CAAC,IAAI,WAAY;AACnB,kBAAM,OAAO,MAAM,UAAU,MAAM,KAAK,SAAS;AACjD,gBAAI,WAAW,OAAO,QAAQ,YAAY,YAAY;AACpD,qBAAO,QAAQ,QAAQ,IAAI,QAAQ,MAAM,IAAI;AAAA,YAC/C;AACA,mBAAO,GAAG,MAAM,QAAQ,IAAI;AAAA,UAC9B;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAGA,QAAI,OAAO,IAAI,IAAI,SAAS,YAAY;AACtC,YAAMA,WAAU,MAAM,aAAa;AACnC,UAAI;AACF,YAAI;AACJ,YAAIA,YAAW,OAAOA,SAAQ,YAAY,YAAY;AACpD,gBAAMA,SAAQ,QAAQ,IAAI,IAAI,MAAM,KAAK,CAAC,GAAG;AAAA,YAC3C,MAAM;AAAA,YACN,KAAK;AAAA,YACL,OAAO,MAAM;AAAA,YACb,QAAQ;AAAA,UACV,CAAC;AAAA,QACH,OAAO;AACL,gBAAM,IAAI,IAAI,KAAK,KAAK,GAAG;AAAA,QAC7B;AACA,YAAI,QAAQ;AAAO;AAAA,MACrB,SAAS,KAAK;AACZ,gBAAQ,MAAM,6BAA6B,OAAO,mBAAmB,GAAG;AACxE;AAAA,MACF;AAAA,IACF;AAGA,QAAI,IAAI,IAAI,SAAS,OAAO,IAAI,IAAI,UAAU,UAAU;AACtD,UAAI,CAAC,MAAM,EAAE;AAAG,cAAM,EAAE,IAAI,CAAC;AAC7B,YAAM,QAAQ,MAAM,EAAE;AACtB,iBAAW,WAAW,IAAI,IAAI,OAAO;AACnC,YAAI,CAAC,OAAO,UAAU,eAAe,KAAK,IAAI,IAAI,OAAO,OAAO;AAAG;AACnE,cAAM,QAAQ,IAAI,IAAI,MAAM,OAAO;AACnC,YAAI,OAAO,UAAU,YAAY;AAC/B,kBAAQ,KAAK,6BAA6B,OAAO,YAAY,UAAU,qBAAqB;AAC5F;AAAA,QACF;AACA,YAAI,gBAAgB,KAAK,GAAG;AAC1B,kBAAQ,KAAK,2DAA2D,EAAE,IAAI,MAAM,KAAK,SAAS,MAAM,MAAM,KAAK,CAAC;AAAA,QACtH;AACA,YAAI,MAAM,OAAO,GAAG;AAClB,kBAAQ,KAAK,4CAA4C,KAAK,MAAM,OAAO;AAAA,QAC7E;AACA,cAAM,OAAO,EAAE,MAAM,aAAa,KAAK,MAAM,OAAO,MAAM,IAAI,QAAQ,KAAK,MAAM,QAAQ;AACzF,cAAM,OAAO,IAAI,WAAY;AAC3B,gBAAM,OAAO,MAAM,UAAU,MAAM,KAAK,SAAS;AACjD,cAAI,WAAW,OAAO,QAAQ,YAAY,YAAY;AACpD,mBAAO,QAAQ,QAAQ,OAAO,QAAQ,MAAM,IAAI;AAAA,UAClD;AACA,iBAAO,MAAM,MAAM,QAAQ,IAAI;AAAA,QACjC;AAAA,MACF;AAAA,IACF;AAGA,QAAI,MAAM,QAAQ,IAAI,IAAI,MAAM,KAC9B,IAAI,IAAI,OAAO,UACf,MAAM,gBACN,MAAM,aAAa,UACnB,OAAO,MAAM,aAAa,OAAO,OAAO,YAAY;AAEpD,eAAS,KAAK,GAAG,KAAK,IAAI,IAAI,OAAO,QAAQ,MAAM,GAAG;AACpD,cAAM,MAAM,IAAI,IAAI,OAAO,EAAE;AAC7B,YAAI,CAAC;AAAK;AACV,cAAM,SAAS,gBAAgB,IAAI,GAAG;AACtC,cAAM,UAAU,OAAO,KAAK,MAAM,OAAO,SAAS,MAAM,OAAO;AAE/D,SAAC,UAAU,MAAM,OAAO,EAAE,QAAQ,SAAU,OAAO;AACjD,gBAAM,OAAO,IAAI,KAAK;AACtB,cAAI,CAAC,QAAQ,OAAO,KAAK,OAAO;AAAY;AAC5C,cAAI,gBAAgB,KAAK,EAAE,GAAG;AAC5B,oBAAQ,KAAK,+DAA+D,EAAE,IAAI,MAAM,OAAOC,UAAS,OAAc,MAAM,MAAM,KAAK,CAAC;AAAA,UAC1I;AACA,gBAAM,KAAM,OAAO,KAAK,aAAa,WAAY,KAAK,WAAW;AACjE,gBAAMA,WAAU,OAAO,KAAK,MAAM,OAAO,SAAS,MAAM,OAAO;AAC/D,gBAAM,OAAO;AAAA,YACX,MAAM;AAAA,YACN,KAAK;AAAA,YACL,OAAO,MAAM;AAAA,YACb,OAAOA;AAAA,YACP;AAAA,YACA,QAAQ,KAAK,GAAG,QAAQ;AAAA,UAC1B;AACA,gBAAM,UAAU,SAAU,IAAI;AAC5B,kBAAM,OAAO,CAAC,EAAE;AAChB,gBAAI,WAAW,OAAO,QAAQ,YAAY,YAAY;AACpD,qBAAO,QAAQ,QAAQ,KAAK,IAAI,QAAQ,MAAM,IAAI;AAAA,YACpD;AACA,mBAAO,KAAK,GAAG,MAAM,QAAQ,IAAI;AAAA,UACnC;AACA,gBAAM,aAAa,OAAO,GAAGA,UAAS,OAAO,IAAI,SAAS,EAAE,KAAK,MAAM,IAAI,KAAK,GAAG,QAAQ,QAAQ,aAAa,IAAI,CAAC;AAAA,QACvH,CAAC;AAAA,MACH;AAAA,IACF;AAEA,SAAK,WAAW,IAAI,IAAI;AAAA,EAC1B;AAEA,uBAAqB,UAAU,qBAAqB,WAAY;AAC9D,QAAI,KAAK;AAAc;AAEvB,UAAM,QAAQ,KAAK;AACnB,QAAI,CAAC,SACH,CAAC,MAAM,gBACP,CAAC,MAAM,aAAa,UACpB,OAAO,MAAM,aAAa,OAAO,OAAO,YAAY;AACpD;AAAA,IACF;AAEA,SAAK,eAAe;AACpB,UAAM,OAAO;AAEb,UAAM,aAAa,OAAO;AAAA,MACxB;AAAA,MACA;AAAA,MACA;AAAA,MACA,WAAY;AACV,mBAAW,QAAQ,KAAK,YAAY;AAClC,cAAI,CAAC,OAAO,UAAU,eAAe,KAAK,KAAK,YAAY,IAAI;AAAG;AAClE,gBAAM,MAAM,KAAK,WAAW,IAAI;AAChC,cAAI,CAAC,OAAO,CAAC,IAAI;AAAK;AACtB,gBAAM,MAAM,IAAI;AAEhB,cAAI,OAAO,IAAI,YAAY,YAAY;AACrC,kBAAM,UAAU,MAAM,aAAa;AACnC,gBAAI;AACF,kBAAI,WAAW,OAAO,QAAQ,YAAY,YAAY;AACpD,wBAAQ,QAAQ,IAAI,SAAS,KAAK,CAAC,GAAG;AAAA,kBACpC,MAAM;AAAA,kBACN,KAAK;AAAA,kBACL,OAAO,MAAM;AAAA,kBACb,QAAQ;AAAA,gBACV,CAAC;AAAA,cACH,OAAO;AACL,oBAAI,QAAQ,KAAK,GAAG;AAAA,cACtB;AAAA,YACF,SAAS,KAAK;AACZ,sBAAQ,MAAM,8BAA8B,IAAI,MAAM,QAAQ,OAAO,sBAAsB,GAAG;AAAA,YAChG;AAAA,UACF;AAAA,QACF;AAEA,aAAK,aAAa,CAAC;AAAA,MACrB;AAAA,IACF;AAAA,EACF;;;AC/Pe,WAAR,MAAuB,SAAS;AACrC,UAAM,OAAO,WAAW,OAAO,YAAY,WAAW,OAAO,OAAO,CAAC,GAAG,OAAO,IAAI,CAAC;AACpF,SAAK,KAAK,KAAK,MAAM,KAAK,QAAQ;AAClC,SAAK,QAAQ,KAAK,QAAQ,SAAS,YAAY;AAC/C,SAAK,QAAQ,KAAK,QAAQ,SAAS,YAAY;AAC/C,WAAO,eAAe,MAAM,MAAM;AAAA,MAChC,OAAO,KAAK;AAAA,MACZ,UAAU;AAAA,MACV,cAAc;AAAA,MACd,YAAY;AAAA,IACd,CAAC;AACD,WAAO,eAAe,MAAM,QAAQ;AAAA,MAClC,OAAO,KAAK;AAAA,MACZ,UAAU;AAAA,MACV,cAAc;AAAA,MACd,YAAY;AAAA,IACd,CAAC;AACD,WAAO,eAAe,MAAM,QAAQ;AAAA,MAClC,OAAO,KAAK;AAAA,MACZ,UAAU;AAAA,MACV,cAAc;AAAA,MACd,YAAY;AAAA,IACd,CAAC;AACD,UAAM,cAAc,OAAO,OAAO;AAAA,MAChC,QAAQ,IAAI,iBAAiB,IAAI;AAAA,MACjC,SAAS,IAAI,kBAAkB,IAAI;AAAA,MACnC,SAAS,IAAI,kBAAkB,MAAM,IAAI;AAAA,MACzC,QAAQ,IAAI,mBAAmB,IAAI;AAAA,MACnC,YAAY,IAAI,qBAAqB,IAAI;AAAA,IAC3C,CAAC;AACD,WAAO,eAAe,MAAM,gBAAgB;AAAA,MAC1C,OAAO;AAAA,MACP,UAAU;AAAA,MACV,cAAc;AAAA,MACd,YAAY;AAAA,IACd,CAAC;AAED,gBAAY,WAAW,SAAS;AAChC,gBAAY,OAAO,IAAI,SAAS,EAAE,SAAS,KAAK,CAAC;AAAA,EACnD;AAEA,QAAM,UAAU,UAAU,WAAY;AACpC,SAAK,aAAa,OAAO,IAAI,WAAW;AAAA,EAC1C;AAEA,SAAO,eAAe,OAAO,cAAc;AAAA,IACzC,OAAO;AAAA,IACP,UAAU;AAAA,IACV,cAAc;AAAA,IACd,YAAY;AAAA,EACd,CAAC;AAED,SAAO,eAAe,MAAM,WAAW,WAAW;AAAA,IAChD,OAAO,WAAY;AACjB,YAAM,cAAc;AACpB,aAAO,WAAW,MAAM;AAAA,IAC1B;AAAA,IACA,UAAU;AAAA,IACV,cAAc;AAAA,IACd,YAAY;AAAA,EACd,CAAC;;;ACvEM,WAAS,cAAcC,eAAc;AAExC,IAAAA,cAAa,QAAQ,WAAWA,cAAa,QAAQ,YAAY,CAAC;AAGlE,IAAAA,cAAa,UAAU,SAAU,MAAM;AAEnC,UAAIA,cAAa,QAAQ,SAAS,IAAI,GAAG;AACrC,eAAOA,cAAa,QAAQ,SAAS,IAAI;AAAA,MAC7C;AAEA,aAAOA,cAAa,KAAK,aAAa,IAAI;AAAA,IAC9C;AAGA,IAAAA,cAAa,KAAK,eAAe,SAAU,MAAM;AAC7C,UAAIA,cAAa,QAAQ,SAAS,IAAI,GAAG;AACrC,eAAOA,cAAa,QAAQ,SAAS,IAAI;AAAA,MAC7C;AAEA,YAAM,MAAMA,cAAa,SAAS,IAAI;AACtC,UAAI,CAAC,KAAK;AACN,gBAAQ,KAAK,iCAAiC,IAAI;AAClD,eAAO;AAAA,MACX;AAEA,YAAM,OAAO,OAAO,OAAO,CAAC,GAAG,GAAG;AAClC,WAAK,KAAK;AACV,WAAK,OAAO;AACZ,WAAK,OAAO,KAAK,QAAQ;AAGzB,YAAM,QAAQ,IAAIA,cAAa,MAAM,IAAI;AAGzC,MAAAA,cAAa,QAAQ,SAAS,IAAI,IAAI;AAEtC,UAAIA,cAAa,QAAQ,UAAU,MAAM,QAAQA,cAAa,QAAQ,MAAM,GAAG;AAC3E,QAAAA,cAAa,QAAQ,OAAO,KAAK,KAAK;AAAA,MAC1C;AAEA,aAAO;AAAA,IACX;AAEA,IAAAA,cAAa,KAAK,cAAc,SAAU,MAAM;AAC5C,YAAM,UAAUA,cAAa,QAAQ,SAAS,IAAI;AAClD,UAAI,CAAC;AAAS;AAEd,UAAI,QAAQ;AAAS,gBAAQ,QAAQ;AAErC,aAAOA,cAAa,QAAQ,SAAS,IAAI;AAAA,IAC7C;AAAA,EACJ;;;ACpDO,WAAS,eAAeC,eAAc;AAC3C,IAAAA,cAAa,OAAOA,cAAa,QAAQ,CAAC;AAC1C,IAAAA,cAAa,UAAUA,cAAa,WAAW,CAAC;AAEhD,UAAM,WAAW;AAAA,MACf,MAAM,CAAC;AAAA,MACP,MAAM,CAAC;AAAA,IACT;AAEA,aAAS,YAAY,OAAO;AAC1B,UAAI,OAAO,aAAa;AAAa;AACrC,YAAM,OAAO,SAAS;AACtB,UAAI,CAAC,KAAK;AAAkB;AAC5B,YAAM,UAAU,KAAK,iBAAiB,6CAA6C;AACnF,eAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK,GAAG;AAC1C,cAAM,OAAO,QAAQ,CAAC;AACtB,cAAM,MAAM,KAAK,eAAe;AAChC,YAAI,CAAC,IAAI,KAAK;AAAG;AACjB,YAAI;AACF,gBAAM,SAAS,KAAK,MAAM,GAAG;AAC7B,cAAI,CAAC,UAAU,OAAO,WAAW;AAAU;AAC3C,qBAAW,OAAO,QAAQ;AACxB,gBAAI,CAAC,OAAO,UAAU,eAAe,KAAK,QAAQ,GAAG;AAAG;AACxD,kBAAM,OAAQA,cAAa,QAAQ,GAAG,KAAK,OAAOA,cAAa,QAAQ,GAAG,MAAM,WAC5EA,cAAa,QAAQ,GAAG,IACxB,CAAC;AACL,kBAAM,OAAO,OAAO,GAAG;AACvB,gBAAI,CAAC,QAAQ,OAAO,SAAS;AAAU;AACvC,YAAAA,cAAa,QAAQ,GAAG,IAAI,OAAO,OAAO,CAAC,GAAG,MAAM,IAAI;AAAA,UAC1D;AAAA,QACF,SAAS,KAAK;AACZ,kBAAQ,KAAK,mDAAmD,GAAG;AAAA,QACrE;AAAA,MACF;AAAA,IACF;AAEA,aAAS,SAAS,IAAI;AACpB,UAAI,CAAC;AAAI,eAAO;AAEhB,YAAM,IACJ,GAAG,aAAa,YAAY,KAC5B,GAAG,aAAa,WAAW,KAC3B,GAAG,aAAa,iBAAiB,KAChC,GAAG,YAAY,GAAG,QAAQ,QAAQ,GAAG,QAAQ;AAChD,aAAO,IAAI,OAAO,CAAC,EAAE,YAAY,IAAI;AAAA,IACvC;AAEA,aAAS,uBAAuB,IAAI;AAClC,UAAI,CAAC;AAAI,eAAO;AAGhB,UAAI,GAAG;AAAiB,eAAO,GAAG;AAElC,YAAM,OAAO,CAAC;AAEd,YAAM,SAAS,GAAG,MAAMA,cAAa,UAAUA,cAAa,QAAQ,GAAG,EAAE,IAAI;AAC7E,UAAI,UAAU,OAAO,WAAW,UAAU;AACxC,eAAO,OAAO,MAAM,MAAM;AAAA,MAC5B;AAEA,UAAI,GAAG,IAAI;AACT,aAAK,KAAK,GAAG;AAAA,MACf;AAEA,YAAM,OAAO,SAAS,EAAE;AACxB,UAAI,MAAM;AACR,aAAK,OAAO;AAAA,MACd;AAGA,WAAK,MAAM;AAAA,QACT,IAAI,GAAG,MAAM;AAAA,QACb,SAAS;AAAA,MACX;AAEA,YAAM,QAAQ,IAAIA,cAAa,MAAM,IAAI;AAEzC,SAAG,kBAAkB;AACrB,eAAS,KAAK,KAAK,KAAK;AACxB,eAAS,KAAK,MAAM,EAAE,IAAI;AAC1B,cAAQ,IAAI,SAAS,GAAG,IAAI,KAAK;AACjC,aAAO;AAAA,IACT;AAEA,aAAS,UAAU,MAAM;AACvB,UAAI,OAAO,aAAa;AAAa,eAAO,CAAC;AAC7C,YAAM,QAAQ,QAAQ;AACtB,UAAI,CAAC,MAAM;AAAkB,eAAO,CAAC;AAGrC,kBAAY,KAAK;AAEjB,YAAM,QAAQ,MAAM,iBAAiB,KAAK;AAC1C,YAAM,UAAU,CAAC;AAEjB,eAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACrC,cAAM,QAAQ,uBAAuB,MAAM,CAAC,CAAC;AAC7C,YAAI;AAAO,kBAAQ,KAAK,KAAK;AAAA,MAC/B;AAEA,aAAO;AAAA,IACT;AAEA,IAAAA,cAAa,KAAK,YAAY;AAC9B,IAAAA,cAAa,UAAUA,cAAa,WAAW,CAAC;AAChD,IAAAA,cAAa,QAAQ,SAAS,SAAS,QAAQ,CAAC;AAChD,IAAAA,cAAa,KAAK,WAAW,SAAU,IAAI;AACzC,aAAO,SAAS,KAAK,EAAE,KAAK;AAAA,IAC9B;AAEA,QAAI,OAAO,aAAa,aAAa;AAEnC,UAAS,UAAT,WAAmB;AACjB,YAAI;AAAc;AAClB,uBAAe;AACf,kBAAU;AAAA,MACZ;AALA,UAAI,eAAe;AAOnB,UAAI,SAAS,eAAe,WAAW;AACrC,iBAAS,iBAAiB,oBAAoB,WAAY;AACxD,kBAAQ;AAAA,QACV,CAAC;AAAA,MACH,OAAO;AAEL,mBAAW,SAAS,CAAC;AAAA,MACvB;AAAA,IACF;AAAA,EACF;;;AC/HO,MAAM,SAAS;AAAA,IACpB,KAAK,CAAC,EAAE,MAAM,SAAS,MAAM,IAAI,CAAC;AAAA,IAClC,UAAU,CAAC,KAAK;AAAA,IAChB,IAAI;AAAA,IACJ,SAAS,CAAC;AAAA,IAEV,OAAO;AAAA,MACL,UAAU,SAAU,WAAW;AAC7B,cAAM,KAAK,KAAK,IAAI,QAAQ;AAC5B,YAAI,CAAC,MAAM,CAAC;AAAW;AACvB,YAAI,GAAG,aAAa,GAAG,UAAU,KAAK;AACpC,aAAG,UAAU,IAAI,SAAS;AAAA,QAC5B,OAAO;AACL,gBAAM,MAAM,GAAG,aAAa;AAC5B,eAAK,MAAM,MAAM,KAAK,QAAQ,MAAM,YAAY,GAAG,MAAM,IAAI;AAC3D,eAAG,aAAa,MAAM,MAAM,MAAM,MAAM;AAAA,UAC1C;AAAA,QACF;AAAA,MACF;AAAA,MACA,aAAa,SAAU,WAAW;AAChC,cAAM,KAAK,KAAK,IAAI,QAAQ;AAC5B,YAAI,CAAC,MAAM,CAAC;AAAW;AACvB,YAAI,GAAG,aAAa,GAAG,UAAU,QAAQ;AACvC,aAAG,UAAU,OAAO,SAAS;AAAA,QAC/B,OAAO;AACL,gBAAM,MAAM,GAAG,aAAa;AAC5B,aAAG,aAAa,MAAM,MAAM,KAAK,QAAQ,MAAM,YAAY,KAAK,GAAG,EAAE,KAAK;AAAA,QAC5E;AAAA,MACF;AAAA,MACA,UAAU,SAAU,WAAW;AAC7B,cAAM,KAAK,KAAK,IAAI,QAAQ;AAC5B,YAAI,CAAC,MAAM,CAAC;AAAW,iBAAO;AAC9B,YAAI,GAAG,aAAa,GAAG,UAAU;AAAU,iBAAO,GAAG,UAAU,SAAS,SAAS;AACjF,cAAM,MAAM,GAAG,aAAa;AAC5B,gBAAQ,MAAM,MAAM,KAAK,QAAQ,MAAM,YAAY,GAAG,MAAM;AAAA,MAC9D;AAAA,MACA,aAAa,SAAU,WAAW,OAAO;AACvC,cAAM,KAAK,KAAK,IAAI,QAAQ;AAC5B,YAAI,CAAC,MAAM,CAAC;AAAW;AACvB,YAAI,GAAG,aAAa,OAAO,GAAG,UAAU,WAAW,YAAY;AAC7D,cAAI,OAAO,UAAU;AAAW,eAAG,UAAU,OAAO,WAAW,KAAK;AAAA;AAC/D,eAAG,UAAU,OAAO,SAAS;AAAA,QACpC,OAAO;AACL,gBAAM,MAAM,KAAK,IAAI,SAAS,SAAS;AACvC,cAAI,OAAO,UAAU,WAAW;AAC9B,gBAAI,SAAS,CAAC;AAAK,mBAAK,IAAI,SAAS,SAAS;AAC9C,gBAAI,CAAC,SAAS;AAAK,mBAAK,IAAI,YAAY,SAAS;AAAA,UACnD,OAAO;AACL,gBAAI;AAAK,mBAAK,IAAI,YAAY,SAAS;AAAA;AAClC,mBAAK,IAAI,SAAS,SAAS;AAAA,UAClC;AAAA,QACF;AAAA,MACF;AAAA,MACA,MAAM,WAAY;AAChB,cAAM,KAAK,KAAK,IAAI,QAAQ;AAC5B,YAAI,CAAC;AAAI;AACT,WAAG,MAAM,UAAU;AAAA,MACrB;AAAA,MACA,MAAM,WAAY;AAChB,cAAM,KAAK,KAAK,IAAI,QAAQ;AAC5B,YAAI,CAAC;AAAI;AACT,WAAG,MAAM,UAAU;AAAA,MACrB;AAAA,MACA,UAAU,SAAU,MAAM,OAAO;AAC/B,cAAM,KAAK,KAAK,IAAI,QAAQ;AAC5B,YAAI,CAAC,MAAM,CAAC;AAAM;AAClB,WAAG,MAAM,IAAI,IAAI;AAAA,MACnB;AAAA,MACA,UAAU,SAAU,MAAM;AACxB,cAAM,KAAK,KAAK,IAAI,QAAQ;AAC5B,YAAI,CAAC,MAAM,CAAC,QAAQ,OAAO,WAAW,eAAe,CAAC,OAAO;AAAkB,iBAAO;AACtF,cAAM,KAAK,OAAO,iBAAiB,EAAE;AACrC,eAAO,KAAM,GAAG,iBAAiB,IAAI,KAAK,GAAG,IAAI,IAAK;AAAA,MACxD;AAAA,MACA,QAAQ,SAAU,MAAM,OAAO;AAC7B,cAAM,KAAK,KAAK,IAAI,QAAQ;AAC5B,YAAI,CAAC,MAAM,CAAC;AAAM;AAClB,YAAI,KAAK,QAAQ,IAAI,MAAM;AAAG,iBAAO,OAAO;AAC5C,WAAG,MAAM,YAAY,MAAM,KAAK;AAAA,MAClC;AAAA,MACA,QAAQ,SAAU,MAAM;AACtB,cAAM,KAAK,KAAK,IAAI,QAAQ;AAC5B,YAAI,CAAC,MAAM,CAAC,QAAQ,OAAO,WAAW,eAAe,CAAC,OAAO;AAAkB,iBAAO;AACtF,YAAI,KAAK,QAAQ,IAAI,MAAM;AAAG,iBAAO,OAAO;AAC5C,cAAM,KAAK,OAAO,iBAAiB,EAAE;AACrC,eAAO,KAAK,GAAG,iBAAiB,IAAI,IAAI;AAAA,MAC1C;AAAA,IACF;AAAA,IAEA,WAAW,CAAC;AAAA,IACZ,QAAQ,CAAC;AAAA,IAET,MAAM,WAAY;AAChB,UAAI,CAAC,KAAK,SAAS,CAAC,KAAK,MAAM,OAAO,OAAO,KAAK,MAAM,IAAI,YAAY,YAAY;AAClF,gBAAQ,KAAK,qDAAqD,KAAK,SAAS,KAAK,MAAM,EAAE;AAC7F,eAAO;AAAA,MACT;AACA,YAAM,KAAK,KAAK,MAAM,IAAI,QAAQ;AAClC,UAAI,CAAC,IAAI;AACP,gBAAQ,KAAK,gDAAgD,KAAK,SAAS,KAAK,MAAM,EAAE;AACxF,eAAO;AAAA,MACT;AACA,aAAO;AAAA,IACT;AAAA,IAEA,SAAS,WAAY;AAAA,IAAE;AAAA,EACzB;AAGA,MAAO,kBAAQ;;;AC7GR,MAAM,YAAY;AAAA,IACvB,KAAK,CAAC,EAAE,MAAM,SAAS,MAAM,IAAI,CAAC;AAAA,IAClC,UAAU,CAAC,KAAK;AAAA,IAChB,IAAI;AAAA,IACJ,SAAS,CAAC;AAAA,IAEV,OAAO,CAAC;AAAA,IAER,WAAW,CAAC;AAAA,IAEZ,QAAQ;AAAA,MACN;AAAA,QACE,KAAK;AAAA,QACL,IAAI;AAAA,UACF,IAAI,WAAY;AACd,kBAAM,KAAK,KAAK,MAAM,IAAI,QAAQ;AAClC,gBAAI,CAAC,MAAM,OAAO,GAAG,qBAAqB;AAAY;AACtD,gBAAI,YAAY,KAAK,MAAM,QAAQ,IAAI,wBAAwB,CAAC,CAAC;AACjE,gBAAI,CAAC,MAAM,QAAQ,SAAS;AAAG,0BAAY,CAAC;AAC5C,kBAAM,OAAO;AACb,kBAAM,aAAa;AAAA,cACjB,EAAE,MAAM,SAAS,WAAW,kBAAkB;AAAA,cAC9C,EAAE,MAAM,cAAc,WAAW,eAAe;AAAA,cAChD,EAAE,MAAM,cAAc,WAAW,gBAAgB;AAAA,cACjD,EAAE,MAAM,aAAa,WAAW,iBAAiB;AAAA,cACjD,EAAE,MAAM,WAAW,WAAW,eAAe;AAAA,YAC/C;AAEA,qBAAS,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAK,GAAG;AAC7C,oBAAM,QAAQ,WAAW,CAAC;AAC1B,oBAAM,UAAU,SAASC,SAAQ,UAAU;AACzC,qBAAK,MAAM,OAAO,KAAK,MAAM,WAAW;AAAA,kBACtC;AAAA,kBACA,SAAS;AAAA,gBACX,CAAC;AAAA,cACH;AACA,iBAAG,iBAAiB,MAAM,MAAM,OAAO;AACvC,wBAAU,KAAK,EAAE,MAAM,MAAM,MAAM,SAAkB,QAAQ,UAAU,CAAC;AAAA,YAC1E;AACA,iBAAK,MAAM,QAAQ,UAAU,wBAAwB,SAAS;AAAA,UAChE;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,QAAQ;AAAA,UACN,IAAI,WAAY;AACd,kBAAM,KAAK,KAAK,SAAS,KAAK,MAAM,IAAI,WAAW,KAAK,MAAM,IAAI,QAAQ;AAC1E,gBAAI,CAAC,MAAM,OAAO,GAAG,wBAAwB;AAAY;AACzD,kBAAM,YAAY,KAAK,MAAM,QAAQ,IAAI,wBAAwB,CAAC,CAAC;AACnE,gBAAI,CAAC,MAAM,QAAQ,SAAS;AAAG;AAC/B,qBAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK,GAAG;AAC5C,oBAAM,KAAK,UAAU,CAAC;AACtB,iBAAG,oBAAoB,GAAG,MAAM,GAAG,SAAS,GAAG,OAAO;AAAA,YACxD;AACA,iBAAK,MAAM,QAAQ,UAAU,wBAAwB,CAAC,CAAC;AAAA,UACzD;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IAEA,MAAM,WAAY;AAAA,IAAE;AAAA,IACpB,SAAS,WAAY;AAAA,IAAE;AAAA,EACzB;AAGA,MAAO,qBAAQ;;;AClER,MAAM,MAAM;AAAA,IACjB,KAAK,CAAC,EAAE,MAAM,SAAS,MAAM,IAAI,CAAC;AAAA,IAClC,UAAU,CAAC;AAAA,IACX,IAAI;AAAA,IACJ,SAAS,CAAC;AAAA,IAEV,OAAO;AAAA,MACL,SAAS,WAAY;AACnB,eAAO,KAAK,QAAQ,IAAI,eAAe,IAAI;AAAA,MAC7C;AAAA,MACA,IAAI,SAAU,MAAM,SAAS,SAAS;AACpC,cAAM,KAAK,KAAK,QAAQ,IAAI,eAAe,IAAI;AAC/C,YAAI,CAAC,MAAM,OAAO,GAAG,qBAAqB,cAAc,OAAO,YAAY;AAAY;AACvF,WAAG,iBAAiB,MAAM,SAAS,OAAO;AAC1C,YAAI,YAAY,KAAK,QAAQ,IAAI,iBAAiB,CAAC,CAAC;AACpD,YAAI,CAAC,MAAM,QAAQ,SAAS;AAAG,sBAAY,CAAC;AAC5C,kBAAU,KAAK,EAAE,MAAY,SAAkB,SAAkB,QAAQ,MAAM,CAAC;AAChF,aAAK,QAAQ,UAAU,iBAAiB,SAAS;AAAA,MACnD;AAAA,MACA,KAAK,SAAU,MAAM,SAAS,SAAS;AACrC,cAAM,KAAK,KAAK,QAAQ,IAAI,eAAe,IAAI;AAC/C,YAAI,CAAC,MAAM,OAAO,GAAG,wBAAwB,cAAc,OAAO,YAAY;AAAY;AAC1F,WAAG,oBAAoB,MAAM,SAAS,OAAO;AAC7C,cAAM,YAAY,KAAK,QAAQ,IAAI,iBAAiB,CAAC,CAAC;AACtD,YAAI,CAAC,MAAM,QAAQ,SAAS;AAAG;AAC/B,iBAAS,IAAI,UAAU,SAAS,GAAG,KAAK,GAAG,KAAK,GAAG;AACjD,gBAAM,KAAK,UAAU,CAAC;AACtB,cAAI,GAAG,SAAS,QAAQ,GAAG,YAAY,SAAS;AAC9C,sBAAU,OAAO,GAAG,CAAC;AAAA,UACvB;AAAA,QACF;AACA,aAAK,QAAQ,UAAU,iBAAiB,SAAS;AAAA,MACnD;AAAA,IACF;AAAA,IAEA,WAAW;AAAA,MACT,iBAAiB,SAAU,OAAO;AAChC,YAAI,CAAC;AAAO,iBAAO;AACnB,YAAI,OAAO,YAAY,eAAe,iBAAiB;AAAS,iBAAO;AACvE,YAAI,SAAS,MAAM,aAAa;AAAG,iBAAO;AAC1C,YAAI,OAAO,UAAU,YAAY;AAC/B,cAAI;AACF,mBAAO,MAAM;AAAA,UACf,SAAS,KAAK;AACZ,mBAAO;AAAA,UACT;AAAA,QACF;AACA,eAAO;AAAA,MACT;AAAA,MACA,cAAc,SAAU,IAAI;AAC1B,YAAI,CAAC,MAAM,OAAO,OAAO;AAAU,iBAAO;AAC1C,YAAI,OAAO,aAAa;AAAa,iBAAO;AAC5C,eAAO,SAAS,eAAe,EAAE,KAAK;AAAA,MACxC;AAAA,IACF;AAAA,IAEA,QAAQ,CAAC;AAAA,IAET,MAAM,WAAY;AAChB,UAAI,CAAC,KAAK;AAAO,eAAO;AACxB,YAAM,UAAU,KAAK,MAAM,QAAQ,IAAI,eAAe,IAAI;AAC1D,YAAM,QAAQ,KAAK,MAAM,QAAQ,IAAI,UAAU,IAAI;AAEnD,UAAI,KAAK,KAAK,gBAAgB,OAAO;AACrC,UAAI,CAAC,MAAM,OAAO;AAChB,aAAK,KAAK,aAAa,KAAK;AAAA,MAC9B;AAEA,UAAI,CAAC,IAAI;AACP,gBAAQ,KAAK,qGAAqG,KAAK,MAAM,EAAE;AAC/H,eAAO;AAAA,MACT;AAEA,UAAI,WAAW,CAAC,KAAK,gBAAgB,OAAO,GAAG;AAC7C,gBAAQ,KAAK,2GAA2G,KAAK,MAAM,EAAE;AAAA,MACvI;AAEA,WAAK,MAAM,QAAQ,IAAI,eAAe,EAAE;AACxC,aAAO;AAAA,IACT;AAAA,IAEA,SAAS,WAAY;AACnB,YAAM,KAAK,KAAK,MAAM,QAAQ,IAAI,eAAe,IAAI;AACrD,YAAM,YAAY,KAAK,MAAM,QAAQ,IAAI,iBAAiB,IAAI;AAAE;AAChE,UAAI,MAAM,MAAM,QAAQ,SAAS,GAAG;AAClC,iBAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK,GAAG;AAC5C,gBAAM,KAAK,UAAU,CAAC;AACtB,cAAI,MAAM,GAAG,QAAQ,GAAG,SAAS;AAC/B,eAAG,oBAAoB,GAAG,MAAM,GAAG,SAAS,GAAG,OAAO;AAAA,UACxD;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAGA,MAAO,cAAQ;;;AChGf,MAAM,mBAAmB;AAAA,IACvB,EAAE,MAAM,KAAK,MAAM,OAAO,KAAK,EAAE;AAAA,IACjC,EAAE,MAAM,KAAK,MAAM,OAAO,KAAK,EAAE;AAAA,IACjC,EAAE,MAAM,KAAK,MAAM,SAAS,KAAK,EAAE;AAAA,IACnC,EAAE,MAAM,KAAK,MAAM,QAAQ,KAAK,EAAE;AAAA,IAClC,EAAE,MAAM,KAAK,MAAM,QAAQ,KAAK,EAAE;AAAA,IAClC,EAAE,MAAM,KAAK,MAAM,OAAO,KAAK,EAAE;AAAA,IACjC,EAAE,MAAM,KAAK,MAAM,SAAS,KAAK,EAAE;AAAA,IACnC,EAAE,MAAM,KAAK,MAAM,SAAS,KAAK,EAAE;AAAA,IACnC,EAAE,MAAM,KAAK,MAAM,QAAQ,KAAK,EAAE;AAAA,IAClC,EAAE,MAAM,MAAM,MAAM,OAAO,KAAK,GAAG;AAAA,IACnC,EAAE,MAAM,MAAM,MAAM,UAAU,KAAK,GAAG;AAAA,IACtC,EAAE,MAAM,MAAM,MAAM,UAAU,KAAK,GAAG;AAAA,IACtC,EAAE,MAAM,MAAM,MAAM,YAAY,KAAK,GAAG;AAAA,IACxC,EAAE,MAAM,MAAM,MAAM,YAAY,KAAK,GAAG;AAAA,IACxC,EAAE,MAAM,MAAM,MAAM,WAAW,KAAK,GAAG;AAAA,IACvC,EAAE,MAAM,MAAM,MAAM,WAAW,KAAK,GAAG;AAAA,IACvC,EAAE,MAAM,MAAM,MAAM,aAAa,KAAK,GAAG;AAAA,IACzC,EAAE,MAAM,MAAM,MAAM,YAAY,KAAK,GAAG;AAAA,IACxC,EAAE,MAAM,MAAM,MAAM,YAAY,KAAK,GAAG;AAAA,IACxC,EAAE,MAAM,MAAM,MAAM,UAAU,KAAK,GAAG;AAAA,EACxC;AAEO,MAAM,QAAQ;AAAA,IACnB,KAAK;AAAA,MACH,EAAE,MAAM,SAAS,MAAM,OAAO;AAAA,MAC9B,EAAE,MAAM,SAAS,MAAM,OAAO;AAAA,IAChC;AAAA,IACA,UAAU,CAAC;AAAA,IACX,IAAI;AAAA,IACJ,SAAS,CAAC;AAAA;AAAA,IAGV,OAAO;AAAA,MACL,MAAM,WAAY;AAChB,eAAO,KAAK,QAAQ,IAAI,cAAc,CAAC,CAAC;AAAA,MAC1C;AAAA,MACA,KAAK,SAAU,MAAM;AACnB,YAAI,SAAS;AAAM;AACnB,cAAM,WAAW,KAAK,QAAQ,IAAI,cAAc,CAAC,CAAC;AAClD,eAAO,MAAM,QAAQ,IAAI,IAAI,KAAK,MAAM,IAAI,CAAC,IAAI;AAEjD,aAAK,OAAO,KAAK,kBAAkB;AAAA,UACjC;AAAA,UACA;AAAA,QACF,CAAC;AAED,eAAO;AAAA,MACT;AAAA,MACA,UAAU,eAAgB,MAAM;AAC9B,cAAM,WAAW,KAAK,QAAQ,IAAI,cAAc,CAAC,CAAC;AAClD,eAAO,MAAM,QAAQ,IAAI,IAAI,KAAK,MAAM,IAAI,CAAC;AAE7C,cAAM,KAAK,OAAO,UAAU,kBAAkB;AAAA,UAC5C;AAAA,UACA;AAAA,QACF,CAAC;AAED,eAAO;AAAA,MACT;AAAA,MACA,KAAK,WAAY;AACf,eAAO,KAAK,MAAM,KAAK;AAAA,MACzB;AAAA,MACA,KAAK,SAAU,OAAO;AACpB,cAAM,MAAM,KAAK,MAAM,KAAK;AAC5B,YAAI,OAAO,UAAU;AAAU,iBAAO;AACtC,YAAI,QAAQ,KAAK,SAAS,IAAI;AAAQ,iBAAO;AAC7C,eAAO,IAAI,KAAK;AAAA,MAClB;AAAA,IACF;AAAA;AAAA,IAGA,WAAW;AAAA,MACT,iBAAiB,SAAU,OAAO,UAAU;AAC1C,YAAI,MAAM,QAAQ,KAAK;AAAG,iBAAO,MAAM,MAAM;AAC7C,eAAO,MAAM,QAAQ,QAAQ,IAAI,SAAS,MAAM,IAAI,CAAC;AAAA,MACvD;AAAA,MACA,WAAW,SAAU,MAAM,OAAO,KAAK,WAAW;AAChD,cAAM,MAAM,MAAM,QAAQ,IAAI,IAAI,KAAK,MAAM,IAAI,CAAC;AAClD,cAAM,MAAM,OAAO,cAAc,aAC7B,SAAU,GAAG,GAAG;AAAE,iBAAO,UAAU,GAAG,GAAG,GAAG;AAAA,QAAG,IAC/C,SAAU,GAAG,GAAG;AAChB,gBAAM,KAAK,KAAK,OAAO,UAAU,eAAe,KAAK,GAAG,KAAK,IAAI,EAAE,KAAK,IAAI;AAC5E,gBAAM,KAAK,KAAK,OAAO,UAAU,eAAe,KAAK,GAAG,KAAK,IAAI,EAAE,KAAK,IAAI;AAC5E,cAAI,MAAM;AACV,cAAI,OAAO;AAAI,kBAAM;AAAA,mBACZ,OAAO,UAAa,OAAO;AAAM,kBAAM;AAAA,mBACvC,OAAO,UAAa,OAAO;AAAM,kBAAM;AAAA,mBACvC,OAAO,OAAO,YAAY,OAAO,OAAO;AAAU,kBAAM,KAAK;AAAA;AACjE,kBAAM,OAAO,EAAE,EAAE,cAAc,OAAO,EAAE,CAAC;AAC9C,iBAAO,QAAQ,SAAS,CAAC,MAAM;AAAA,QACjC;AACF,YAAI,KAAK,GAAG;AACZ,eAAO;AAAA,MACT;AAAA,IACF;AAAA,IAEA,QAAQ;AAAA,MACN;AAAA,QACE,KAAK;AAAA,QACL,IAAI;AAAA,UACF,IAAI,SAAU,IAAI;AAEhB,kBAAM,YAAY,KAAK,gBAAgB,kBAAkB,CAAC,CAAC;AAC3D,iBAAK,MAAM,QAAQ,UAAU,cAAc,SAAS;AAAA,UACtD;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,IAAI;AAAA,UACF,IAAI,SAAU,IAAI;AAChB,kBAAM,UAAW,MAAM,GAAG,QAAS;AACnC,kBAAM,OAAO,WAAW,QAAQ,OAAO,QAAQ,OAAO,CAAC;AACvD,iBAAK,MAAM,QAAQ,UAAU,cAAc,IAAI;AAAA,UACjD;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,IAAI;AAAA,UACF,IAAI,SAAU,IAAI;AAChB,kBAAM,UAAW,MAAM,GAAG,QAAS,CAAC;AAEpC,kBAAM,QAAQ,QAAQ,SAAS;AAC/B,kBAAM,MAAM,QAAQ,OAAO;AAE3B,gBAAI,CAAC,SAAS,CAAC,KAAK;AAAO;AAC3B,kBAAM,SAAS,KAAK,UAAU,KAAK,MAAM,MAAM,KAAK,GAAG,OAAO,KAAK,QAAQ,OAAO;AAClF,iBAAK,MAAM,QAAQ,UAAU,cAAc,MAAM;AACjD,eAAG,QAAQ;AACX,eAAG,MAAM;AACT,eAAG,OAAO;AAAA,UACZ;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IAEA,MAAM,WAAY;AAAA,IAAE;AAAA,IAEpB,SAAS,WAAY;AAAA,IAAE;AAAA,EACzB;AAGA,MAAO,gBAAQ;;;AChJR,MAAM,OAAO;AAAA,IAChB,KAAK,CAAC,EAAE,MAAM,SAAS,MAAM,IAAI,CAAC;AAAA;AAAA,IAClC,UAAU,CAAC;AAAA;AAAA,IACX,IAAI;AAAA,IACJ,SAAS,CAAC;AAAA,IAEV,OAAO;AAAA,MACH,MAAM,SAAU,WAAW,MAAM;AAC7B,gBAAQ,KAAK,QAAQ,WAAW,IAAI;AACpC,gBAAQ,IAAI,QAAQ,IAAI;AACxB,YAAI,CAAC,KAAK;AAAS,eAAK,IAAI,SAAS;AACrC,YAAI,CAAC,KAAK;AAAS;AACnB,gBAAQ,IAAI,gBAAgB,KAAK,OAAO;AACxC,aAAK,QAAQ,OAAO,KAAK,gBAAgB;AAAA,UACrC,MAAM,KAAK,MAAM;AAAA,UACjB,OAAO;AAAA,UACP;AAAA,QACJ,CAAC;AAAA,MACL;AAAA,IACJ;AAAA,IAEA,WAAW;AAAA,MACP,SAAS;AAAA,MAET,UAAU,WAAY;AAElB,YAAI,KAAK,IAAI;AAAU;AAEvB,YAAI,WAAW,KAAK,MAAM,QAAQ,IAAI,QAAQ,IAAI;AAClD,YAAI,YAAY;AAAM;AAGtB,YAAI,WAAW,gBAAgB,WAAW,aAAa,SAAS;AAC5D,eAAK,IAAI,WAAW,WAAW,aAAa,QAAQ,aAAa;AAAA,QACrE;AAEA,YAAI,KAAK,IAAI,UAAU;AACnB,eAAK,IAAI,SAAS,KAAK,SAAS,KAAK,OAAO,KAAK,MAAM,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC;AAAA,QAClF;AAAA,MACJ;AAAA,MAEA,kBAAkB,SAAU,IAAI;AAC5B,cAAM,UAAU,GAAG,QAAQ,CAAC;AAC5B,cAAM,WAAW,QAAQ;AACzB,cAAM,YAAY,QAAQ;AAC1B,cAAM,OAAO,QAAQ;AAGrB,YAAI,aAAa,KAAK,MAAM;AAAI;AAMhC,YAAI,WAAW;AACX,eAAK,MAAM,OAAO,KAAK,WAAW,IAAI;AAAA,QAC1C;AAAA,MACJ;AAAA,MAEA,OAAO,SAAU,WAAW,MAAM;AAC9B,YAAI,CAAC,KAAK;AAAS,eAAK,SAAS;AACjC,YAAI,CAAC,KAAK;AAAS;AAEnB,aAAK,QAAQ,OAAO,KAAK,gBAAgB;AAAA,UACrC,MAAM,KAAK,MAAM;AAAA,UACjB,OAAO;AAAA,UACP;AAAA,QACJ,CAAC;AAAA,MACL;AAAA,IACJ;AAAA,IAEA,QAAQ;AAAA,MACJ;AAAA,QACI,KAAK;AAAA,QACL,IAAI;AAAA,UACA,IAAI,WAAY;AACZ,iBAAK,SAAS;AAAA,UAClB;AAAA,QACJ;AAAA,MACJ;AAAA,MACA;AAAA,QACI,KAAK;AAAA,QACL,IAAI;AAAA,UACA,IAAI,SAAU,IAAI;AACd,kBAAM,IAAI,GAAG,QAAQ,CAAC;AACtB,iBAAK,MAAM,EAAE,OAAO,EAAE,IAAI;AAAA,UAC9B;AAAA,QACJ;AAAA,MACJ;AAAA,MACA;AAAA,QACI,KAAK;AAAA,QACL,IAAI;AAAA,UACA,IAAI,SAAU,IAAI;AACd,oBAAQ,IAAI,QAAQ,EAAE;AAAA,UAC1B;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,IAEA,MAAM,WAAY;AAAA,IAAE;AAAA,IAEpB,SAAS,WAAY;AAAA,IAAE;AAAA,EAC3B;AAGA,MAAO,sBAAQ;;;ACzGR,MAAM,cAAc;AAAA,IACvB,KAAK,CAAC,EAAE,MAAM,WAAW,MAAM,OAAO,CAAC;AAAA;AAAA,IACvC,UAAU,CAAC;AAAA;AAAA,IACX,IAAI;AAAA,IACJ,SAAS,CAAC;AAAA,IAEV,OAAO;AAAA,MACH,UAAU,SAAU,OAAO,QAAQ;AAC/B,gBAAQ,IAAI,YAAY,OAAO,MAAM;AAAA,MACzC;AAAA,MACA,OAAO,SAAU,OAAO,QAAQ;AAC5B,gBAAQ,IAAI,SAAS,MAAM,OAAO,MAAM;AAAA,MAC5C;AAAA,IACJ;AAAA,IACA,QAAQ;AAAA,MACJ;AAAA,QACI,KAAK;AAAA,QACL,IAAI;AAAA,UACA,IAAI,SAAU,IAAI;AACd,oBAAQ,IAAI,IAAI,EAAE;AAAA,UACtB;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,EACJ;AAGA,MAAO,uBAAQ;;;AC3BR,MAAM,YAAY;AAAA,IACrB,KAAK,CAAC,EAAE,MAAM,SAAS,MAAM,OAAO,CAAC;AAAA,IACrC,UAAU,CAAC,KAAK;AAAA,IAChB,IAAI;AAAA,IACJ,SAAS,CAAC;AAAA,IAEV,OAAO;AAAA,MACH,KAAK,WAAY;AACb,eAAO,KAAK,QAAQ,IAAI,cAAc,CAAC,CAAC;AAAA,MAC5C;AAAA,IACJ;AAAA,IAEA,WAAW;AAAA,MACP,eAAe,WAAY;AACvB,cAAM,OAAO,KAAK,MAAM,IAAI,QAAQ;AACpC,YAAI,CAAC;AAAM,iBAAO,CAAC;AAEnB,cAAM,QAAQ,CAAC;AACf,cAAM,SAAS,KAAK,iBAAiB,gBAAgB;AAErD,iBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACpC,gBAAM,UAAU,OAAO,CAAC;AACxB,gBAAM,QAAQ;AAAA,YACV,MAAM;AAAA,YACN,OAAO,CAAC;AAAA,UACZ;AAGA,gBAAM,SAAS,QAAQ,iBAAiB,gBAAgB;AACxD,mBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACpC,kBAAM,UAAU,OAAO,CAAC;AACxB,kBAAM,QAAQ,QAAQ,cAAc,yBAAyB;AAC7D,kBAAM,QAAQ,QAAQ,cAAc,OAAO;AAE3C,gBAAI,OAAO;AACP,oBAAM,YAAY;AAAA,gBACd,MAAM;AAAA,gBACN,MAAM,MAAM,QAAQ,MAAM;AAAA,gBAC1B,OAAO,QAAQ,MAAM,cAAc;AAAA,gBACnC,aAAa,MAAM,QAAQ,YAAY;AAAA,gBACvC,WAAW,MAAM;AAAA,gBACjB,UAAU,MAAM;AAAA,gBAChB,aAAa,MAAM;AAAA;AAAA,gBAEnB,MAAM,KAAK,YAAY,OAAO;AAAA,cAClC;AACA,oBAAM,MAAM,KAAK,SAAS;AAAA,YAC9B;AAAA,UACJ;AACA,gBAAM,KAAK,KAAK;AAAA,QACpB;AACA,eAAO;AAAA,MACX;AAAA,MAEA,aAAa,SAAU,IAAI;AACvB,YAAI,UAAU;AACd,eAAO,WAAW,CAAC,QAAQ,UAAU,SAAS,QAAQ,GAAG;AACrD,cAAI,QAAQ,aAAa,OAAO,QAAQ,cAAc,UAAU;AAC5D,kBAAM,QAAQ,QAAQ,UAAU,MAAM,eAAe;AACrD,gBAAI;AAAO,qBAAO,SAAS,MAAM,CAAC,GAAG,EAAE;AAAA,UAC3C;AACA,oBAAU,QAAQ;AAClB,cAAI,CAAC,WAAW,QAAQ,YAAY;AAAQ;AAAA,QAChD;AACA,eAAO;AAAA,MACX;AAAA,MAEA,SAAS,SAAU,OAAO;AACtB,cAAM,OAAO,KAAK,MAAM,IAAI,QAAQ;AACpC,YAAI,CAAC;AAAM;AAGX,aAAK,YAAY;AAEjB,iBAAS,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK;AACnC,gBAAM,OAAO,MAAM,CAAC;AACpB,cAAI,KAAK,SAAS;AAAS;AAE3B,gBAAM,UAAU,SAAS,cAAc,KAAK;AAC5C,kBAAQ,YAAY;AAEpB,gBAAM,QAAQ,SAAS,cAAc,KAAK;AAC1C,gBAAM,YAAY;AAElB,cAAI,KAAK,SAAS,KAAK,MAAM,QAAQ;AACjC,qBAAS,IAAI,GAAG,IAAI,KAAK,MAAM,QAAQ,KAAK;AACxC,oBAAM,QAAQ,KAAK,MAAM,CAAC;AAC1B,oBAAM,OAAO,MAAM,QAAQ;AAC3B,oBAAM,QAAQ,SAAS,cAAc,KAAK;AAC1C,oBAAM,YAAY,aAAa;AAE/B,oBAAM,iBAAiB,SAAS,cAAc,KAAK;AACnD,6BAAe,YAAY;AAE3B,kBAAI,MAAM,OAAO;AACb,sBAAM,QAAQ,SAAS,cAAc,OAAO;AAC5C,sBAAM,cAAc,MAAM;AAC1B,oBAAI,MAAM;AAAM,wBAAM,UAAU,MAAM;AACtC,+BAAe,YAAY,KAAK;AAAA,cACpC;AAEA,kBAAI;AACJ,kBAAI,MAAM,gBAAgB,YAAY;AAClC,wBAAQ,SAAS,cAAc,UAAU;AAAA,cAC7C,WAAW,MAAM,gBAAgB,UAAU;AACvC,wBAAQ,SAAS,cAAc,QAAQ;AAAA,cAE3C,OAAO;AACH,wBAAQ,SAAS,cAAc,OAAO;AACtC,sBAAM,OAAO,MAAM,aAAa;AAAA,cACpC;AAEA,kBAAI,MAAM,MAAM;AACZ,sBAAM,OAAO,MAAM;AACnB,sBAAM,KAAK,MAAM;AAAA,cACrB;AACA,kBAAI,MAAM;AAAa,sBAAM,cAAc,MAAM;AAEjD,kBAAI,MAAM,aAAa,QAAQ,MAAM,aAAa,UAAU,MAAM,aAAa,YAAY;AACvF,sBAAM,WAAW;AAAA,cACrB;AAEA,6BAAe,YAAY,KAAK;AAChC,oBAAM,YAAY,cAAc;AAChC,oBAAM,YAAY,KAAK;AAAA,YAC3B;AAAA,UACJ;AAEA,kBAAQ,YAAY,KAAK;AACzB,eAAK,YAAY,OAAO;AAAA,QAC5B;AAAA,MAGJ;AAAA,IACJ;AAAA,IAEA,QAAQ;AAAA,MACJ;AAAA,QACI,KAAK;AAAA,QACL,QAAQ;AAAA,UACJ,IAAI,SAAU,IAAI;AAEd,gBAAI,QAAQ,CAAC;AAEb,gBAAI,KAAK,MAAM,QAAQ,IAAI,YAAY,GAAG;AACtC,sBAAQ,KAAK,MAAM,QAAQ,IAAI,YAAY;AAAA,YAC/C;AAEA,gBAAI,CAAC,SAAS,MAAM,WAAW,GAAG;AAE9B,oBAAM,OAAO,KAAK,MAAM,IAAI,QAAQ;AACpC,kBAAI,MAAM;AACN,sBAAM,YAAY,KAAK,aAAa,kBAAkB,KAAK,KAAK,aAAa,iBAAiB;AAC9F,oBAAI,aAAa,OAAO,SAAS,GAAG;AAChC,0BAAQ,IAAI,iCAAiC,SAAS;AACtD,0BAAQ,OAAO,SAAS;AACxB,uBAAK,MAAM,QAAQ,IAAI,cAAc,KAAK;AAAA,gBAC9C;AAAA,cACJ;AAIA,kBAAI,CAAC,SAAS,MAAM,WAAW,GAAG;AAE9B,wBAAQ,IAAI,iCAAiC,KAAK,MAAM,EAAE;AAC1D,wBAAQ,KAAK,cAAc;AAC3B,qBAAK,MAAM,QAAQ,IAAI,cAAc,KAAK;AAAA,cAC9C;AAAA,YACJ,OAAO;AACH,sBAAQ,IAAI,wCAAwC,KAAK;AAAA,YAC7D;AAGA,eAAG,OAAO,GAAG,QAAQ,CAAC;AACtB,eAAG,KAAK,YAAY;AAAA,UACxB;AAAA,QACJ;AAAA,QACA,IAAI;AAAA,UACA,IAAI,SAAU,IAAI;AACd,kBAAM,QAAQ,GAAG,KAAK,aAAa,KAAK,MAAM,QAAQ,IAAI,YAAY;AAEtE,gBAAI,SAAS,MAAM,SAAS,GAAG;AAQ3B,mBAAK,QAAQ,KAAK;AAAA,YACtB;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,IAEA,MAAM,WAAY;AACd,aAAO;AAAA,IACX;AAAA,IAEA,SAAS,WAAY;AAAA,IACrB;AAAA,EACJ;AAGA,MAAO,qBAAQ;;;AC7MR,MAAM,aAAa;AAAA,IACtB,KAAK,CAAC,EAAE,MAAM,SAAS,MAAM,OAAO,CAAC;AAAA,IACrC,UAAU,CAAC,OAAO,OAAO;AAAA,IACzB,IAAI;AAAA,IACJ,SAAS,CAAC;AAAA,IAEV,OAAO;AAAA;AAAA,MAEH,WAAW,WAAY;AACnB,cAAM,OAAO,KAAK,MAAM,KAAK;AAC7B,eAAQ,QAAQ,KAAK,SAAU,KAAK,CAAC,IAAI;AAAA,MAC7C;AAAA,IACJ;AAAA,IAEA,WAAW;AAAA,MACP,OAAO,SAAU,QAAQ;AACrB,cAAM,OAAO,KAAK,MAAM,IAAI,QAAQ;AACpC,YAAI,CAAC;AAAM;AAGX,cAAM,SAAS,KAAK,iBAAiB,yBAAyB;AAC9D,iBAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACpC,gBAAM,QAAQ,OAAO,CAAC;AACtB,gBAAM,OAAO,MAAM,QAAQ,MAAM;AACjC,cAAI,CAAC;AAAM;AAGX,cAAI,UAAU,OAAO,UAAU,eAAe,KAAK,QAAQ,IAAI,GAAG;AAC9D,kBAAM,QAAQ,OAAO,IAAI;AAAA,UAC7B,OAAO;AAKH,gBAAI,CAAC;AAAQ,oBAAM,QAAQ;AAAA,UAC/B;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,IAEA,QAAQ;AAAA,MACJ;AAAA,QACI,KAAK;AAAA,QACL,IAAI;AAAA,UACA,IAAI,SAAU,IAAI;AACd,kBAAM,OAAO,KAAK,MAAM,MAAM,KAAK;AACnC,gBAAI,QAAQ,KAAK,QAAQ;AACrB,mBAAK,MAAM,KAAK,CAAC,CAAC;AAAA,YACtB;AAAA,UACJ;AAAA,QACJ;AAAA,MACJ;AAAA,MACA;AAAA,QACI,KAAK;AAAA,QACL,OAAO;AAAA,UACH,IAAI,SAAU,IAAI;AACd,kBAAM,OAAO,KAAK,MAAM,MAAM,KAAK;AAEnC,kBAAM,SAAU,QAAQ,KAAK,SAAU,KAAK,CAAC,IAAI;AACjD,iBAAK,MAAM,MAAM;AAAA,UACrB;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,IAEA,MAAM,WAAY;AACd,aAAO;AAAA,IACX;AAAA,IAEA,SAAS,WAAY;AAAA,IACrB;AAAA,EACJ;AAGA,MAAO,sBAAQ;;;AC1ER,MAAM,OAAO;AAAA,IAChB,KAAK,CAAC,EAAE,MAAM,SAAS,MAAM,OAAO,CAAC;AAAA,IACrC,UAAU,CAAC,KAAK;AAAA,IAChB,IAAI;AAAA,IACJ,SAAS;AAAA,MACL,OAAM,CAAC;AAAA,IACX;AAAA,IAEA,OAAO;AAAA;AAAA,MAEH,QAAQ,WAAY;AAEhB,cAAM,KAAK,KAAK,IAAI,QAAQ;AAC5B,YAAI,MAAM,OAAO,GAAG,WAAW;AAAY,aAAG,OAAO;AAAA,MACzD;AAAA,MACA,OAAO,WAAY;AACf,cAAM,KAAK,KAAK,IAAI,QAAQ;AAC5B,YAAI,MAAM,OAAO,GAAG,UAAU;AAAY,aAAG,MAAM;AAAA,MACvD;AAAA,IACJ;AAAA,IAEA,WAAW;AAAA;AAAA,IAEX;AAAA,IAEA,QAAQ;AAAA;AAAA,MAEJ;AAAA,QACI,KAAK;AAAA,QACL,IAAI;AAAA,UACA,IAAI,WAAY;AAAA,UAEhB;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,IAEA,MAAM,WAAY;AACd,aAAO;AAAA,IACX;AAAA,IAEA,SAAS,WAAY;AAAA,IACrB;AAAA,EACJ;AAGA,MAAO,eAAQ;;;AC9CR,MAAM,cAAc;AAAA,IACzB,KAAK,CAAC,EAAE,MAAM,SAAS,MAAM,OAAO,CAAC;AAAA,IACrC,UAAU,CAAC,OAAO,OAAO;AAAA,IACzB,IAAI;AAAA,IAEJ,OAAO;AAAA,MACL,KAAK,WAAY;AACf,eAAO,KAAK,QAAQ,IAAI,gBAAgB,CAAC,CAAC;AAAA,MAC5C;AAAA,MACA,MAAM,SAAU,OAAO,KAAK;AAC1B,cAAM,OAAO,KAAK,QAAQ,IAAI;AAC9B,cAAM,SAAS,KAAK,KAAK,SAAU,GAAG;AAAE,iBAAO,KAAK,EAAE,cAAc;AAAA,QAAO,CAAC,KAAK,CAAC;AAClF,cAAM,QAAQ,KAAK,QAAQ,IAAI,aAAa,EAAE,OAAO,MAAM,KAAK,KAAK,CAAC;AACtE,YAAI,UAAU;AACd,YAAI,YAAY,SAAS,YAAY,QAAQ;AAC3C,oBAAW,MAAM,UAAU,SAAS,MAAM,QAAQ,QAAS,SAAS;AAAA,QACtE;AAEA,aAAK,OAAO,KAAK,mBAAmB;AAAA,UAClC;AAAA,UACA,KAAK;AAAA,UACL,SAAS,OAAO,OAAO,SAAS,aAAa,OAAO,OAAO;AAAA,QAC7D,CAAC;AAED,eAAO;AAAA,MACT;AAAA,IACF;AAAA,IAEA,WAAW,CAAC;AAAA,IAEZ,QAAQ;AAAA,MACN;AAAA,QACE,KAAK;AAAA,QACL,IAAI;AAAA,UACF,IAAI,WAAY;AACd,kBAAM,UAAU,KAAK,MAAM,QAAQ,IAAI;AACvC,kBAAM,OAAO,KAAK,MAAM,IAAI,WAAW,KAAK,MAAM,IAAI,QAAQ;AAC9D,gBAAI,CAAC;AAAM;AAEX,kBAAM,QAAQ,KAAK,WAAW,KAAK,QAAQ,YAAY,MAAM,UACzD,OACA,KAAK,iBAAiB,KAAK,cAAc,OAAO;AACpD,gBAAI,CAAC;AAAO;AAEZ,gBAAI,QAAS,MAAM,QAAS,MAAM,QAAQ,MAAM,cAAc,OAAO;AACrE,gBAAI,CAAC,OAAO;AACV,sBAAQ,MAAM,cAAc,MAAM,YAAY,IAAI,MAAM,aAAa,SAAS,cAAc,OAAO,GAAG,MAAM,UAAU;AAAA,YACxH;AAEA,kBAAM,MAAM,MAAM,QAAQ,MAAM,KAAK,CAAC,IAAI,MAAM,KAAK,CAAC,IAAI,MAAM,UAAU;AAC1E,gBAAI,YAAY;AAChB,kBAAM,QAAQ,KAAK;AACnB,qBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK,GAAG;AAC1C,oBAAM,MAAM,QAAQ,CAAC,KAAK,CAAC;AAC3B,oBAAM,KAAK,SAAS,cAAc,IAAI;AACtC,iBAAG,cAAc,IAAI,SAAS,IAAI,aAAa;AAC/C,kBAAI,IAAI,YAAY,IAAI,WAAW;AACjC,mBAAG,UAAU,IAAI,aAAa;AAC9B,mBAAG,iBAAiB,SAAU,yBAAU,QAAQ;AAC9C,yBAAO,WAAY;AACjB,0BAAM,QAAQ,KAAK,OAAO,WAAW,IAAI;AAAA,kBAC3C;AAAA,gBACF,EAAG,GAAG,CAAC;AAAA,cACT;AACA,kBAAI,YAAY,EAAE;AAAA,YACpB;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,OAAO;AAAA,UACL,IAAI,SAAU,IAAI;AAChB,iBAAK,MAAM,QAAQ,UAAU,aAAa,EAAE,OAAO,GAAG,OAAO,KAAK,GAAG,OAAO,MAAM,CAAC;AAAA,UACrF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IAEA,MAAM,WAAY;AAAA,IAAE;AAAA,IAEpB,SAAS,WAAY;AAAA,IAAE;AAAA,IAEvB,SAAS;AAAA,MACP,MAAM;AAAA,QACJ,SAAS;AAAA,UACP,EAAE,WAAW,QAAQ,OAAO,QAAQ,UAAU,KAAK;AAAA,UACnD,EAAE,WAAW,QAAQ,OAAO,QAAQ,UAAU,KAAK;AAAA,QACrD;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAIA,MAAO,uBAAQ;;;AC/FR,MAAM,kBAAkB;AAAA,IAC7B,KAAK,CAAC,EAAE,MAAM,SAAS,MAAM,OAAO,CAAC;AAAA,IACnC,UAAU,CAAC,OAAO,QAAQ,OAAO;AAAA,IACjC,IAAI;AAAA,IACJ,SAAS,CAAC;AAAA,IAEV,OAAO,CAAC;AAAA,IAER,WAAW;AAAA,MACP,cAAc,WAAY;AACtB,cAAM,KAAK,KAAK,MAAM,IAAI,QAAQ;AAClC,YAAI,CAAC;AAAI;AACT,cAAM,OAAO,GAAG,iBAAiB,UAAU,KAAK,CAAC;AACjD,iBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK;AAClC,gBAAM,MAAM,KAAK,CAAC;AAClB,cAAI,CAAC,IAAI,aAAa,UAAU,GAAG;AAC/B,gBAAI,aAAa,YAAY,CAAC;AAAA,UAClC;AAAA,QACJ;AAAA,MACJ;AAAA,MACA,cAAc,SAAU,QAAQ;AAC5B,cAAM,KAAK,KAAK,MAAM,IAAI,QAAQ;AAClC,YAAI,CAAC;AAAI;AACT,cAAM,MAAM,OAAO,QAAQ,IAAI;AAC/B,YAAI,CAAC;AAAK;AACV,cAAM,MAAM,GAAG,cAAc,eAAe;AAC5C,YAAI;AAAK,cAAI,UAAU,OAAO,YAAY;AAC1C,YAAI,UAAU,IAAI,YAAY;AAC9B,cAAM,WAAW,MAAM,UAAU,QAAQ,KAAK,IAAI,WAAW,UAAU,GAAG;AAC1E,cAAM,OAAO,KAAK,MAAM,MAAM,IAAI,QAAQ;AAC1C,aAAK,MAAM,OAAO,KAAK,iBAAiB;AAAA,UACpC,OAAO;AAAA,UACP,KAAK;AAAA,UACL,SAAS;AAAA,QACb,CAAC;AAAA,MACL;AAAA,IACJ;AAAA,IAEA,QAAQ;AAAA,MACJ;AAAA,QACI,KAAK;AAAA,QACL,IAAI;AAAA,UACA,IAAI,WAAY;AACZ,kBAAM,KAAK,KAAK,MAAM,IAAI,QAAQ;AAClC,gBAAI,IAAI;AACJ,oBAAM,OAAO;AACb,iBAAG,iBAAiB,WAAW,SAAU,GAAG;AACxC,qBAAK,aAAa,EAAE,MAAM;AAAA,cAC9B,CAAC;AAAA,YACL;AACA,iBAAK,aAAa;AAAA,UACtB;AAAA,QACJ;AAAA,MACJ;AAAA,MACA;AAAA,QACI,KAAK;AAAA,QACL,OAAO;AAAA,UACH,IAAI,WAAY;AACZ,iBAAK,aAAa;AAAA,UACtB;AAAA,QACJ;AAAA,MACJ;AAAA,MACA;AAAA,QACI,KAAK;AAAA,QACL,OAAO;AAAA,UACH,IAAI,WAAY;AACZ,iBAAK,aAAa;AAAA,UACtB;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ;AAAA,IAEA,MAAM,WAAY;AAAA,IAAE;AAAA,IAEpB,SAAS,WAAY;AAAA,IAAE;AAAA,EAC3B;AAGA,MAAO,4BAAQ;;;AC9ER,MAAM,WAAW;AAAA,IACtB,KAAK,CAAC,EAAE,MAAM,SAAS,MAAM,OAAO,CAAC;AAAA,IACrC,UAAU,CAAC,OAAO,SAAS,SAAS;AAAA,IACpC,IAAI;AAAA,IACJ,SAAS,CAAC;AAAA,IAEV,OAAO;AAAA,MACL,QAAQ,WAAY;AAClB,cAAM,OAAO,KAAK,IAAI,QAAQ;AAC9B,YAAI,CAAC;AAAM;AAEX,cAAM,QAAQ,KAAK,WAAW,KAAK,QAAQ,YAAY,MAAM,UACzD,OACA,KAAK,iBAAiB,KAAK,cAAc,OAAO;AACpD,YAAI,CAAC;AAAO;AAEZ,cAAM,UAAU,KAAK,QAAQ,IAAI;AACjC,cAAM,OAAO,KAAK,MAAM,KAAK;AAE7B,YAAI,QAAS,MAAM,WAAW,MAAM,QAAQ,SACxC,MAAM,QAAQ,CAAC,IACf,MAAM,cAAc,OAAO;AAC/B,YAAI,CAAC,OAAO;AACV,kBAAQ,SAAS,cAAc,OAAO;AACtC,gBAAM,YAAY,KAAK;AAAA,QACzB;AACA,cAAM,YAAY;AAElB,iBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACvC,gBAAM,SAAS,KAAK,CAAC,KAAK,CAAC;AAC3B,gBAAM,KAAK,SAAS,cAAc,IAAI;AACtC,mBAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK,GAAG;AAC1C,kBAAM,MAAM,QAAQ,CAAC,KAAK,CAAC;AAC3B,kBAAM,QAAQ,IAAI;AAClB,kBAAM,KAAK,SAAS,cAAc,IAAI;AACtC,eAAG,cAAe,SAAS,OAAO,KAAK,MAAM,UAAa,OAAO,KAAK,MAAM,OACxE,OAAO,KAAK,IACZ;AACJ,eAAG,YAAY,EAAE;AAAA,UACnB;AACA,gBAAM,YAAY,EAAE;AAAA,QACtB;AAAA,MACF;AAAA,IACF;AAAA,IAEA,WAAW,CAAC;AAAA,IAEZ,QAAQ;AAAA,MACN;AAAA,QACE,KAAK;AAAA,QACL,IAAI;AAAA,UACF,IAAI,WAAY;AACd,iBAAK,MAAM,KAAK,OAAO;AAAA,UACzB;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,OAAO;AAAA,UACL,IAAI,SAAU,IAAI;AAChB,iBAAK,MAAM,KAAK,OAAO;AAAA,UACzB;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IAEA,MAAM,WAAY;AAAA,IAAE;AAAA,IAEpB,SAAS,WAAY;AAAA,IAAE;AAAA,EACzB;AAGA,MAAO,oBAAQ;;;ACxER,MAAM,OAAO;AAAA,IAClB,KAAK,CAAC,EAAE,MAAM,SAAS,MAAM,OAAO,CAAC;AAAA,IACrC,UAAU,CAAC,KAAK;AAAA,IAChB,IAAI;AAAA,IACJ,SAAS,CAAC;AAAA,IAEV,OAAO;AAAA,MACL,SAAS,WAAY;AACnB,YAAI,KAAK;AAAW,eAAK,UAAU,aAAa;AAAA,MAClD;AAAA,MACA,cAAc,WAAY;AACxB,cAAM,MAAM,KAAK;AACjB,YAAI,CAAC;AAAK,iBAAO,EAAE,OAAO,IAAI,KAAK,KAAK;AACxC,cAAM,MAAO,OAAO,IAAI,kBAAkB,WAAY,IAAI,gBAAgB;AAC1E,cAAM,MAAO,OAAO,KAAK,IAAI,QAAQ,IAAI,KAAK,GAAG,IAAK,IAAI,KAAK,GAAG,IAAI;AACtE,eAAO,EAAE,OAAO,KAAK,IAAS;AAAA,MAChC;AAAA,MACA,gBAAgB,WAAY;AAC1B,YAAI,KAAK;AAAW,eAAK,UAAU,kBAAkB,EAAE;AAAA,MACzD;AAAA,IACF;AAAA,IAEA,WAAW;AAAA,MACT,OAAO;AAAA,MACP,MAAM,CAAC;AAAA,MACP,eAAe;AAAA,MACf,YAAY,WAAY;AACtB,cAAM,OAAO,KAAK,MAAM,OAAO,OAAO,KAAK,MAAM,IAAI,YAAY,aAC7D,KAAK,MAAM,IAAI,QAAQ,IACvB;AACJ,YAAI,CAAC,QAAQ,CAAC,KAAK,eAAe;AAChC,eAAK,QAAQ;AACb,iBAAO;AAAA,QACT;AACA,cAAM,QACJ,KAAK,cAAc,eAAe,KAClC,KAAK,cAAc,OAAO;AAC5B,aAAK,QAAQ,SAAS;AACtB,eAAO,KAAK;AAAA,MACd;AAAA,MACA,cAAc,WAAY;AACxB,cAAM,QAAQ,KAAK,SAAS,KAAK,WAAW;AAC5C,YAAI,CAAC,OAAO;AACV,eAAK,OAAO,CAAC;AACb,eAAK,gBAAgB;AACrB;AAAA,QACF;AACA,cAAM,OAAQ,MAAM,WAAW,MAAM,QAAQ,SACzC,MAAM,QAAQ,CAAC,IACf,MAAM,cAAc,OAAO;AAC/B,cAAM,OAAO,OAAO,KAAK,OAAO,MAAM;AACtC,aAAK,OAAO,MAAM,UAAU,MAAM,KAAK,QAAQ,CAAC,CAAC;AACjD,YAAI,KAAK,iBAAiB,KAAK,KAAK,QAAQ;AAC1C,eAAK,gBAAgB;AAAA,QACvB;AAAA,MACF;AAAA,MACA,mBAAmB,SAAU,OAAO;AAClC,cAAM,OAAO,KAAK,QAAQ,CAAC;AAC3B,YAAI,CAAC,KAAK,QAAQ;AAChB,eAAK,gBAAgB;AACrB;AAAA,QACF;AACA,YAAI,OAAO,UAAU,YAAY,QAAQ,KAAK,SAAS,KAAK,QAAQ;AAClE,kBAAQ;AAAA,QACV;AACA,iBAAS,IAAI,GAAG,IAAI,KAAK,QAAQ,KAAK,GAAG;AACvC,gBAAM,MAAM,KAAK,CAAC;AAClB,cAAI,CAAC,OAAO,CAAC,IAAI;AAAW;AAC5B,cAAI,MAAM;AAAO,gBAAI,UAAU,IAAI,sBAAsB;AAAA;AACpD,gBAAI,UAAU,OAAO,sBAAsB;AAAA,QAClD;AACA,aAAK,gBAAgB;AAAA,MACvB;AAAA,IACF;AAAA,IAEA,QAAQ;AAAA,MACN;AAAA,QACE,KAAK;AAAA,QACL,IAAI;AAAA,UACF,IAAI,WAAY;AACd,iBAAK,WAAW;AAChB,iBAAK,aAAa;AAAA,UACpB;AAAA,QACF;AAAA,MACF;AAAA,MACA;AAAA,QACE,KAAK;AAAA,QACL,IAAI;AAAA,UACF,IAAI,SAAU,IAAI;AAChB,kBAAM,QAAQ,KAAK,SAAS,KAAK,WAAW;AAC5C,gBAAI,CAAC;AAAO;AACZ,gBAAI,CAAC,MAAM,CAAC,GAAG,QAAQ,CAAC,GAAG,KAAK;AAAU;AAC1C,kBAAM,SAAS,GAAG,KAAK,SAAS;AAChC,gBAAI,CAAC;AAAQ;AAEb,gBAAI,OAAO;AACX,gBAAI,aAAa;AACjB,mBAAO,QAAQ,SAAS,OAAO;AAC7B,kBAAI,KAAK,WAAW,KAAK,QAAQ,YAAY,MAAM,MAAM;AACvD,6BAAa;AACb;AAAA,cACF;AACA,qBAAO,KAAK;AAAA,YACd;AACA,gBAAI,CAAC;AAAY;AAEjB,iBAAK,aAAa;AAClB,kBAAM,OAAO,KAAK,QAAQ,CAAC;AAC3B,kBAAM,QAAQ,KAAK,QAAQ,UAAU;AACrC,gBAAI,UAAU;AAAI;AAClB,gBAAI,KAAK,kBAAkB;AAAO,mBAAK,kBAAkB,EAAE;AAAA;AACtD,mBAAK,kBAAkB,KAAK;AAAA,UACnC;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IAEA,MAAM,WAAY;AAChB,WAAK,MAAM,YAAY;AACvB,WAAK,QAAQ;AACb,WAAK,OAAO,CAAC;AACb,WAAK,gBAAgB;AACrB,aAAO;AAAA,IACT;AAAA,IAEA,SAAS,WAAY;AACnB,WAAK,OAAO,CAAC;AACb,WAAK,QAAQ;AACb,WAAK,gBAAgB;AACrB,UAAI,KAAK,OAAO;AACd,eAAO,KAAK,MAAM;AAAA,MACpB;AAAA,IACF;AAAA,EACF;AAMA,MAAO,eAAQ;;;AC3If,MAAM,cAAc;AAAA,IAChB,MAAM;AAAA,EACV;AAEA,MAAO,eAAQ;;;ACeR,WAAS,iBAAiBC,eAAc;AAG/C,QAAI,iBAAc;AAChB,MAAAA,cAAa,WAAW,QAAQ,IAAI;AAAA,IACtC;AACA,QAAI,oBAAc;AAChB,MAAAA,cAAa,WAAW,WAAW,IAAI;AAAA,IACzC;AACA,QAAI,aAAc;AAChB,MAAAA,cAAa,WAAW,KAAK,IAAI;AAAA,IACnC;AACA,QAAI,eAAc;AAChB,MAAAA,cAAa,WAAW,OAAO,IAAI;AAAA,IACrC;AACA,QAAI,qBAAc;AAChB,MAAAA,cAAa,WAAW,MAAM,IAAI;AAAA,IACpC;AACA,QAAI,sBAAc;AAChB,MAAAA,cAAa,WAAW,aAAa,IAAI;AAAA,IAC3C;AACA,QAAI,oBAAc;AAChB,MAAAA,cAAa,WAAW,WAAW,IAAI;AAAA,IACzC;AACA,QAAI,qBAAc;AAChB,MAAAA,cAAa,WAAW,YAAY,IAAI;AAAA,IAC1C;AACA,QAAI,cAAc;AAChB,MAAAA,cAAa,WAAW,MAAM,IAAI;AAAA,IACpC;AACA,QAAI,sBAAc;AAChB,MAAAA,cAAa,WAAW,aAAa,IAAI;AAAA,IAC3C;AACA,QAAI,2BAAc;AAChB,MAAAA,cAAa,WAAW,iBAAiB,IAAI;AAAA,IAC/C;AACA,QAAI,mBAAc;AAChB,MAAAA,cAAa,WAAW,UAAU,IAAI;AAAA,IACxC;AACA,QAAI,cAAc;AAChB,MAAAA,cAAa,WAAW,MAAM,IAAI;AAAA,IACpC;AACA,IAAAA,cAAa,SAAS,aAAa,IAAI;AAAA,EAEvC;;;ACpDA,MAAM,eAAe;AAAA,IACjB,OAAO;AAAA,IACP,UAAU;AAAA,IACV,OAAO;AAAA,IACP,YAAY,CAAC;AAAA,IACb,UAAU,CAAC;AAAA,IACX,SAAS,CAAC;AAAA,IACV,SAAS;AAAA,MACL,QAAQ,CAAC;AAAA,MACT,UAAU,CAAC;AAAA,IACf;AAAA,IACA,MAAM,CAAC;AAAA,EACX;AAGA,aAAW,eAAe;AAG1B,mBAAiB,YAAY;AAG7B,gBAAc,YAAY;AAC1B,iBAAe,YAAY;AAE3B,MAAO,cAAQ;",
  "names": ["runtime", "pattern", "VanillaBrick", "VanillaBrick", "handler", "VanillaBrick"]
}
